{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ComfyGit","text":"<p>A package and environment manager for ComfyUI that brings reproducibility and version control to AI image generation workflows.</p>"},{"location":"#get-started-in-5-minutes","title":"Get started in 5 minutes","text":"<p>Prerequisites:</p> <ul> <li>Python 3.10 or newer</li> <li>Windows, Linux, or macOS</li> </ul> <p>Install UV (package manager):</p> macOS/LinuxWindows PowerShell <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <pre><code>powershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre> <p>Install ComfyGit:</p> <pre><code>uv tool install comfygit\n</code></pre> <p>Start using ComfyGit:</p> <pre><code># Initialize workspace\ncg init\n\n# Create your first environment\ncg create my-project --use\n\n# Run ComfyUI\ncg run\n</code></pre> <p>Your ComfyUI opens at <code>http://localhost:8188</code> with an isolated, reproducible environment. Continue with Quickstart (5 mins) \u2192</p> <p>Tip</p> <p>See installation guide for alternative install methods or troubleshooting if you hit issues.</p> <p>Migrating from old ComfyGit (v0.x)?</p> <p>The Docker-based ComfyGit is being deprecated. This is v1.0+, a complete rewrite with a new approach. See migration guide if you were using the old version.</p>"},{"location":"#what-comfygit-does-for-you","title":"What ComfyGit does for you","text":"<ul> <li>Multiple isolated environments \u2014 Test new nodes without breaking your production setup</li> <li>Git-based version control \u2014 Commit changes, rollback when things break, collaborate via GitHub/GitLab</li> <li>One-command sharing \u2014 Export/import complete working environments with all dependencies</li> <li>Smart model management \u2014 Content-addressable index prevents duplicate storage, resolves models by hash instead of path</li> <li>Standard tooling \u2014 Built on UV and pyproject.toml, works seamlessly with Python ecosystem</li> </ul>"},{"location":"#why-use-comfygit","title":"Why use ComfyGit?","text":"<p>If you've worked with ComfyUI, you've probably hit these problems:</p> <ul> <li>Dependency hell \u2014 Installing a new custom node breaks your existing workflows</li> <li>No reproducibility \u2014 \"It worked last month\" but you can't remember what changed</li> <li>Sharing is painful \u2014 Sending someone your workflow means a wall of text about which models and nodes to install</li> <li>Environment sprawl \u2014 Testing new nodes means risking your stable setup</li> </ul> <p>ComfyGit solves these by treating your ComfyUI environments like code projects\u2014isolated, versioned, and shareable.</p> <p>Works in your terminal:</p> <pre><code># Install a custom node\ncg node add comfyui-depthflow-nodes\n\n# Commit your changes\ncg commit -m \"Added depthflow nodes\"\n\n# Share with your team\ncg export my-workflow.tar.gz\n</code></pre> <p>Or via Git remotes:</p> <pre><code># Push to GitHub\ncg remote add origin https://github.com/you/your-env.git\ncg push\n\n# Pull on another machine\ncg import https://github.com/you/your-env.git --name team-env\n</code></pre>"},{"location":"#how-it-works","title":"How it works","text":"<p>ComfyGit uses a two-tier reproducibility model:</p>"},{"location":"#local-tier-git-based-versioning","title":"Local tier: Git-based versioning","text":"<p>Each environment has a <code>.cec/</code> directory (a git repository) tracking:</p> <ul> <li><code>pyproject.toml</code> \u2014 custom nodes, model references, Python dependencies</li> <li><code>uv.lock</code> \u2014 locked Python dependency versions</li> <li><code>workflows/</code> \u2014 tracked workflow files</li> </ul> <p>When you run <code>cg commit</code>, it snapshots this state. Rollback restores any previous commit.</p>"},{"location":"#global-tier-exportimport-packages","title":"Global tier: Export/import packages","text":"<p>Export bundles everything needed to recreate the environment:</p> <ul> <li>Node metadata (registry IDs, git URLs + commits)</li> <li>Model download sources (CivitAI URLs, HuggingFace, etc)</li> <li>Python dependency lockfile</li> <li>Development node source code</li> </ul> <p>Import recreates the environment on any machine with compatible hardware.</p>"},{"location":"#under-the-hood","title":"Under the hood","text":"<ul> <li>UV for Python \u2014 Fast dependency resolution and virtual environments</li> <li>Standard pyproject.toml \u2014 Each custom node gets its own dependency group to avoid conflicts</li> <li>Content-addressable models \u2014 Models identified by hash, allowing path-independent resolution</li> <li>Registry integration \u2014 Uses ComfyUI's official registry for node lookup</li> </ul>"},{"location":"#next-steps","title":"Next steps","text":"<ul> <li> <p> Quickstart</p> <p>See ComfyGit in action with practical examples</p> </li> <li> <p> Core Concepts</p> <p>Understand workspaces, environments, and the .cec directory</p> </li> <li> <p> CLI Reference</p> <p>Master all commands and options</p> </li> <li> <p> Export &amp; Import</p> <p>Share environments with your team</p> </li> </ul>"},{"location":"#key-features","title":"Key features","text":"<ul> <li> <p> Custom Nodes</p> <p>Add nodes from registry, GitHub, or local development</p> </li> <li> <p> Model Management</p> <p>Content-addressable model index with CivitAI integration</p> </li> <li> <p>:material-workflow: Workflow Resolution</p> <p>Automatically detect and install workflow dependencies</p> </li> <li> <p> Version Control</p> <p>Commit, rollback, and collaborate via Git</p> </li> </ul>"},{"location":"#community-support","title":"Community &amp; support","text":"<ul> <li>Documentation: You're here! Browse the guides</li> <li>Issues: Report bugs on GitHub Issues</li> <li>Discussions: Ask questions on GitHub Discussions</li> </ul>"},{"location":"cli-reference/environment-commands/","title":"Environment Commands","text":"<p>Commands for managing and operating within ComfyUI environments.</p>"},{"location":"cli-reference/environment-commands/#create","title":"<code>create</code>","text":"<p>Usage:</p> <pre><code>cg create [-h] [--template TEMPLATE] [--python PYTHON]\n                 [--comfyui COMFYUI] [--torch-backend BACKEND] [--use] [-y]\n                 name\n</code></pre> <p>Arguments:</p> <ul> <li><code>name</code> - Environment name</li> </ul> <p>Options:</p> <ul> <li><code>--template</code> - Template manifest</li> <li><code>--python</code> - Python version (default: <code>3.11</code>)</li> <li><code>--comfyui</code> - ComfyUI version</li> <li><code>--torch-backend</code> - PyTorch backend. Examples: auto (detect GPU), cpu, cu128 (CUDA 12.8), cu126, cu124, rocm6.3 (AMD), xpu (Intel). Default: auto (default: <code>auto</code>)</li> <li><code>--use</code> - Set active environment after creation (default: <code>False</code>)</li> <li><code>-y, --yes</code> - Skip confirmation prompts, use defaults for workspace initialization (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#use","title":"<code>use</code>","text":"<p>Usage:</p> <pre><code>cg use [-h] name\n</code></pre> <p>Arguments:</p> <ul> <li><code>name</code> - Environment name</li> </ul>"},{"location":"cli-reference/environment-commands/#delete","title":"<code>delete</code>","text":"<p>Usage:</p> <pre><code>cg delete [-h] [-y] name\n</code></pre> <p>Arguments:</p> <ul> <li><code>name</code> - Environment name</li> </ul> <p>Options:</p> <ul> <li><code>-y, --yes</code> - Skip confirmation (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#run","title":"<code>run</code>","text":"<p>Usage:</p> <pre><code>cg run [-h] [--no-sync]\n</code></pre> <p>Options:</p> <ul> <li><code>--no-sync</code> - Skip environment sync before running (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#status","title":"<code>status</code>","text":"<p>Usage:</p> <pre><code>cg status [-h] [-v]\n</code></pre> <p>Options:</p> <ul> <li><code>-v, --verbose</code> - Show full details (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#manifest","title":"<code>manifest</code>","text":"<p>Usage:</p> <pre><code>cg manifest [-h] [--pretty] [--section SECTION]\n</code></pre> <p>Options:</p> <ul> <li><code>--pretty</code> - Output as YAML instead of TOML (default: <code>False</code>)</li> <li><code>--section</code> - Show specific section (e.g., tool.comfygit.nodes)</li> </ul>"},{"location":"cli-reference/environment-commands/#repair","title":"<code>repair</code>","text":"<p>Usage:</p> <pre><code>cg repair [-h] [-y] [--models {all,required,skip}]\n</code></pre> <p>Options:</p> <ul> <li><code>-y, --yes</code> - Skip confirmation (default: <code>False</code>)</li> <li><code>--models</code> - Model download strategy: all (default), required only, or skip (choices: <code>all</code>, <code>required</code>, <code>skip</code>) (default: <code>all</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#log","title":"<code>log</code>","text":"<p>Usage:</p> <pre><code>cg log [-h] [-v]\n</code></pre> <p>Options:</p> <ul> <li><code>-v, --verbose</code> - Show full details (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#commit","title":"<code>commit</code>","text":"<p>Usage:</p> <pre><code>cg commit [-h] [-m MESSAGE] [--auto] [--allow-issues]\n</code></pre> <p>Options:</p> <ul> <li><code>-m, --message</code> - Commit message (auto-generated if not provided)</li> <li><code>--auto</code> - Auto-resolve issues without interaction (default: <code>False</code>)</li> <li><code>--allow-issues</code> - Allow committing workflows with unresolved issues (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#rollback","title":"<code>rollback</code>","text":"<p>Usage:</p> <pre><code>cg rollback [-h] [-y] [--force] [target]\n</code></pre> <p>Arguments:</p> <ul> <li><code>target</code> - Version to rollback to (e.g., 'v1', 'v2') - leave empty to discard uncommitted changes (optional)</li> </ul> <p>Options:</p> <ul> <li><code>-y, --yes</code> - Skip confirmation (default: <code>False</code>)</li> <li><code>--force</code> - Force rollback, discarding uncommitted changes without error (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#pull","title":"<code>pull</code>","text":"<p>Usage:</p> <pre><code>cg pull [-h] [-r REMOTE] [--models {all,required,skip}] [--force]\n</code></pre> <p>Options:</p> <ul> <li><code>-r, --remote</code> - Git remote name (default: origin) (default: <code>origin</code>)</li> <li><code>--models</code> - Model download strategy (default: all) (choices: <code>all</code>, <code>required</code>, <code>skip</code>) (default: <code>all</code>)</li> <li><code>--force</code> - Discard uncommitted changes and force pull (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#push","title":"<code>push</code>","text":"<p>Usage:</p> <pre><code>cg push [-h] [-r REMOTE] [--force]\n</code></pre> <p>Options:</p> <ul> <li><code>-r, --remote</code> - Git remote name (default: origin) (default: <code>origin</code>)</li> <li><code>--force</code> - Force push using --force-with-lease (overwrite remote) (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#remote","title":"<code>remote</code>","text":"<p>Usage:</p> <pre><code>cg remote [-h] {add,remove,list} ...\n</code></pre>"},{"location":"cli-reference/environment-commands/#subcommands","title":"Subcommands","text":""},{"location":"cli-reference/environment-commands/#add","title":"<code>add</code>","text":"<p>Usage:</p> <pre><code>cg remote add [-h] name url\n</code></pre> <p>Arguments:</p> <ul> <li><code>name</code> - Remote name (e.g., origin)</li> <li><code>url</code> - Remote URL</li> </ul>"},{"location":"cli-reference/environment-commands/#remove","title":"<code>remove</code>","text":"<p>Usage:</p> <pre><code>cg remote remove [-h] name\n</code></pre> <p>Arguments:</p> <ul> <li><code>name</code> - Remote name to remove</li> </ul>"},{"location":"cli-reference/environment-commands/#list","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg remote list [-h]\n</code></pre>"},{"location":"cli-reference/environment-commands/#py","title":"<code>py</code>","text":"<p>Usage:</p> <pre><code>cg py [-h] {add,remove,remove-group,list,uv} ...\n</code></pre>"},{"location":"cli-reference/environment-commands/#subcommands_1","title":"Subcommands","text":""},{"location":"cli-reference/environment-commands/#add_1","title":"<code>add</code>","text":"<p>Usage:</p> <pre><code>cg py add [-h] [-r REQUIREMENTS] [--upgrade] [--group GROUP] [--dev]\n                 [--editable] [--bounds {lower,major,minor,exact}]\n                 [packages ...]\n</code></pre> <p>Arguments:</p> <ul> <li><code>packages</code> - Package specifications (e.g., requests&gt;=2.0.0) (multiple values allowed)</li> </ul> <p>Options:</p> <ul> <li><code>-r, --requirements</code> - Add packages from requirements.txt file</li> <li><code>--upgrade</code> - Upgrade existing packages (default: <code>False</code>)</li> <li><code>--group</code> - Add to dependency group (e.g., optional-cuda)</li> <li><code>--dev</code> - Add to dev dependencies (default: <code>False</code>)</li> <li><code>--editable</code> - Install as editable (for local development) (default: <code>False</code>)</li> <li><code>--bounds</code> - Version specifier style (choices: <code>lower</code>, <code>major</code>, <code>minor</code>, <code>exact</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#remove_1","title":"<code>remove</code>","text":"<p>Usage:</p> <pre><code>cg py remove [-h] [--group GROUP] packages [packages ...]\n</code></pre> <p>Arguments:</p> <ul> <li><code>packages</code> - Package names to remove (multiple values allowed)</li> </ul> <p>Options:</p> <ul> <li><code>--group</code> - Remove packages from dependency group instead of main dependencies</li> </ul>"},{"location":"cli-reference/environment-commands/#remove-group","title":"<code>remove-group</code>","text":"<p>Usage:</p> <pre><code>cg py remove-group [-h] group\n</code></pre> <p>Arguments:</p> <ul> <li><code>group</code> - Dependency group name to remove</li> </ul>"},{"location":"cli-reference/environment-commands/#list_1","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg py list [-h] [--all]\n</code></pre> <p>Options:</p> <ul> <li><code>--all</code> - Show all dependencies including dependency groups (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/environment-commands/#uv","title":"<code>uv</code>","text":"<p>Usage:</p> <pre><code>cg py uv ...\n</code></pre> <p>Arguments:</p> <ul> <li><code>uv_args</code> - UV command and arguments (e.g., 'add --group optional-cuda sageattention')</li> </ul>"},{"location":"cli-reference/environment-commands/#constraint","title":"<code>constraint</code>","text":"<p>Usage:</p> <pre><code>cg constraint [-h] {add,list,remove} ...\n</code></pre>"},{"location":"cli-reference/environment-commands/#subcommands_2","title":"Subcommands","text":""},{"location":"cli-reference/environment-commands/#add_2","title":"<code>add</code>","text":"<p>Usage:</p> <pre><code>cg constraint add [-h] packages [packages ...]\n</code></pre> <p>Arguments:</p> <ul> <li><code>packages</code> - Package specifications (e.g., torch==2.4.1) (multiple values allowed)</li> </ul>"},{"location":"cli-reference/environment-commands/#list_2","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg constraint list [-h]\n</code></pre>"},{"location":"cli-reference/environment-commands/#remove_2","title":"<code>remove</code>","text":"<p>Usage:</p> <pre><code>cg constraint remove [-h] packages [packages ...]\n</code></pre> <p>Arguments:</p> <ul> <li><code>packages</code> - Package names to remove (multiple values allowed)</li> </ul>"},{"location":"cli-reference/global-commands/","title":"Global Commands","text":"<p>Workspace-level commands that operate on the entire ComfyDock workspace.</p>"},{"location":"cli-reference/global-commands/#init","title":"<code>init</code>","text":"<p>Usage:</p> <pre><code>cg init [-h] [--models-dir MODELS_DIR] [--yes] [path]\n</code></pre> <p>Arguments:</p> <ul> <li><code>path</code> - Workspace directory (default: ~/comfygit) (optional)</li> </ul> <p>Options:</p> <ul> <li><code>--models-dir</code> - Path to existing models directory to index</li> <li><code>--yes, -y</code> - Use all defaults, no interactive prompts (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/global-commands/#list","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg list [-h]\n</code></pre>"},{"location":"cli-reference/global-commands/#import","title":"<code>import</code>","text":"<p>Usage:</p> <pre><code>cg import [-h] [--name NAME] [--branch BRANCH]\n                 [--torch-backend BACKEND] [--use] [-y]\n                 [path]\n</code></pre> <p>Arguments:</p> <ul> <li><code>path</code> - Path to .tar.gz file or git repository URL (use #subdirectory for subdirectory imports) (optional)</li> </ul> <p>Options:</p> <ul> <li><code>--name</code> - Name for imported environment (skip prompt)</li> <li><code>--branch, -b</code> - Git branch, tag, or commit to import (git imports only)</li> <li><code>--torch-backend</code> - PyTorch backend. Examples: auto (detect GPU), cpu, cu128 (CUDA 12.8), cu126, cu124, rocm6.3 (AMD), xpu (Intel). Default: auto (default: <code>auto</code>)</li> <li><code>--use</code> - Set imported environment as active (default: <code>False</code>)</li> <li><code>-y, --yes</code> - Skip confirmation prompts, use defaults for workspace initialization (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/global-commands/#export","title":"<code>export</code>","text":"<p>Usage:</p> <pre><code>cg export [-h] [--allow-issues] [path]\n</code></pre> <p>Arguments:</p> <ul> <li><code>path</code> - Path to output file (optional)</li> </ul> <p>Options:</p> <ul> <li><code>--allow-issues</code> - Skip confirmation if models are missing source URLs (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/global-commands/#model","title":"<code>model</code>","text":"<p>Usage:</p> <pre><code>cg model [-h] {index,download,add-source} ...\n</code></pre>"},{"location":"cli-reference/global-commands/#subcommands","title":"Subcommands","text":""},{"location":"cli-reference/global-commands/#index","title":"<code>index</code>","text":"<p>Usage:</p> <pre><code>cg model index [-h] {find,list,show,status,sync,dir} ...\n</code></pre>"},{"location":"cli-reference/global-commands/#subcommands_1","title":"Subcommands","text":""},{"location":"cli-reference/global-commands/#find","title":"<code>find</code>","text":"<p>Usage:</p> <pre><code>cg model index find [-h] query\n</code></pre> <p>Arguments:</p> <ul> <li><code>query</code> - Search query (hash prefix or filename)</li> </ul>"},{"location":"cli-reference/global-commands/#list_1","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg model index list [-h] [--duplicates]\n</code></pre> <p>Options:</p> <ul> <li><code>--duplicates</code> - Show only models with multiple locations (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/global-commands/#show","title":"<code>show</code>","text":"<p>Usage:</p> <pre><code>cg model index show [-h] identifier\n</code></pre> <p>Arguments:</p> <ul> <li><code>identifier</code> - Model hash, hash prefix, filename, or path</li> </ul>"},{"location":"cli-reference/global-commands/#status","title":"<code>status</code>","text":"<p>Usage:</p> <pre><code>cg model index status [-h]\n</code></pre>"},{"location":"cli-reference/global-commands/#sync","title":"<code>sync</code>","text":"<p>Usage:</p> <pre><code>cg model index sync [-h]\n</code></pre>"},{"location":"cli-reference/global-commands/#dir","title":"<code>dir</code>","text":"<p>Usage:</p> <pre><code>cg model index dir [-h] path\n</code></pre> <p>Arguments:</p> <ul> <li><code>path</code> - Path to models directory</li> </ul>"},{"location":"cli-reference/global-commands/#download","title":"<code>download</code>","text":"<p>Usage:</p> <pre><code>cg model download [-h] [--path PATH] [-c CATEGORY] [-y] url\n</code></pre> <p>Arguments:</p> <ul> <li><code>url</code> - Model download URL (Civitai, HuggingFace, or direct)</li> </ul> <p>Options:</p> <ul> <li><code>--path</code> - Target path relative to models directory (e.g., checkpoints/model.safetensors)</li> <li><code>-c, --category</code> - Model category for auto-path (e.g., checkpoints, loras, vae)</li> <li><code>-y, --yes</code> - Skip path confirmation prompt (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/global-commands/#add-source","title":"<code>add-source</code>","text":"<p>Usage:</p> <pre><code>cg model add-source [-h] [model] [url]\n</code></pre> <p>Arguments:</p> <ul> <li><code>model</code> - Model filename or hash (omit for interactive mode) (optional)</li> <li><code>url</code> - Download URL (optional)</li> </ul>"},{"location":"cli-reference/global-commands/#registry","title":"<code>registry</code>","text":"<p>Usage:</p> <pre><code>cg registry [-h] {status,update} ...\n</code></pre>"},{"location":"cli-reference/global-commands/#subcommands_2","title":"Subcommands","text":""},{"location":"cli-reference/global-commands/#status_1","title":"<code>status</code>","text":"<p>Usage:</p> <pre><code>cg registry status [-h]\n</code></pre>"},{"location":"cli-reference/global-commands/#update","title":"<code>update</code>","text":"<p>Usage:</p> <pre><code>cg registry update [-h]\n</code></pre>"},{"location":"cli-reference/global-commands/#config","title":"<code>config</code>","text":"<p>Usage:</p> <pre><code>cg config [-h] [--civitai-key CIVITAI_KEY] [--show]\n</code></pre> <p>Options:</p> <ul> <li><code>--civitai-key</code> - Set Civitai API key (use empty string to clear)</li> <li><code>--show</code> - Show current configuration (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/global-commands/#debug","title":"<code>debug</code>","text":"<p>Usage:</p> <pre><code>cg debug [-h] [-n LINES] [--level {DEBUG,INFO,WARNING,ERROR}] [--full]\n                [--workspace]\n</code></pre> <p>Options:</p> <ul> <li><code>-n, --lines</code> - Number of lines to show (default: 200) (default: <code>200</code>)</li> <li><code>--level</code> - Filter by log level (choices: <code>DEBUG</code>, <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>)</li> <li><code>--full</code> - Show all logs (no line limit) (default: <code>False</code>)</li> <li><code>--workspace</code> - Show workspace logs instead of environment logs (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/node-commands/","title":"Node Commands","text":"<p>Commands for managing custom nodes within an environment.</p>"},{"location":"cli-reference/node-commands/#node","title":"<code>node</code>","text":"<p>Usage:</p> <pre><code>cg node [-h] {add,remove,prune,list,update} ...\n</code></pre>"},{"location":"cli-reference/node-commands/#subcommands","title":"Subcommands","text":""},{"location":"cli-reference/node-commands/#add","title":"<code>add</code>","text":"<p>Usage:</p> <pre><code>cg node add [-h] [--dev] [--no-test] [--force] [--verbose]\n                   node_names [node_names ...]\n</code></pre> <p>Arguments:</p> <ul> <li><code>node_names</code> - Node identifier(s): registry-id[@version], github-url[@ref], or directory name (multiple values allowed)</li> </ul> <p>Options:</p> <ul> <li><code>--dev</code> - Track existing local development node (default: <code>False</code>)</li> <li><code>--no-test</code> - Don't test resolution (default: <code>False</code>)</li> <li><code>--force</code> - Force overwrite existing directory (default: <code>False</code>)</li> <li><code>--verbose, -v</code> - Show full UV error output for dependency conflicts (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/node-commands/#remove","title":"<code>remove</code>","text":"<p>Usage:</p> <pre><code>cg node remove [-h] [--dev] node_names [node_names ...]\n</code></pre> <p>Arguments:</p> <ul> <li><code>node_names</code> - Node registry ID(s) or name(s) (multiple values allowed)</li> </ul> <p>Options:</p> <ul> <li><code>--dev</code> - Remove development node specifically (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/node-commands/#prune","title":"<code>prune</code>","text":"<p>Usage:</p> <pre><code>cg node prune [-h] [--exclude PACKAGE [PACKAGE ...]] [-y]\n</code></pre> <p>Options:</p> <ul> <li><code>--exclude</code> - Package IDs to keep even if unused</li> <li><code>-y, --yes</code> - Skip confirmation prompt (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/node-commands/#list","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg node list [-h]\n</code></pre>"},{"location":"cli-reference/node-commands/#update","title":"<code>update</code>","text":"<p>Usage:</p> <pre><code>cg node update [-h] [-y] [--no-test] node_name\n</code></pre> <p>Arguments:</p> <ul> <li><code>node_name</code> - Node identifier or name to update</li> </ul> <p>Options:</p> <ul> <li><code>-y, --yes</code> - Auto-confirm updates (skip prompts) (default: <code>False</code>)</li> <li><code>--no-test</code> - Don't test resolution (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/shell-completion/","title":"Shell Completion","text":"<p>Enable tab completion for ComfyGit CLI commands in your shell.</p>"},{"location":"cli-reference/shell-completion/#overview","title":"Overview","text":"<p>ComfyGit supports tab completion for bash, zsh, and fish shells. Tab completion helps you:</p> <ul> <li>Autocomplete command names</li> <li>Autocomplete environment names</li> <li>Autocomplete node names</li> <li>Autocomplete workflow names</li> </ul>"},{"location":"cli-reference/shell-completion/#installation","title":"Installation","text":"<p>Install tab completion for your current shell:</p> <pre><code>cg completion install\n</code></pre> <p>This will detect your shell automatically and install the appropriate completion script.</p>"},{"location":"cli-reference/shell-completion/#check-status","title":"Check Status","text":"<p>Check if tab completion is installed:</p> <pre><code>cg completion status\n</code></pre>"},{"location":"cli-reference/shell-completion/#uninstall","title":"Uninstall","text":"<p>Remove tab completion:</p> <pre><code>cg completion uninstall\n</code></pre>"},{"location":"cli-reference/shell-completion/#supported-shells","title":"Supported Shells","text":"<ul> <li>Bash - Requires bash-completion package</li> <li>Zsh - Works with default zsh completion system</li> <li>Fish - Works with fish's built-in completion</li> </ul>"},{"location":"cli-reference/shell-completion/#manual-setup","title":"Manual Setup","text":"<p>If automatic installation doesn't work, you can set up completion manually:</p>"},{"location":"cli-reference/shell-completion/#bash","title":"Bash","text":"<p>Add to <code>~/.bashrc</code>:</p> <pre><code>eval \"$(register-python-argcomplete cg)\"\n</code></pre>"},{"location":"cli-reference/shell-completion/#zsh","title":"Zsh","text":"<p>Add to <code>~/.zshrc</code>:</p> <pre><code>eval \"$(register-python-argcomplete cg)\"\n</code></pre>"},{"location":"cli-reference/shell-completion/#fish","title":"Fish","text":"<p>Run:</p> <pre><code>register-python-argcomplete --shell fish cg &gt; ~/.config/fish/completions/cg.fish\n</code></pre>"},{"location":"cli-reference/shell-completion/#troubleshooting","title":"Troubleshooting","text":"<p>If tab completion isn't working:</p> <ol> <li>Restart your shell or run <code>source ~/.bashrc</code> (or equivalent)</li> <li>Verify argcomplete is installed: <code>pip show argcomplete</code></li> <li>Check completion status: <code>cg completion status</code></li> <li>Try manual setup if automatic installation fails</li> </ol>"},{"location":"cli-reference/workflow-commands/","title":"Workflow Commands","text":"<p>Commands for managing and resolving workflow dependencies.</p>"},{"location":"cli-reference/workflow-commands/#workflow","title":"<code>workflow</code>","text":"<p>Usage:</p> <pre><code>cg workflow [-h] {list,resolve,model} ...\n</code></pre>"},{"location":"cli-reference/workflow-commands/#subcommands","title":"Subcommands","text":""},{"location":"cli-reference/workflow-commands/#list","title":"<code>list</code>","text":"<p>Usage:</p> <pre><code>cg workflow list [-h]\n</code></pre>"},{"location":"cli-reference/workflow-commands/#resolve","title":"<code>resolve</code>","text":"<p>Usage:</p> <pre><code>cg workflow resolve [-h] [--auto] [--install] [--no-install] name\n</code></pre> <p>Arguments:</p> <ul> <li><code>name</code> - Workflow name to resolve</li> </ul> <p>Options:</p> <ul> <li><code>--auto</code> - Auto-resolve without interaction (default: <code>False</code>)</li> <li><code>--install</code> - Auto-install missing nodes without prompting (default: <code>False</code>)</li> <li><code>--no-install</code> - Skip node installation prompt (default: <code>False</code>)</li> </ul>"},{"location":"cli-reference/workflow-commands/#model","title":"<code>model</code>","text":"<p>Usage:</p> <pre><code>cg workflow model [-h] {importance} ...\n</code></pre>"},{"location":"cli-reference/workflow-commands/#subcommands_1","title":"Subcommands","text":""},{"location":"cli-reference/workflow-commands/#importance","title":"<code>importance</code>","text":"<p>Usage:</p> <pre><code>cg workflow model importance [-h]\n                                    [workflow_name] [model_identifier]\n                                    [{required,flexible,optional}]\n</code></pre> <p>Arguments:</p> <ul> <li><code>workflow_name</code> - Workflow name (interactive if omitted) (optional)</li> <li><code>model_identifier</code> - Model filename or hash (interactive if omitted) (optional)</li> <li><code>importance</code> - Importance level (optional)</li> </ul>"},{"location":"getting-started/concepts/","title":"Core Concepts","text":"<p>Understand the fundamental concepts behind ComfyGit: workspaces, environments, and how reproducibility works.</p>"},{"location":"getting-started/concepts/#overview","title":"Overview","text":"<p>ComfyGit organizes your ComfyUI installations into a simple hierarchy:</p> <pre><code>Workspace (~/comfygit)\n\u251c\u2500\u2500 Environment 1 (production)\n\u251c\u2500\u2500 Environment 2 (testing)\n\u2514\u2500\u2500 Environment 3 (experiments)\n</code></pre> <p>Each level serves a specific purpose and has its own responsibilities.</p>"},{"location":"getting-started/concepts/#workspace","title":"Workspace","text":"<p>A workspace is the top-level container for all your ComfyGit environments and shared resources.</p>"},{"location":"getting-started/concepts/#what-it-contains","title":"What it contains","text":"<pre><code>~/comfygit/                      # Workspace root\n\u251c\u2500\u2500 environments/                 # All your environments\n\u2502   \u251c\u2500\u2500 production/\n\u2502   \u251c\u2500\u2500 testing/\n\u2502   \u2514\u2500\u2500 experiments/\n\u251c\u2500\u2500 models/                       # Shared models directory\n\u251c\u2500\u2500 comfygit_cache/              # Registry cache, model index\n\u251c\u2500\u2500 logs/                         # Application logs\n\u2514\u2500\u2500 .metadata/                    # Workspace configuration\n    \u2514\u2500\u2500 workspace.json            # Settings (active env, models dir)\n</code></pre>"},{"location":"getting-started/concepts/#key-features","title":"Key features","text":"<ul> <li>One per machine \u2014 You typically have one workspace per computer</li> <li>Shared model index \u2014 All environments share the same model database</li> <li>Global configuration \u2014 Settings like CivitAI API key are workspace-wide</li> </ul>"},{"location":"getting-started/concepts/#creating-a-workspace","title":"Creating a workspace","text":"<pre><code># Create in default location (~/comfygit)\ncg init\n\n# Custom location\ncg init /path/to/workspace\n</code></pre> <p>The <code>COMFYGIT_HOME</code> environment variable determines the workspace location. If not set, defaults to <code>~/comfygit</code>.</p>"},{"location":"getting-started/concepts/#environment","title":"Environment","text":"<p>An environment is an isolated ComfyUI installation with its own dependencies, custom nodes, and configuration.</p>"},{"location":"getting-started/concepts/#what-it-contains_1","title":"What it contains","text":"<pre><code>~/comfygit/environments/my-project/\n\u251c\u2500\u2500 .cec/                         # Configuration and version control\n\u2502   \u251c\u2500\u2500 pyproject.toml            # Dependencies, nodes, models\n\u2502   \u251c\u2500\u2500 uv.lock                   # Locked dependency versions\n\u2502   \u251c\u2500\u2500 workflows/                # Tracked workflows\n\u2502   \u2514\u2500\u2500 .git/                     # Git repository\n\u251c\u2500\u2500 .venv/                        # Python virtual environment\n\u2514\u2500\u2500 ComfyUI/                      # ComfyUI installation\n    \u251c\u2500\u2500 custom_nodes/             # Custom nodes\n    \u251c\u2500\u2500 models/                   # Symlinks to workspace models\n    \u2514\u2500\u2500 user/default/workflows/   # Workflow files\n</code></pre>"},{"location":"getting-started/concepts/#key-features_1","title":"Key features","text":"<ul> <li>Isolated dependencies \u2014 Each environment has its own Python packages</li> <li>Version controlled \u2014 State tracked in git for commits/rollbacks</li> <li>Shareable \u2014 Export as tarball or push to Git remote</li> </ul>"},{"location":"getting-started/concepts/#creating-an-environment","title":"Creating an environment","text":"<pre><code># Basic creation\ncg create my-env\n\n# With Python version\ncg create my-env --python 3.11\n\n# With ComfyUI version\ncg create my-env --comfyui v0.2.2\n\n# With specific PyTorch backend\ncg create my-env --torch-backend cu128\n\n# Create and set as active\ncg create my-env --use\n</code></pre>"},{"location":"getting-started/concepts/#the-cec-directory","title":"The .cec directory","text":"<p>The <code>.cec/</code> (ComfyUI Environment Configuration) directory is the heart of each environment. It's a git repository that tracks everything needed to reproduce your environment.</p>"},{"location":"getting-started/concepts/#structure","title":"Structure","text":"<pre><code>.cec/\n\u251c\u2500\u2500 pyproject.toml                # Dependencies manifest\n\u251c\u2500\u2500 uv.lock                       # Locked versions\n\u251c\u2500\u2500 workflows/                    # Tracked workflows\n\u251c\u2500\u2500 .gitignore                    # Git ignore rules\n\u2514\u2500\u2500 .git/                         # Git history\n</code></pre>"},{"location":"getting-started/concepts/#pyprojecttoml","title":"pyproject.toml","text":"<p>The main configuration file with several key sections:</p> <p>Project dependencies (ComfyUI core):</p> <pre><code>[project]\nname = \"comfygit-env-my-project\"\nversion = \"0.1.0\"\nrequires-python = \"&gt;=3.12\"\ndependencies = [\n    \"torch\",\n    \"torchvision\",\n    \"pillow\",\n    \"numpy&gt;=1.25.0\",\n    # ... ComfyUI's core dependencies\n]\n</code></pre> <p>ComfyGit metadata:</p> <pre><code>[tool.comfygit]\ncomfyui_version = \"v0.3.68\"\npython_version = \"3.12\"\n</code></pre> <p>Node registry (installed nodes):</p> <pre><code>[tool.comfygit.nodes.comfyui-impact-pack]\nname = \"ComfyUI-Impact-Pack\"\nregistry_id = \"comfyui-impact-pack\"\nrepository = \"https://github.com/ltdrdata/ComfyUI-Impact-Pack\"\nversion = \"5.5.0\"\ndownload_url = \"https://cdn.comfy.org/ltdrdata/comfyui-impact-pack/5.5.0/node.zip\"\nsource = \"registry\"\n</code></pre> <p>Node dependencies (per-node packages):</p> <pre><code>[dependency-groups]\ncomfyui-impact-pack-a1b2c3d4 = [\n    \"ultralytics&gt;=8.0.0\",\n    \"onnxruntime&gt;=1.15.0\",\n]\n</code></pre> <p>Model hash registry:</p> <pre><code>[tool.comfygit.models]\n0b222b1d568748dc = {\n    filename = \"clip_vision_h.safetensors\",\n    size = 1264219396,\n    relative_path = \"clip_vision/clip_vision_h.safetensors\",\n    category = \"clip_vision\"\n}\n</code></pre> <p>Workflow tracking:</p> <pre><code>[tool.comfygit.workflows.my-workflow]\nnodes = [\"comfyui-impact-pack\", \"comfyui-ipadapter\"]\npath = \"workflows/my-workflow.json\"\n\n[[tool.comfygit.workflows.my-workflow.models]]\nfilename = \"clip_vision_h.safetensors\"\ncategory = \"clip_vision\"\ncriticality = \"required\"\nstatus = \"resolved\"\nhash = \"0b222b1d568748dc\"\nnodes = [{node_id = \"5\", node_type = \"CLIPVisionLoader\"}]\n</code></pre> <p>PyTorch backend configuration:</p> <pre><code>[tool.uv]\nconstraint-dependencies = [\"torch==2.9.1+cu129\"]\n\n[[tool.uv.index]]\nname = \"pytorch-cu129\"\nurl = \"https://download.pytorch.org/whl/cu129\"\nexplicit = true\n\n[tool.uv.sources.torch]\nindex = \"pytorch-cu129\"\n</code></pre>"},{"location":"getting-started/concepts/#how-it-works-together","title":"How it works together","text":"<p>Each section serves a specific purpose:</p> <ul> <li><code>[project]</code> \u2014 Core ComfyUI dependencies (torch, pillow, numpy, etc.)</li> <li><code>[tool.comfygit]</code> \u2014 Environment metadata (ComfyUI version, Python version)</li> <li><code>[tool.comfygit.nodes.*]</code> \u2014 Registry of installed nodes with versions and sources</li> <li><code>[dependency-groups]</code> \u2014 Per-node Python dependencies (PEP 735)</li> <li><code>[tool.comfygit.workflows.*]</code> \u2014 Workflow dependencies and model requirements</li> <li><code>[tool.comfygit.models]</code> \u2014 Content-addressable model index (hash \u2192 metadata)</li> <li><code>[tool.uv]</code> \u2014 PyTorch backend constraints and custom indexes</li> </ul>"},{"location":"getting-started/concepts/#why-cec","title":"Why .cec?","text":"<ul> <li>Standard format \u2014 Uses pyproject.toml, the Python standard</li> <li>Human readable \u2014 Edit manually if needed</li> <li>Git-friendly \u2014 Track changes over time</li> <li>Lockfile included \u2014 uv.lock ensures exact reproducibility</li> <li>Content-addressable \u2014 Models tracked by hash, not path</li> </ul>"},{"location":"getting-started/concepts/#reproducibility-model","title":"Reproducibility model","text":"<p>ComfyGit uses a two-tier approach to reproducibility:</p>"},{"location":"getting-started/concepts/#tier-1-local-versioning-git-commits","title":"Tier 1: Local versioning (Git commits)","text":"<p>What it tracks:</p> <ul> <li>Custom nodes (URLs, commits, versions)</li> <li>Python dependencies (via pyproject.toml + uv.lock)</li> <li>Model references (hashes, paths)</li> <li>Workflow files</li> </ul> <p>Commands:</p> <pre><code># Save current state\ncg commit -m \"Added IPAdapter nodes\"\n\n# View history\ncg log\n\n# Restore previous version\ncg rollback v1\n</code></pre> <p>When to use:</p> <ul> <li>During development and experimentation</li> <li>Creating savepoints before risky changes</li> <li>Team collaboration via Git remotes</li> </ul>"},{"location":"getting-started/concepts/#tier-2-exportimport-packages","title":"Tier 2: Export/import packages","text":"<p>What it includes:</p> <ul> <li>Node metadata (registry IDs, git URLs + commits)</li> <li>Model download sources (CivitAI URLs, HuggingFace)</li> <li>Python dependency lockfile (uv.lock)</li> <li>Development node source code</li> <li>Tracked workflow files</li> </ul> <p>Commands:</p> <pre><code># Export environment\ncg export my-workflow.tar.gz\n\n# Import on another machine\ncg import my-workflow.tar.gz --name imported-env\n</code></pre> <p>When to use:</p> <ul> <li>Sharing complete environments with others</li> <li>Moving between machines</li> <li>Long-term archival</li> <li>Distributing workflows to users</li> </ul>"},{"location":"getting-started/concepts/#how-they-work-together","title":"How they work together","text":"<pre><code>graph TB\n    subgraph machine[\"Your Machine\"]\n        env[\"Environment&lt;br/&gt;\u2022 Custom nodes&lt;br/&gt;\u2022 Models&lt;br/&gt;\u2022 Workflows\"]\n\n        env --&gt;|commit| git[\".cec/.git/&lt;br/&gt;(commits)\"]\n        env --&gt;|export| tar[\".tar.gz package&lt;br/&gt;(complete env)\"]\n\n        git --&gt;|push/pull| remote[\"Git Remote&lt;br/&gt;(GitHub)\"]\n    end\n\n    tar -.-&gt;|share| share[\"Share with others\"]\n\n    style env fill:#1e40af,stroke:#3b82f6,stroke-width:2px,color:#fff\n    style git fill:#059669,stroke:#10b981,stroke-width:2px,color:#fff\n    style tar fill:#7c3aed,stroke:#a78bfa,stroke-width:2px,color:#fff\n    style remote fill:#dc2626,stroke:#ef4444,stroke-width:2px,color:#fff\n    style share fill:#6b7280,stroke:#9ca3af,stroke-width:2px,color:#fff</code></pre>"},{"location":"getting-started/concepts/#model-management","title":"Model management","text":"<p>ComfyGit uses a content-addressable model index to solve path-dependency issues.</p>"},{"location":"getting-started/concepts/#the-problem","title":"The problem","text":"<p>ComfyUI workflows reference models by path:</p> <pre><code>{\n  \"ckpt_name\": \"checkpoints/sd15.safetensors\"\n}\n</code></pre> <p>But different users have different folder structures:</p> <ul> <li><code>~/models/checkpoints/sd15.safetensors</code></li> <li><code>D:\\AI\\Models\\sd15.safetensors</code></li> <li><code>/mnt/storage/comfyui/checkpoints/sd15.safetensors</code></li> </ul>"},{"location":"getting-started/concepts/#comfygits-solution","title":"ComfyGit's solution","text":"<p>Models are indexed by hash (custom type), not path:</p> <ol> <li>Scan your models directory</li> <li>Compute quick hash for each model</li> <li>Store in workspace-wide database</li> <li>Track models in pyproject.toml by hash</li> <li>Link workflows to models via hash references</li> <li>ComfyGit resolves hash \u2192 actual file path</li> </ol> <p>In pyproject.toml:</p> <pre><code># Global model registry (hash \u2192 metadata)\n[tool.comfygit.models]\n0b222b1d568748dc = {\n    filename = \"clip_vision_h.safetensors\",\n    size = 1264219396,\n    relative_path = \"clip_vision/clip_vision_h.safetensors\",\n    category = \"clip_vision\"\n}\n\n# Workflow-specific model requirements\n[[tool.comfygit.workflows.my-workflow.models]]\nfilename = \"clip_vision_h.safetensors\"\ncategory = \"clip_vision\"\ncriticality = \"required\"  # or \"flexible\" or \"optional\"\nstatus = \"resolved\"       # or \"unresolved\" or \"download_intent\"\nhash = \"0b222b1d568748dc\"  # Links to registry above\nnodes = [{node_id = \"5\", node_type = \"CLIPVisionLoader\"}]\n</code></pre> <p>The criticality field indicates:</p> <ul> <li>required \u2014 Workflow won't work without it</li> <li>flexible \u2014 Can substitute with similar models</li> <li>optional \u2014 Nice to have but not critical</li> </ul> <p>The status field tracks:</p> <ul> <li>resolved \u2014 Model found in workspace</li> <li>unresolved \u2014 Model not found, needs download</li> <li>download_intent \u2014 Queued for download</li> </ul>"},{"location":"getting-started/concepts/#how-it-works","title":"How it works","text":"<p>Indexing models:</p> <pre><code># Point to your existing models\ncg model index dir /path/to/models\n\n# Manually scan and index\ncg model index sync\n</code></pre> <p>Auto index syncing</p> <p>The model index automatically syncs before environment  commands to ensure fresh model data. This happens transparently in the background and is optimized using modification time  checks, so it's fast when models haven't changed. Manual  syncing with 'cg model index sync' is only needed if you want  to force a full rescan.</p> <p>Workflow resolution:</p> <pre><code># Resolve workflow dependencies\ncg workflow resolve my-workflow.json\n</code></pre> <p>ComfyGit will:</p> <ol> <li>Extract model references from workflow JSON</li> <li>Compute hashes and look up in global index</li> <li>Store model requirements in <code>[tool.comfygit.workflows.*]</code></li> <li>Track which nodes use each model</li> <li>Symlink from <code>workspace/models/</code> (or custom defined models directory) to <code>environment/ComfyUI/models/</code></li> <li>Download missing models from known sources</li> </ol> <p>Workflow tracking benefits:</p> <p>When you commit a workflow, ComfyGit records:</p> <ul> <li>Which custom nodes are required</li> <li>Which models are used (by hash, not path)</li> <li>Model criticality levels for portability</li> <li>Exact node usage (node ID, type, widget position)</li> <li>Resolution status</li> </ul> <p>This makes workflows truly portable \u2014 anyone importing your environment gets complete dependency information.</p>"},{"location":"getting-started/concepts/#benefits","title":"Benefits","text":"<ul> <li>Path-independent \u2014 Works regardless of folder structure</li> <li>Deduplication \u2014 Same model used by multiple environments</li> <li>Source tracking \u2014 Remember where models came from (CivitAI, HuggingFace)</li> <li>Fast lookups \u2014 SQLite database for quick queries</li> <li>Criticality levels \u2014 Know which models are essential vs optional</li> <li>Node tracking \u2014 See exactly where each model is used in workflows</li> </ul>"},{"location":"getting-started/concepts/#model-importance","title":"Model importance","text":"<p>Mark models in workflows as required/flexible/optional:</p> <pre><code># Run interactively\ncg workflow model importance\n\n# Required - workflow won't work without it\ncg workflow model importance my-workflow checkpoint.safetensors required\n\n# Flexible - can substitute with similar models\ncg workflow model importance my-workflow style-lora.safetensors flexible\n\n# Optional - nice to have but not critical\ncg workflow model importance my-workflow detail-lora.safetensors optional\n</code></pre> <p>This helps when sharing workflows or importing on different machines. See Workflow Model Importance for details.</p>"},{"location":"getting-started/concepts/#node-resolution","title":"Node resolution","text":"<p>ComfyGit resolves custom nodes through multiple sources:</p>"},{"location":"getting-started/concepts/#1-comfyui-registry","title":"1. ComfyUI Registry","text":"<p>The official registry of custom nodes:</p> <pre><code># Add by registry ID\ncg node add comfyui-depthflow-nodes\n</code></pre> <p>ComfyGit queries the registry for:</p> <ul> <li>Git repository URL</li> <li>Latest version/commit</li> <li>Python dependencies</li> </ul>"},{"location":"getting-started/concepts/#2-github-urls","title":"2. GitHub URLs","text":"<p>Direct from GitHub:</p> <pre><code># Latest commit\ncg node add https://github.com/akatz-ai/ComfyUI-AKatz-Nodes\n\n# Specific version\ncg node add https://github.com/akatz-ai/ComfyUI-AKatz-Nodes@v1.0.0\n\n# Specific commit\ncg node add https://github.com/akatz-ai/ComfyUI-AKatz-Nodes@abc123\n</code></pre>"},{"location":"getting-started/concepts/#3-development-nodes","title":"3. Development nodes","text":"<p>Local nodes you're developing:</p> <pre><code># Track local node\ncg node add /path/to/my-node --dev\n</code></pre> <p>This creates a symbolic link and tracks the path in pyproject.toml.</p>"},{"location":"getting-started/concepts/#4-workflow-based-resolution","title":"4. Workflow-based resolution","text":"<p>When resolving workflows, ComfyGit:</p> <ol> <li>Extracts node class names from workflow JSON</li> <li>Looks up in cached registry mappings</li> <li>Prompts for installation if not found</li> <li>Uses embeddings + scoring for fuzzy matching</li> </ol>"},{"location":"getting-started/concepts/#dependency-isolation","title":"Dependency isolation","text":"<p>Each custom node gets its own dependency group in pyproject.toml:</p> <pre><code>[dependency-groups]\ncomfyui-depthflow-nodes-a1b2c3d4 = [\n    \"opencv-python&gt;=4.0.0\",\n    \"numpy&gt;=1.24.0\"\n]\n\ncomfyui-impact-pack-e5f6g7h8 = [\n    \"ultralytics&gt;=8.0.0\",\n    \"onnxruntime&gt;=1.15.0\"\n]\n</code></pre> <p>ComfyGit uses PEP 735 dependency groups (not optional-dependencies) for better isolation. Each group has a unique hash suffix to prevent naming conflicts.</p>"},{"location":"getting-started/concepts/#benefits_1","title":"Benefits","text":"<ul> <li>Conflict detection \u2014 UV reports if nodes have incompatible deps</li> <li>Selective installation \u2014 Install only what you need</li> <li>Clean removal \u2014 Remove node and its unique dependencies</li> <li>Hash-based naming \u2014 Prevents collisions between similarly-named nodes</li> </ul>"},{"location":"getting-started/concepts/#handling-conflicts","title":"Handling conflicts","text":"<p>If two nodes require incompatible versions:</p> <pre><code># ComfyGit detects conflict\n\u2717 Dependency conflict detected:\n  - comfyui-depthflow-nodes requires torch&gt;=2.0,&lt;2.1\n  - comfyui-video requires torch&gt;=2.1\n\nOptions:\n  1. Skip comfyui-video\n  2. Use constraint to force version\n  3. Contact node maintainer\n</code></pre> <p>Use constraints to override:</p> <pre><code>cg constraint add \"torch==2.4.1\"\n</code></pre>"},{"location":"getting-started/concepts/#python-dependencies","title":"Python dependencies","text":"<p>ComfyGit uses UV for Python package management:</p>"},{"location":"getting-started/concepts/#adding-dependencies","title":"Adding dependencies","text":"<pre><code># Add package\ncg py add requests\n\n# Add with version constraint\ncg py add \"numpy&gt;=1.24,&lt;2.0\"\n\n# Add from requirements.txt\ncg py add -r requirements.txt\n</code></pre>"},{"location":"getting-started/concepts/#listing-dependencies","title":"Listing dependencies","text":"<pre><code># Show project dependencies\ncg py list\n\n# Show all (including transitive)\ncg py list --all\n</code></pre>"},{"location":"getting-started/concepts/#removing-dependencies","title":"Removing dependencies","text":"<pre><code>cg py remove numpy\n</code></pre>"},{"location":"getting-started/concepts/#active-environment","title":"Active environment","text":"<p>ComfyGit tracks which environment is currently active:</p> <pre><code># Set active\ncg use my-project\n\n# Commands use active env by default\ncg run\ncg status\ncg node add comfyui-depthflow-nodes\n\n# Or specify explicitly\ncg -e testing run\ncg -e production status\n</code></pre> <p>The active environment is stored in <code>workspace/.metadata/workspace.json</code>.</p>"},{"location":"getting-started/concepts/#key-takeaways","title":"Key takeaways","text":"<p>Workspaces</p> <ul> <li>One per machine</li> <li>Contains all environments</li> <li>Shared model index</li> </ul> <p>Environments</p> <ul> <li>Isolated ComfyUI installations</li> <li>Tracked in .cec git repository</li> <li>Shareable via export/import</li> </ul> <p>Reproducibility</p> <ul> <li>Tier 1: Git commits for local versioning</li> <li>Tier 2: Export packages for sharing</li> </ul> <p>Models</p> <ul> <li>Content-addressable (hash-based)</li> <li>Workspace-wide index</li> <li>Path-independent resolution</li> </ul> <p>Nodes</p> <ul> <li>Multiple sources (registry, GitHub, local)</li> <li>Dependency groups in pyproject.toml</li> <li>Conflict detection via UV</li> </ul>"},{"location":"getting-started/concepts/#next-steps","title":"Next steps","text":"<p>Now that you understand the concepts:</p> <ul> <li> <p> Managing Custom Nodes</p> <p>Learn how to add, update, and remove nodes</p> </li> <li> <p> Model Management</p> <p>Deep dive into the model index system</p> </li> <li> <p> Version Control</p> <p>Master commits, rollbacks, and Git remotes</p> </li> <li> <p> Export &amp; Import</p> <p>Share environments with your team</p> </li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":"<p>Get ComfyGit installed and ready to use in just a few minutes.</p>"},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before installing ComfyGit, make sure you have:</p> <ul> <li>Python 3.10 or newer \u2014 Check with <code>python --version</code> or <code>python3 --version</code></li> <li>Operating system \u2014 Windows 10/11, macOS 10.15+, or Linux (any modern distribution)</li> <li>Internet connection \u2014 For downloading dependencies and models</li> </ul> <p>GPU Support</p> <p>ComfyGit automatically detects your GPU (NVIDIA CUDA, AMD ROCm, Intel XPU) and installs the appropriate PyTorch backend. You can also specify backends manually with the <code>--torch-backend</code> flag.</p>"},{"location":"getting-started/installation/#step-1-install-uv","title":"Step 1: Install UV","text":"<p>UV is a fast Python package manager that ComfyGit uses to manage environments and dependencies.</p> macOS/LinuxWindows PowerShellWindows CMD <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre> <p>After installation, restart your terminal or run: <pre><code>source $HOME/.cargo/env\n</code></pre></p> <pre><code>powershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre> <p>After installation, restart PowerShell.</p> <pre><code>curl -LsSf https://astral.sh/uv/install.cmd -o install.cmd &amp;&amp; install.cmd &amp;&amp; del install.cmd\n</code></pre> <p>After installation, restart CMD.</p> <p>Verify UV installation:</p> <pre><code>uv --version\n</code></pre> <p>You should see output like <code>uv 0.4.x</code> or newer.</p> <p>Alternative: Install via pip</p> <p>If you prefer pip: <pre><code>pip install uv\n</code></pre></p>"},{"location":"getting-started/installation/#step-2-install-comfygit-cli","title":"Step 2: Install ComfyGit CLI","text":"<p>With UV installed, install the ComfyGit CLI tool:</p> <pre><code>uv tool install comfygit\n</code></pre> <p>This installs the <code>cg</code> command globally, making it available from anywhere in your terminal.</p> <p>Verify ComfyGit installation:</p> <pre><code>cg --version\n</code></pre> <p>You should see the ComfyGit version number.</p> <p>Shell Completion</p> <p>Install tab completion for your shell: <pre><code>cg completion install\n</code></pre></p> <p>Supports bash, zsh, and fish. Restart your shell after installing.</p>"},{"location":"getting-started/installation/#step-3-initialize-your-workspace","title":"Step 3: Initialize your workspace","text":"<p>Create a ComfyGit workspace directory:</p> <pre><code># Initialize in default location (~/comfygit)\ncg init\n\n# Or specify a custom path\ncg init /path/to/my/workspace\n</code></pre> <p>The workspace is where ComfyGit stores:</p> <ul> <li>Environments (isolated ComfyUI installations)</li> <li>Global model index</li> <li>Cache and logs</li> </ul> <p>Workspace Structure</p> <pre><code>~/comfygit/\n\u251c\u2500\u2500 environments/          # Your ComfyUI environments\n\u251c\u2500\u2500 models/                # Shared models directory\n\u251c\u2500\u2500 comfygit_cache/       # Registry cache\n\u251c\u2500\u2500 logs/                  # Application logs\n\u2514\u2500\u2500 .metadata/             # Workspace configuration\n</code></pre>"},{"location":"getting-started/installation/#alternative-installation-methods","title":"Alternative installation methods","text":""},{"location":"getting-started/installation/#install-from-pip","title":"Install from pip","text":"<p>If you don't want to use UV tool isolation:</p> <pre><code>pip install comfygit\n</code></pre> <p>This makes <code>cg</code> available in your current Python environment.</p>"},{"location":"getting-started/installation/#install-from-source","title":"Install from source","text":"<p>For development or testing:</p> <pre><code># Clone the repository\ngit clone https://github.com/comfyhub-org/comfygit.git\ncd comfygit\n\n# Install in development mode\nuv pip install -e packages/cli/\n</code></pre>"},{"location":"getting-started/installation/#verifying-your-installation","title":"Verifying your installation","text":"<p>Check that everything is working:</p> <pre><code># Check versions\ncg --version\nuv --version\n\n# Initialize workspace (if not done)\ncg init\n\n# List environments (should be empty)\ncg list\n</code></pre> <p>You should see:</p> <pre><code>No environments found. Create one with: cg create &lt;name&gt;\n</code></pre>"},{"location":"getting-started/installation/#platform-specific-notes","title":"Platform-specific notes","text":""},{"location":"getting-started/installation/#windows","title":"Windows","text":"<ul> <li>WSL2 recommended \u2014 For best performance, use ComfyGit in WSL2 (Windows Subsystem for Linux)</li> <li>Long path support \u2014 Enable long paths in Windows if you encounter path length errors:     <pre><code>New-ItemProperty -Path \"HKLM:\\SYSTEM\\CurrentControlSet\\Control\\FileSystem\" -Name \"LongPathsEnabled\" -Value 1 -PropertyType DWORD -Force\n</code></pre></li> </ul>"},{"location":"getting-started/installation/#macos","title":"macOS","text":"<ul> <li>Xcode Command Line Tools \u2014 May be required for some dependencies:     <pre><code>xcode-select --install\n</code></pre></li> </ul>"},{"location":"getting-started/installation/#linux","title":"Linux","text":"<ul> <li> <p>System dependencies \u2014 Most distributions work out of the box. If you encounter build errors, install development tools:</p> Ubuntu/DebianFedora/RHELArch <pre><code>sudo apt-get update\nsudo apt-get install build-essential python3-dev\n</code></pre> <pre><code>sudo dnf install gcc gcc-c++ python3-devel\n</code></pre> <pre><code>sudo pacman -S base-devel python\n</code></pre> </li> </ul>"},{"location":"getting-started/installation/#updating-comfygit","title":"Updating ComfyGit","text":"<p>To update to the latest version:</p> <pre><code>uv tool upgrade comfygit\n</code></pre> <p>Or with pip:</p> <pre><code>pip install --upgrade comfygit\n</code></pre>"},{"location":"getting-started/installation/#uninstalling","title":"Uninstalling","text":"<p>To remove ComfyGit:</p> <pre><code># Remove the CLI tool\nuv tool uninstall comfygit\n\n# Optionally remove your workspace\nrm -rf ~/comfygit\n</code></pre> <p>Warning</p> <p>Removing the workspace deletes all your environments and configuration. Export any important environments first with <code>cg export</code>.</p>"},{"location":"getting-started/installation/#troubleshooting-installation","title":"Troubleshooting installation","text":""},{"location":"getting-started/installation/#uv-not-found-after-installation","title":"UV not found after installation","text":"<p>Problem: Running <code>uv</code> shows \"command not found\"</p> <p>Solution: Restart your terminal or manually source the environment:</p> macOS/LinuxWindows PowerShell <pre><code>source $HOME/.cargo/env\n</code></pre> <p>Restart PowerShell or add to PATH manually via System Properties \u2192 Environment Variables</p>"},{"location":"getting-started/installation/#permission-errors-on-linuxmacos","title":"Permission errors on Linux/macOS","text":"<p>Problem: Permission denied when installing</p> <p>Solution: Don't use <code>sudo</code> with UV or pip. If needed, fix permissions:</p> <pre><code># Fix UV permissions\nchown -R $USER:$USER ~/.cargo\n\n# For pip (if using system Python)\npip install --user comfygit\n</code></pre>"},{"location":"getting-started/installation/#python-version-too-old","title":"Python version too old","text":"<p>Problem: ComfyGit requires Python 3.10+</p> <p>Solution: Install a newer Python version:</p> Ubuntu/DebianmacOS (Homebrew)Windows <pre><code>sudo add-apt-repository ppa:deadsnakes/ppa\nsudo apt-get update\nsudo apt-get install python3.11\n</code></pre> <pre><code>brew install python@3.11\n</code></pre> <p>Download from python.org</p>"},{"location":"getting-started/installation/#windows-installation-fails","title":"Windows installation fails","text":"<p>Problem: PowerShell execution policy blocks the install script</p> <p>Solution: Run PowerShell as Administrator:</p> <pre><code>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser\n</code></pre> <p>Then try the installation again.</p>"},{"location":"getting-started/installation/#next-steps","title":"Next steps","text":"<p>Now that ComfyGit is installed:</p> <ul> <li>Quickstart guide \u2014 Create your first environment in 5 minutes</li> <li>Core concepts \u2014 Understand workspaces, environments, and .cec</li> <li>CLI reference \u2014 Explore all available commands</li> </ul>"},{"location":"getting-started/installation/#getting-help","title":"Getting help","text":"<p>If you encounter issues during installation:</p> <ul> <li>Check the troubleshooting guide</li> <li>Search GitHub Issues</li> <li>Ask on GitHub Discussions</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quickstart","text":"<p>Get up and running with ComfyGit in 5 minutes. By the end, you'll have created an environment, added custom nodes, and understand the basics of version control for your ComfyUI workflows.</p>"},{"location":"getting-started/quickstart/#before-you-begin","title":"Before you begin","text":"<p>Make sure you have:</p> <ul> <li>ComfyGit installed \u2014 Installation guide</li> <li>A terminal or command prompt open</li> <li>Internet connection for downloading dependencies</li> </ul>"},{"location":"getting-started/quickstart/#step-1-initialize-your-workspace","title":"Step 1: Initialize your workspace","text":"<p>Create a ComfyGit workspace:</p> <pre><code>cg init\n</code></pre> <p>This creates <code>~/comfygit/</code> with the following structure:</p> <pre><code>~/comfygit/\n\u251c\u2500\u2500 comfygit_cache/        # Cache for registry, custom nodes, comfyui clones, etc.\n\u251c\u2500\u2500 models/                # Shared models directory\n\u251c\u2500\u2500 environments/          # Your ComfyUI environments\n\u251c\u2500\u2500 logs/                  # Environment and workspace logs\n\u2514\u2500\u2500 .metadata/             # Workspace configuration\n</code></pre> <p>Custom workspace location</p> <p>Use a different path: <code>cg init /path/to/workspace</code></p>"},{"location":"getting-started/quickstart/#step-2-create-your-first-environment","title":"Step 2: Create your first environment","text":"<p>Create an isolated ComfyUI environment:</p> <pre><code>cg create my-project --use\n</code></pre> <p>This will:</p> <ol> <li>Create a new environment called <code>my-project</code></li> <li>Download and install ComfyUI (latest release from github)</li> <li>Install PyTorch with GPU support (auto-detected)</li> <li>Set it as your active environment</li> <li>Take 2-5 minutes depending on your internet speed</li> </ol> <p>What's happening?</p> <p>ComfyGit is creating an isolated Python environment with UV, downloading ComfyUI from GitHub, and installing dependencies. The <code>--use</code> flag makes this your active environment.</p> <p>What you'll see:</p> <pre><code>\ud83d\ude80 Creating environment: my-project\n   This will download PyTorch and dependencies (may take a few minutes)...\n\n\u2713 Environment created: my-project\n\u2713 Active environment set to: my-project\n\nNext steps:\n  \u2022 Run ComfyUI: cg run\n  \u2022 Add nodes: cg node add &lt;node-name&gt;\n</code></pre>"},{"location":"getting-started/quickstart/#step-3-run-comfyui","title":"Step 3: Run ComfyUI","text":"<p>Start ComfyUI in your environment:</p> <pre><code>cg run\n</code></pre> <p>ComfyUI opens at <code>http://localhost:8188</code></p> <p>Run in background</p> <pre><code>cg run &amp;\n</code></pre> <p>Or use screen/tmux to keep it running: <pre><code>screen -S comfy\ncg run\n# Detach with Ctrl+A, D\n</code></pre></p>"},{"location":"getting-started/quickstart/#step-4-check-environment-status","title":"Step 4: Check environment status","text":"<p>Open a new terminal and check your environment's status:</p> <pre><code>cg status\n</code></pre> <p>Output:</p> <pre><code>Environment: my-project \u2713\n\n\u2713 No workflows\n\u2713 No uncommitted changes\n</code></pre>"},{"location":"getting-started/quickstart/#step-5-add-custom-nodes","title":"Step 5: Add custom nodes","text":"<p>Let's add a custom node from the ComfyUI registry:</p> <pre><code>cg node add comfyui-depthflow-nodes\n</code></pre> <p>This will:</p> <ol> <li>Look up the node in the ComfyUI registry</li> <li>Clone the repository to <code>custom_nodes/</code></li> <li>Install Python dependencies</li> <li>Update <code>pyproject.toml</code></li> </ol> <p>Adding nodes from GitHub</p> <pre><code># Add by GitHub URL\ncg node add https://github.com/akatz-ai/ComfyUI-AKatz-Nodes\n\n# Add specific version/branch\ncg node add comfyui-depthflow-nodes@main\n</code></pre> <p>Avoid ComfyUI-Manager</p> <p>ComfyGit replaces ComfyUI-Manager's functionality. Don't install <code>comfyui-manager</code> - use <code>cg node add</code> instead.</p> <p>Try adding more nodes:</p> <pre><code># Popular nodes to try\ncg node add comfyui-impact-pack\ncg node add comfyui-controlnet-aux\n</code></pre>"},{"location":"getting-started/quickstart/#step-6-commit-your-changes","title":"Step 6: Commit your changes","text":"<p>Save your environment's current state:</p> <pre><code>cg commit -m \"Added depthflow nodes\"\n</code></pre> <p>This creates a git commit in the <code>.cec/</code> directory tracking:</p> <ul> <li>Custom nodes and their versions</li> <li>Python dependencies</li> <li>Model references</li> <li>Workflow files</li> </ul> <p>Check your commit history:</p> <pre><code>cg log\n</code></pre> <p>Output:</p> <pre><code>Version history for environment 'my-project':\n\nv2: Added depthflow nodes\nv1: Initial environment setup\n\nUse 'cg rollback &lt;version&gt;' to restore to a specific version\n</code></pre> <p>Verbose mode</p> <pre><code>cg log --verbose\n</code></pre> <p>Shows timestamps and full commit hashes.</p>"},{"location":"getting-started/quickstart/#step-7-experiment-safely","title":"Step 7: Experiment safely","text":"<p>Let's add another node and see how rollback works:</p> <pre><code># Add a test node\ncg node add comfyui-video-helper-suite\n\n# Check status\ncg status\n</code></pre> <p>Now roll back to remove that change:</p> <pre><code>cg rollback v1\n</code></pre> <p>Your environment reverts to the state from your first commit\u2014<code>comfyui-video-helper-suite</code> is removed automatically.</p> <p>Discard uncommitted changes</p> <pre><code># Discard all changes since last commit\ncg rollback\n</code></pre>"},{"location":"getting-started/quickstart/#step-8-load-a-workflow","title":"Step 8: Load a workflow","text":"<p>Let's resolve dependencies for a workflow. Download a sample workflow JSON file, then:</p> <pre><code># Move workflow to ComfyUI/user/default/workflows/\ncp /path/to/workflow.json ~/comfygit/environments/my-project/ComfyUI/user/default/workflows/\n\n# Resolve dependencies\ncg workflow resolve workflow.json\n</code></pre> <p>ComfyGit will:</p> <ol> <li>Analyze the workflow JSON</li> <li>Identify required nodes</li> <li>Prompt you to install missing nodes</li> <li>Find required models</li> <li>Suggest download sources</li> </ol> <p>Auto-install mode</p> <pre><code>cg workflow resolve workflow.json --install\n</code></pre> <p>Automatically installs all missing nodes without prompting.</p>"},{"location":"getting-started/quickstart/#common-workflows","title":"Common workflows","text":"<p>Now that you have the basics, here are some common tasks:</p>"},{"location":"getting-started/quickstart/#switch-between-environments","title":"Switch between environments","text":"<pre><code># Create another environment\ncg create testing --use\n\n# List all environments\ncg list\n\n# Switch back to my-project\ncg use my-project\n</code></pre>"},{"location":"getting-started/quickstart/#update-a-custom-node","title":"Update a custom node","text":"<pre><code># Update to latest version\ncg node update comfyui-depthflow-nodes\n\n# View installed nodes\ncg node list\n</code></pre>"},{"location":"getting-started/quickstart/#add-python-dependencies","title":"Add Python dependencies","text":"<pre><code># Add a package\ncg py add requests\n\n# Add from requirements.txt\ncg py add -r requirements.txt\n\n# List installed packages\ncg py list\n</code></pre>"},{"location":"getting-started/quickstart/#export-your-environment","title":"Export your environment","text":"<p>Share your environment with others:</p> <pre><code>cg export my-workflow-pack.tar.gz\n</code></pre> <p>This creates a tarball containing:</p> <ul> <li>Node metadata and versions</li> <li>Model download URLs</li> <li>Python dependencies</li> <li>Workflow files</li> </ul> <p>Import on another machine:</p> <pre><code>cg import my-workflow-pack.tar.gz --name imported-env\n</code></pre>"},{"location":"getting-started/quickstart/#essential-commands","title":"Essential commands","text":"<p>Here are the most important commands for daily use:</p> Command What it does Example <code>cg create</code> Create new environment <code>cg create prod --use</code> <code>cg use</code> Switch active environment <code>cg use testing</code> <code>cg list</code> List all environments <code>cg list</code> <code>cg run</code> Start ComfyUI <code>cg run</code> <code>cg status</code> Show environment status <code>cg status</code> <code>cg node add</code> Add custom node <code>cg node add comfyui-depthflow-nodes</code> <code>cg commit</code> Save current state <code>cg commit -m \"message\"</code> <code>cg log</code> List environment commits <code>cg log</code> <code>cg rollback</code> Revert to previous state <code>cg rollback v1</code> <code>cg export</code> Export environment <code>cg export my-pack.tar.gz</code> <code>cg import</code> Import environment <code>cg import my-pack.tar.gz</code> <p>See the CLI reference for a complete list of commands.</p>"},{"location":"getting-started/quickstart/#pro-tips-for-beginners","title":"Pro tips for beginners","text":"<p>Use tab completion</p> <p>Install shell completion for faster typing: <pre><code>cg completion install\n</code></pre></p> <p>Then use Tab to autocomplete environment names, node names, and commands.</p> <p>Check logs when things fail</p> <pre><code>cg debug -n 50\n</code></pre> <p>Shows the last 50 log lines for debugging.</p> <p>Start with a clean environment</p> <p>Don't add too many nodes at once. Start minimal, add what you need, commit often.</p> <p>Use descriptive commit messages</p> <pre><code>cg commit -m \"Added IPAdapter for style transfer\"\n</code></pre> <p>Makes it easy to find specific versions later.</p> <p>Specify PyTorch backend manually</p> <pre><code># For NVIDIA GPUs\ncg create gpu-env --torch-backend cu128\n\n# For AMD GPUs\ncg create amd-env --torch-backend rocm6.3\n\n# For CPU only\ncg create cpu-env --torch-backend cpu\n</code></pre>"},{"location":"getting-started/quickstart/#whats-next","title":"What's next?","text":"<p>Now that you've learned the basics, explore more advanced features:</p> <ul> <li> <p> Core Concepts</p> <p>Understand workspaces, environments, and how ComfyGit works</p> </li> <li> <p> Managing Custom Nodes</p> <p>Learn about registry IDs, GitHub URLs, and local development</p> </li> <li> <p> Model Management</p> <p>How the global model index works and CivitAI integration</p> </li> <li> <p> Collaboration</p> <p>Share environments via tarballs or Git remotes</p> </li> </ul>"},{"location":"getting-started/quickstart/#getting-help","title":"Getting help","text":"<ul> <li>In your terminal: Run <code>cg --help</code> or <code>cg &lt;command&gt; --help</code></li> <li>Documentation: You're here! Browse other guides</li> <li>Issues: Report bugs on GitHub Issues</li> <li>Discussions: Ask questions on GitHub Discussions</li> </ul>"},{"location":"legacy/","title":"Overview","text":"<p>If you find this guide helpful consider giving the  repo a \u2b50!</p>"},{"location":"legacy/#what-is-comfydock","title":"What is ComfyDock?","text":"<p>ComfyDock is a tool that allows you to easily manage your ComfyUI environments via Docker.</p>"},{"location":"legacy/#common-challenges-with-comfyui","title":"Common Challenges with ComfyUI","text":"<ul> <li>Custom Node Installation Issues: Installing new custom nodes can inadvertently change settings across the whole installation, potentially breaking the environment.</li> <li>Workflow Compatibility: Workflows are often tested with specific custom nodes and ComfyUI versions. Running these workflows on different setups can lead to errors and frustration.</li> <li>Security Risks: Installing custom nodes directly on your host machine increases the risk of malicious code execution.</li> </ul>"},{"location":"legacy/#how-comfydock-helps","title":"How ComfyDock Helps","text":"<ul> <li>Environment Duplication: Easily duplicate your current environment before installing custom nodes. If something breaks, revert to the original environment effortlessly.</li> <li>Deployment and Sharing: Workflow developers can commit their environments to a Docker image, which can be shared with others and run on cloud GPUs to ensure compatibility.</li> <li>Enhanced Security: Containers help to isolate the environment, reducing the risk of malicious code impacting your host machine.</li> </ul>"},{"location":"legacy/#youtube-guides","title":"YouTube Guides","text":"<ul> <li> <p>Intro and Installation: </p> </li> <li> <p>User Guide: </p> </li> </ul>"},{"location":"legacy/about_author/","title":"About the Author","text":"<p>Akatz AI:</p> <ul> <li>Website: https://akatz.ai</li> <li>Ko-fi</li> <li>Patreon</li> <li>Civitai</li> <li>YouTube</li> <li>Instagram</li> <li>TikTok</li> <li>X</li> <li>GitHub</li> </ul> <p>Contacts:</p> <ul> <li>Email: akatzfey@sendysoftware.com</li> </ul>"},{"location":"legacy/best_practices/","title":"Best Practices","text":""},{"location":"legacy/best_practices/#windows-and-wsl","title":"Windows and WSL","text":"<p>ComfyDock is designed to work seamlessly with WSL (Windows Subsystem for Linux). This allows you to run Dockerized ComfyUI environments with better performance than you\u2019d typically see when storing everything on a Windows drive. Below are some recommended steps and tips for setting up WSL, configuring it, and saving your models in WSL to reduce loading times.</p>"},{"location":"legacy/best_practices/#setting-up-wsl","title":"Setting up WSL","text":"<ol> <li> <p>Install WSL</p> <ul> <li> <p>On Windows 10/11, open PowerShell as Administrator and run:</p> <pre><code>wsl --install -d Ubuntu\n</code></pre> </li> <li> <p>Alternatively, open the Microsoft Store, search for \u201cUbuntu\u201d (or your preferred distro), and click Install.</p> </li> </ul> </li> <li> <p>Update WSL &amp; Packages</p> <ul> <li> <p>Once installed, open Ubuntu from the Start menu. Then run:</p> <pre><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y\n</code></pre> </li> </ul> </li> <li> <p>Check Your WSL Version</p> <ul> <li> <p>Ensure you\u2019re using WSL2 for the best compatibility and performance:</p> <p><pre><code>wsl --set-version &lt;distro-name&gt; 2\n</code></pre> Replace  with the name of your distro (e.g. Ubuntu). <li> <p>Install Docker Desktop</p> <ul> <li>Install Docker Desktop for Windows, enable \u201cUse the WSL 2 based engine\u201d in the Docker settings, and integrate it with your Ubuntu distro.</li> </ul> </li>"},{"location":"legacy/best_practices/#configure-wsl-config","title":"Configure WSL Config","text":"<p>If you plan on running resource-heavy tasks (e.g., large model inference) in WSL, it\u2019s best to grant WSL more CPU cores and RAM. You can do this by creating or editing the .wslconfig file in your Windows home directory (%USERPROFILE%):</p> <pre><code>[wsl2]\nmemory=8GB       # Adjust as needed\nprocessors=4     # Number of CPU cores to allocate\n</code></pre> <ol> <li> <p>Locate Home Directory</p> <p>In File Explorer, go to <code>%USERPROFILE%</code>.</p> </li> <li> <p>Check if .wslconfig Exists</p> <ul> <li>If it doesn\u2019t, create a new text file named <code>.wslconfig</code>.</li> </ul> </li> <li> <p>Restart WSL</p> </li> </ol> <pre><code>wsl --shutdown\nwsl\n</code></pre> <ol> <li> <p>Verify Changes</p> <p>Inside WSL:</p> </li> </ol> <pre><code>htop\n# or\ncat /proc/meminfo\n</code></pre> <p>Confirm you see the updated RAM/CPU limits.</p>"},{"location":"legacy/best_practices/#saving-models-in-wsl","title":"Saving Models in WSL","text":"<ul> <li> <p>Performance Gains: Storing model checkpoints inside the WSL filesystem significantly reduces load times compared to storing them on a Windows (C:, D:, etc.) drive.</p> </li> <li> <p>Folder Paths: You might store your models at <code>/home/&lt;username&gt;/ComfyUI/models.</code></p> </li> <li> <p>Access WSL from Windows Explorer:</p> </li> </ul> <p><pre><code>\\\\wsl.localhost\\&lt;distro-name&gt;\\home\\&lt;username&gt;\\ComfyUI\\models\n</code></pre> Replace <code>&lt;distro-name&gt;</code> with your actual distro name (e.g., Ubuntu).</p> <p>Why Do This?</p> <p>Reading large models from Windows drives can cause slowdowns due to file system translations. Keeping models in WSL\u2019s native file system lets Docker containers access them much faster.</p>"},{"location":"legacy/best_practices/#automatic-permission-handling","title":"Automatic Permission Handling","text":"<p>New in v1.1.0+: ComfyDock Docker images now include automatic permission checking and fixing tools.</p>"},{"location":"legacy/best_practices/#how-it-works","title":"How It Works","text":"<p>ComfyDock containers automatically check file permissions on startup to ensure the <code>comfy</code> user (UID 1000) can access all necessary files. This is especially helpful when:</p> <ul> <li>Using bind-mounted directories from your host system</li> <li>Sharing model directories between multiple users</li> <li>Working with files created by different users or processes</li> </ul>"},{"location":"legacy/best_practices/#default-behavior","title":"Default Behavior","text":"<p>By default, ComfyDock containers:</p> <ol> <li>Check permissions on all bind-mounted volumes and ComfyUI directories</li> <li>Display a summary of any permission issues found</li> <li>Suggest using the <code>fix-permissions</code> command if issues are detected</li> <li>Continue running even if permission issues exist</li> </ol>"},{"location":"legacy/best_practices/#quick-permission-fix","title":"Quick Permission Fix","text":"<p>If you encounter permission issues:</p> <pre><code># Access the running container\ncomfydock dev exec\n\n# Run the permission fix tool\nfix-permissions\n</code></pre> <p>The tool will:</p> <ul> <li>Show all files and directories with permission issues</li> <li>Ask for confirmation before making changes</li> <li>Create an audit log of all modifications</li> <li>Verify the fixes were successful</li> </ul>"},{"location":"legacy/best_practices/#customizing-permission-behavior","title":"Customizing Permission Behavior","text":"<p>You can control permission handling with environment variables:</p> <ul> <li><code>PERMISSION_CHECK_MODE=once</code> - Only check permissions on first startup</li> <li><code>PERMISSION_CHECK_MODE=never</code> - Disable automatic permission checking</li> <li><code>STRICT_PERMISSIONS=true</code> - Prevent container startup if permission issues exist</li> </ul> <p>For more details, see the Permission Handling documentation.</p>"},{"location":"legacy/best_practices/#editing-files-in-containers","title":"Editing Files in Containers","text":"<p>Sometimes you'll need to modify or update files that live inside your Dockerized ComfyUI environment. Since many files are not necessarily mounted to the Windows host filesystem, you may need to access them directly within the container.</p>"},{"location":"legacy/best_practices/#where-comfyui-is-stored","title":"Where ComfyUI is stored","text":"<ul> <li> <p>By default, when using ComfyDock, ComfyUI is installed to <code>/app/ComfyUI</code> inside the container.</p> </li> <li> <p>If you created a WSL-based environment, you might also have a copy under <code>/home/&lt;username&gt;/ComfyUI</code> or wherever you specified during environment creation.</p> </li> </ul>"},{"location":"legacy/best_practices/#how-to-edit-files","title":"How to Edit Files","text":"<ol> <li> <p>ComfyDock Dev Exec (Recommended)</p> <p>The easiest way to access a running container is using the ComfyDock CLI:</p> <pre><code>comfydock dev exec\n</code></pre> <p>This will list all running containers and let you select which one to access. You'll enter as the root user.</p> <p>\u26a0\ufe0f Important: Files created or modified as root may become inaccessible to the container's <code>comfy</code> user. Always fix permissions after making changes:</p> <pre><code># For single files\nchown comfy:comfy /path/to/file\n\n# For directories\nchown -R comfy:comfy /path/to/directory\n</code></pre> </li> <li> <p>Docker Desktop Exec</p> <ul> <li> <p>Go to Docker Desktop \u2192 find the container for your ComfyUI environment.</p> </li> <li> <p>Click the container \u2192 Exec tab \u2192 open a shell.</p> </li> <li> <p>You can now browse or edit files via command-line text editors like <code>nano</code> or <code>vim</code>.</p> </li> </ul> </li> <li> <p>VSCode Dev Containers</p> <ul> <li> <p>Install the \"Dev Containers\" extension in VSCode.</p> </li> <li> <p>Make sure your container is running, then press F1 (Command Palette) \u2192 \"Dev Containers: Attach to Running Container\".</p> </li> <li> <p>Select your container (not the <code>\u2026-frontend</code> one).</p> </li> <li> <p>Once attached, you can open a folder (<code>/app/ComfyUI</code>) in VSCode and edit files graphically.</p> </li> </ul> </li> </ol>"},{"location":"legacy/best_practices/#install-custom-nodes","title":"Install Custom Nodes","text":"<p>To install custom nodes inside the container:</p> <ol> <li> <p>Access the Container <pre><code>comfydock dev exec\n# Select your running container\n</code></pre></p> </li> <li> <p>Navigate to Custom Nodes Directory <pre><code>cd /app/ComfyUI/custom_nodes\n</code></pre></p> </li> <li> <p>Clone the Node Repo <pre><code>git clone &lt;custom_node_repo&gt;\ncd &lt;custom_node_directory&gt;\nuv pip install -r requirements.txt\n</code></pre> Replace <code>&lt;custom_node_repo&gt;</code> with the GitHub URL.</p> </li> <li> <p>Fix Permissions (Important!)</p> <p>Since you cloned as root, fix the ownership:</p> <pre><code>chown -R comfy:comfy /app/ComfyUI/custom_nodes/&lt;custom_node_directory&gt;\n</code></pre> </li> <li> <p>(Optional) Reload ComfyUI</p> <ul> <li>If ComfyUI was running in the container and you have HotReloadHack installed, it may automatically pick up the new custom node. Otherwise, restart ComfyUI.</li> </ul> </li> </ol>"},{"location":"legacy/best_practices/#developing-in-containers","title":"Developing in Containers","text":"<ol> <li> <p>Attach with VSCode</p> <ul> <li>This is the most convenient method for quickly editing and testing.</li> </ul> </li> <li> <p>HotReloadHack</p> <ul> <li>For faster iteration when writing or debugging custom nodes, consider installing the HotReloadHack. This lets ComfyUI detect changes without a full restart.</li> </ul> </li> <li> <p>Environment Duplication</p> <ul> <li>Before trying out new or experimental custom nodes, clone your environment via ComfyDock. If things break, you still have your original environment untouched.</li> </ul> </li> <li> <p>Permission Management</p> <ul> <li>With v1.1.0+ images, use the built-in fix-permissions command if you encounter issues after editing files as root. For detailed instructions on editing files in containers, see the Edit Files in Container documentation.</li> </ul> </li> </ol>"},{"location":"legacy/best_practices/#additional-recommendations","title":"Additional Recommendations","text":"<ul> <li> <p>Keep WSL &amp; Docker Updated: Out-of-date packages can lead to weird issues or mounting troubles.</p> </li> <li> <p>Watch Out for Permissions: If you see \u201cPermission denied\u201d errors, make sure you own the files inside WSL by running:</p> </li> </ul> <pre><code>sudo chown -R $USER:$USER /path/to/folder\nchmod -R u+w /path/to/folder\n</code></pre> <ul> <li> <p>Default+ Mode Issues: If the \u201cDefault+\u201d environment creation mode fails to install certain custom nodes, consider creating a plain \u201cDefault\u201d environment, installing your nodes one by one, then cloning that environment in the future.</p> </li> <li> <p>Sage-Attention Support: ComfyDock images v1.1.1+ include build-essential packages, ensuring packages like sage-attention that require compilation will work properly. Add the <code>--use-sage-attention</code> command on environment creation to use sage attention.</p> </li> </ul>"},{"location":"legacy/environments/","title":"Working with Environments","text":""},{"location":"legacy/environments/#environment-cards","title":"Environment Cards","text":"<p>Each environment is displayed as a card, showing:</p> <ul> <li>Name</li> <li>Base image</li> <li>Status (e.g., Created, Running, Exited)</li> </ul>"},{"location":"legacy/environments/#actions","title":"Actions","text":"<ul> <li>Settings: Edit environment details.</li> <li>Logs: View the current state of the environment.</li> <li>Duplicate: Clone an existing environment.</li> <li>Delete: Permanently remove an environment.</li> <li>Activate: Start the environment (deactivates others unless multiple containers are allowed).</li> </ul>"},{"location":"legacy/environments/#activating-environments","title":"Activating Environments","text":"<ul> <li> <p>Activate: Click the Activate button to run the environment.</p> <ul> <li>You will know an environment is active if it has a green Running status, and spinning fan icon.</li> </ul> <p></p> <ul> <li>Access the server by clicking the link next to the Status indicator.</li> <li>Once an environment is running you will be able to monitor the internal ComfyUI logs by clicking on the \u201cLogs\u201d button, which open a dialog displaying the current state:</li> </ul> <p></p> </li> </ul>"},{"location":"legacy/environments/#duplicating-an-environment","title":"Duplicating an Environment","text":"<p>Demo </p> <p>You can use the duplicate functionality to create a copy of an environment. Mounted directories are not included in this copy, only installed dependencies, copied data, and files already present in the environment will be saved to the duplicate.</p> <ul> <li> <p>Duplicate: Use the Duplicate button to create a copy of an environment. Adjust settings as needed during duplication.</p> <p></p> </li> <li> <p>Environment type by default is set to \u201cAuto\u201d, which keeps the same mount config as the original:</p> <p></p> </li> <li> <p>You can further adjust the duplicate environment in the Advanced Options tab, these options are the same as when creating a new environment.</p> </li> </ul> <p>IMPORTANT: you can only duplicate an environment that has been activated at least once. </p>"},{"location":"legacy/environments/#deleting-an-environment","title":"Deleting an Environment","text":"<ul> <li>Use the Delete button to remove an environment.</li> <li>If the environment is NOT already in the \u201cRecently Deleted\u201d folder, it will be moved there. If it already is in the \u201cRecently Deleted\u201d folder, it will be permanently deleted.</li> </ul> <p>NOTE: Files and directories that are \u201cmounted\u201d from the host machine (such as models, workflows, etc.) will NOT be deleted when an environment is deleted. Only files native to the container or copied into the container will be deleted.</p>"},{"location":"legacy/environments/#environment-settings","title":"Environment Settings","text":"<p>Click on Settings in the environment card to:</p> <ul> <li>Rename the environment.</li> <li>Change the environment\u2019s folder location.</li> <li>View detailed environment information (e.g., base image, mount points).</li> </ul> <p></p>"},{"location":"legacy/environments/#organizing-environments-with-folders","title":"Organizing Environments with Folders","text":"<p>You can use folders to organize your environments. You can see which folder you are currently viewing via the dropdown in the top-left corner:</p> <p></p>"},{"location":"legacy/environments/#default-folders","title":"Default Folders","text":"<ul> <li>All Environments:<ul> <li>A default folder that will display all environments you currently have saved, regardless of which folders they are saved under.</li> </ul> </li> <li>Recently Deleted:<ul> <li>A folder which shows environments that were recently removed. If you delete an environment from this folder it will be permanently deleted from the machine.</li> <li>Up to 10 (limit configurable in Settings) environments can remain in this folder at a time. If an environment is deleted and added to \u201cRecently Deleted\u201d when it is already at max capacity, the oldest created environment in the folder will be permanently deleted.</li> </ul> </li> </ul>"},{"location":"legacy/environments/#creating-new-folders","title":"Creating New Folders","text":"<ul> <li>You can create new folders by clicking on the \u201cAdd Folder\u201d button next to the folder dropdown menu:</li> </ul> <ul> <li>Folder names must be unique</li> <li>Folders will be added to the dropdown list in the order they were created</li> </ul>"},{"location":"legacy/environments/#editing-and-deleting-folders","title":"Editing and Deleting Folders","text":"<ul> <li>You can change a folder\u2019s name, or delete an empty folder by clicking on the \u201cSettings\u201d button right of a folder name in the dropdown menu.</li> </ul> <ul> <li>Click \u201cUpdate\u201d once you\u2019ve made changes to save them.</li> <li>Click \u201cDelete Folder\u201d if you\u2019d like to delete a folder, folders can only be deleted if they contain no environments (you can move or delete existing environments until the folder is empty).</li> </ul>"},{"location":"legacy/environments/#adding-environments-to-folders","title":"Adding Environments to Folders","text":"<p>There are a couple of ways to add an environment to a folder:</p> <ol> <li>Create the environment inside of a specific folder<ol> <li>Environments created with a folder selected will be added to that folder by default</li> <li>Environments created in a Default Folder (All Environments, Recently Deleted) will have the \u201cNone\u201d folder assigned by default.</li> </ol> </li> <li>Duplicate an environment inside of a specific folder:<ol> <li>Duplicates will be added to the selected folder by default</li> <li>Duplicates in a Default Folder will have the \u201cNone\u201d folder assigned.</li> </ol> </li> <li>Manually set the environment\u2019s folder via Environment Settings:  <ol> <li>You can manually specify which folder an environment should belong in with the Folder dropdown in settings. Click \u201cUpdate\u201d once selected to save the changes.</li> </ol> </li> </ol>"},{"location":"legacy/installation/","title":"Installation","text":"<p>ComfyDock can be installed in two different ways: directly using the CLI tool or through the Pinokio app platform. Choose the method that works best for your workflow.</p>"},{"location":"legacy/installation/#prerequisites","title":"Prerequisites","text":"<ul> <li>A Windows, Linux, or macOS machine (macOS is CPU-only)</li> <li>Docker: ComfyDock requires Docker to be installed on your system<ul> <li>For desktop environments: Docker Desktop  for Windows, macOS, or Linux</li> <li>For headless environments: Docker Engine + NVIDIA Container Toolkit</li> </ul> </li> <li>Latest WSL (Windows only).</li> <li>Latest NVIDIA drivers.</li> <li>Adequate disk space.</li> </ul>"},{"location":"legacy/installation/#installing-docker-desktop","title":"Installing Docker Desktop","text":"<ol> <li>Download Docker Desktop. (AMD64 recommended)</li> <li>Follow installation instructions for your operating system.</li> <li> <p>(Optional step: Windows) Ensure WSL is updated:</p> <ul> <li>Open PowerShell as Administrator.</li> <li> <p>Run the following command:</p> <pre><code>wsl --update\n</code></pre> </li> <li> <p>Verify Docker installation by running:</p> <pre><code>wsl docker --version\n</code></pre> </li> </ul> <p>If successful, you'll see output like: <code>Docker version 27.3.1, build ce12230</code>.</p> </li> </ol>"},{"location":"legacy/installation/#method-1-cli-installation","title":"Method 1: CLI Installation","text":"<p>Check out the GitHub repository for the latest updates and issues!</p>"},{"location":"legacy/installation/#option-a-install-with-uv-recommended","title":"Option A: Install with UV (Recommended)","text":"<p>UV is a fast Python package manager that makes installation simple and reliable.</p>"},{"location":"legacy/installation/#step-1-install-uv","title":"Step 1: Install UV","text":"<p>For detailed installation instructions, visit the UV documentation.</p> <p>Linux/macOS (including WSL): <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre></p> <p>Windows: <pre><code>powershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre></p>"},{"location":"legacy/installation/#step-2-install-comfydock","title":"Step 2: Install ComfyDock","text":"<p>As a global tool (recommended): <pre><code>uv tool install comfydock\n</code></pre></p> <p>For temporary testing: <pre><code>uvx comfydock --help\n# Or run commands directly:\nuvx comfydock up\n</code></pre></p> <p>For the latest version: <pre><code>uvx comfydock@latest up\n</code></pre></p>"},{"location":"legacy/installation/#step-3-configure-and-run","title":"Step 3: Configure and Run","text":"<pre><code># Configure ComfyDock (optional)\ncomfydock config\n\n# Start ComfyDock\ncomfydock up\n</code></pre>"},{"location":"legacy/installation/#updating-comfydock-with-uv","title":"Updating ComfyDock with UV","text":"<pre><code>uv tool install --upgrade comfydock\n</code></pre>"},{"location":"legacy/installation/#option-b-install-with-pip","title":"Option B: Install with pip","text":"<p>If you prefer using pip or don't want to install UV:</p> <pre><code>pip install comfydock\n</code></pre> <p>Note: Requires Python 3.12 or higher.</p>"},{"location":"legacy/installation/#updating-comfydock-cli-with-pip","title":"Updating ComfyDock CLI with pip","text":"<pre><code>pip install --upgrade comfydock\n</code></pre>"},{"location":"legacy/installation/#cli-quick-start","title":"CLI Quick Start","text":""},{"location":"legacy/installation/#step-1-configure-comfydock","title":"Step 1: Configure ComfyDock","text":"<pre><code># Set your local ComfyUI path (if you have one)\ncomfydock config comfyui_path /path/to/your/ComfyUI\n\n# Or use interactive configuration mode\ncomfydock config\n</code></pre>"},{"location":"legacy/installation/#step-2-start-comfydock","title":"Step 2: Start ComfyDock","text":"<p><pre><code>comfydock up\n</code></pre> This will start both the backend and frontend servers and open ComfyDock in your browser automatically.</p>"},{"location":"legacy/installation/#step-3-stop-comfydock","title":"Step 3: Stop ComfyDock","text":"<pre><code>comfydock down\n\nor\n\nctrl + c in the terminal\n</code></pre>"},{"location":"legacy/installation/#additional-commands","title":"Additional Commands","text":"<pre><code># Show main help\ncomfydock --help\n\n# Show help for a specific command\ncomfydock up --help\n\n# List all current configuration values\ncomfydock config --list\n\n# Start only the backend server without the frontend\ncomfydock up --backend\n\n# Access running comfydock container environment via shell\ncomfydock dev exec\n</code></pre>"},{"location":"legacy/installation/#method-2-pinokio-installation","title":"Method 2: Pinokio Installation","text":""},{"location":"legacy/installation/#step-1-install-the-pinokio-app","title":"Step 1: Install the Pinokio App","text":"<ol> <li>Download Pinokio</li> <li>Follow the installation instructions provided on the website.</li> <li>After installation:<ul> <li>Open Pinokio and click Discover (top-right corner).</li> <li>Select Download from URL.</li> <li>Enter the following URL into the first field:<code>https://github.com/ComfyDock/ComfyDock-Pinokio</code>Leave the second field blank.</li> <li>Click One-Click Install with Pinokio.</li> <li>Go through the standard installation process.</li> <li>You will be prompted to download Docker Desktop (see instructions above for installing docker), if docker is already installed you can continue.</li> <li>Finally, click Install and set an appropriate name to save the application.</li> </ul> </li> </ol>"},{"location":"legacy/installation/#step-2-install-comfydock_1","title":"Step 2: Install ComfyDock","text":"<ol> <li>Ensure Pinokio is running.</li> <li>Click the ComfyDock app on the home screen.<ul> <li>You should see the following menu:</li> <li></li> </ul> </li> <li>Click Install &amp; Update to begin setup.</li> <li>Make sure Docker Desktop is running and click Start.</li> <li>Look for <code>Uvicorn running on http://0.0.0.0:5172</code>.</li> <li>Click Show Environments to view the main interface.</li> <li>If empty, wait a bit and click refresh.</li> </ol>"},{"location":"legacy/sharing_images/","title":"Environment Sharing Using DockerHub","text":"<p>Sharing your ComfyUI environment via a container registry like DockerHub makes it easy for others to download and use your environment exactly as you configured it. Here\u2019s how to do it step by step:</p>"},{"location":"legacy/sharing_images/#step-1-prepare-the-environment","title":"Step 1: Prepare the Environment","text":"<ol> <li>Create or Duplicate an Environment:<ul> <li>Use the ComfyUI Environment Manager to create a new environment or duplicate an existing one that you want to share or back up.</li> </ul> </li> <li> <p>Install or Modify Files:</p> <ul> <li>Add custom nodes, models, or workflows via the Comfy Manager.</li> <li>For more advanced edits, attach to the running container using VSCode (see the earlier guide) and make changes directly inside the container.</li> </ul> <p>Important: Only files inside the container are saved when creating an image. Files from mounted directories (e.g., your <code>models</code> folder on your host machine) will not be included in the image. If needed, copy these files into the container.</p> </li> </ol>"},{"location":"legacy/sharing_images/#step-2-create-a-dockerhub-repository","title":"Step 2: Create a DockerHub Repository","text":"<ol> <li>Log in to DockerHub at hub.docker.com</li> <li>Navigate to your \u201cRepositories\u201d page.</li> <li>Click on Create a repository.</li> <li>Name your repository (e.g., <code>comfy-env-test</code>) and set its visibility (public or private).</li> <li>Use this name in the following tagging step.</li> </ol>"},{"location":"legacy/sharing_images/#step-3-duplicate-and-tag-the-environment","title":"Step 3: Duplicate and Tag the Environment","text":"<ol> <li>Duplicate the Environment:<ul> <li>Once the environment is ready, duplicate it to generate a new image. The image will be named something like <code>comfy-env-clone:&lt;environment-name&gt;</code>.</li> </ul> </li> <li> <p>Locate the Image:</p> <ul> <li> <p>Open Docker Desktop or use the following command to list available images:</p> <pre><code>docker images\n</code></pre> </li> <li> <p>Find the <code>comfy-env-clone:&lt;environment-name&gt;</code> image in the list.</p> </li> </ul> </li> <li> <p>Tag the Image for DockerHub:</p> <ul> <li> <p>Use the <code>docker tag</code> command to tag the image with your DockerHub repository name:</p> <pre><code>docker tag comfy-env-clone:&lt;environment-name&gt; &lt;dockerhub-username&gt;/&lt;repo-name&gt;:&lt;tag&gt;\n</code></pre> <p>Example:</p> <pre><code>docker tag comfy-env-clone:my-environment akatzai/comfy-env-test:latest\n</code></pre> </li> </ul> </li> </ol>"},{"location":"legacy/sharing_images/#step-4-push-the-image-to-dockerhub","title":"Step 4: Push the Image to DockerHub","text":"<ol> <li> <p>Log in to DockerHub:</p> <ul> <li> <p>Run the following command and enter your credentials:</p> <pre><code>docker login\n</code></pre> </li> </ul> </li> <li> <p>Push the Image:</p> <ul> <li> <p>Upload the tagged image to your DockerHub repository:</p> <pre><code>docker push &lt;dockerhub-username&gt;/&lt;repo-name&gt;:&lt;tag&gt;\n</code></pre> <p>Example:</p> <pre><code>docker push akatzai/comfy-env-test:latest\n</code></pre> </li> </ul> </li> <li> <p>Share the Repository URL:</p> <ul> <li>Once the push is complete, share the repository URL (e.g., <code>akatzai/comfy-env-test:latest</code>) with others. They can now download and run the image on their machine.</li> </ul> </li> </ol>"},{"location":"legacy/sharing_images/#step-5-running-the-shared-environment","title":"Step 5: Running the Shared Environment","text":"<ol> <li> <p>Download the Image:</p> <ul> <li> <p>Users can download the image directly from their Environment Manager interface via the Create Environment dialog:</p> <p></p> </li> <li> <p>Users can also pull the image using the following command:</p> <pre><code>docker pull &lt;dockerhub-username&gt;/&lt;repo-name&gt;:&lt;tag&gt;\n</code></pre> <p>Example:</p> <pre><code>docker pull akatzai/comfy-env-test:latest\n</code></pre> </li> </ul> </li> <li> <p>Run the Environment:</p> <ul> <li>If pulled via the Create Environment interface, activate the new environment and run as normal.</li> <li> <p>Start the container with appropriate mount settings for models, outputs, and other directories:</p> <pre><code>docker run -it --rm -v /path/to/models:/app/models -v /path/to/output:/app/output &lt;dockerhub-username&gt;/&lt;repo-name&gt;:&lt;tag&gt;\n</code></pre> </li> </ul> </li> </ol>"},{"location":"legacy/sharing_images/#important-notes","title":"Important Notes:","text":"<ul> <li>Mounted Directories: Ensure you know which directories to mount (e.g., <code>models</code>, <code>input</code>, <code>output</code>) for the environment to function properly.</li> <li>Immutable Environment: The container image is immutable, meaning you cannot change files inside it permanently unless you create a duplicate image.</li> </ul>"},{"location":"legacy/usage/","title":"Usage Overview","text":"<p>Video Demo </p>"},{"location":"legacy/usage/#manager-layout","title":"Manager Layout","text":"<p>ComfyDock has two main sections:</p> <ol> <li>Settings Panel (top)</li> <li>Environments Grid (below)</li> </ol> <p></p>"},{"location":"legacy/usage/#updating-user-settings","title":"Updating User Settings","text":"<ol> <li>Open Settings tab. </li> <li>Configure Defaults:<ul> <li>ComfyUI Path</li> <li>Port</li> <li>Runtime</li> <li>Start command</li> </ul> </li> <li>Click Save.</li> </ol>"},{"location":"legacy/usage/#creating-a-new-environment","title":"Creating a New Environment","text":"<p>Demo Video </p> <ol> <li>Click Create Environment. </li> <li>Fill out fields:<ul> <li>Name: Any text (emojis allowed).</li> <li>Docker Image: Pick a ComfyUI base image from Docker Hub, an image installed locally, or a custom image url using the dialog.<ul> <li>See the Docker Images section below for more details.</li> </ul> </li> <li>Path to ComfyUI: A valid directory on your host machine.<ul> <li>This can be any valid path to a directory on your host machine that you have write and read permissions to:</li> <li>e.g. \u201cC:\\Users\\akatz\\my\\path\\to\\ComfyUI\u201d</li> <li>If you don\u2019t have ComfyUI already installed at the provided location, you will be prompted to install it after hitting \u201ccreate\u201d</li> <li>If you provide a path to a directory containing multiple \u201cComfyUI\u201d folders, the code will select the first directory to use with the environment.</li> </ul> </li> </ul> </li> <li>Select an Environment Type (Default, etc.). <ul> <li>If default is selected, the environment will attempt to \u201cmount\u201d the models, output, and input directories from your existing ComfyUI installation into the environment.</li> <li>Mounted directories can be read and written to by the environment, anything not mounted from the host machine will not be accessible by the environment.</li> <li>You can see how changing the Environment Type directly affects the Mount Config by expanding the Advanced Settings tab.</li> </ul> </li> <li>Click Create. <p>Note: If you have not yet downloaded the selected ComfyUI release image, then you will be prompted to download it on create.</p> </li> </ol>"},{"location":"legacy/usage/#docker-images","title":"Docker Images","text":""},{"location":"legacy/usage/#browsing-docker-hub-images","title":"Browsing Docker Hub Images","text":"<p>When you first open the Docker Image dialog, you will be presented with a list of image tags available on Docker Hub. These images are custom ComfyUI base images that I have created for this tool. You can see the dockerfile and workflow used to build these images here. See the list of available images on dockerhub. The tag format is as follows: <pre><code>&lt;comfyui-release&gt;-py&lt;python-version&gt;-cu&lt;cuda-version&gt;-pt&lt;pytorch-version&gt;\n</code></pre> You can choose options in the separate dropdowns to filter the images by ComfyUI release, Python version, and CUDA version. You can also search for a specific image by name. Images that you have already downloaded will be shown in the list with a green \"Installed\" badge.</p> <p>Note: If you have not yet downloaded the selected image, then you will be prompted to download it on create.</p>"},{"location":"legacy/usage/#using-local-images","title":"Using Local Images","text":"<p>If you have a local image already downloaded, you can select it by tag in the \u201cInstalled\u201d tab. This list will show all images you currently have available on your machine.</p>"},{"location":"legacy/usage/#using-custom-images","title":"Using Custom Images","text":"<p>If you have a custom image you want to use, you can specify it by tag in the \u201cCustom\" tab. This input expects a full Docker Hub image tag string: e.g. <code>akatzai/comfydock-env:v2.6.0-py3.12-cu12.1-ptstable</code>.</p> <p>Note: Currently only custom images from Docker Hub are supported.</p>"},{"location":"legacy/usage/#mount-config","title":"Mount Config","text":"<p>The Mount Config panel now provides granular control over how host directories interact with container paths, with four configurable columns per row:</p> <p></p>"},{"location":"legacy/usage/#columns-explained","title":"Columns Explained","text":"<ol> <li>Override (Checkbox):<ul> <li>Checked:\u00a0Manually specify the exact host path. Useful for non-standard directory locations.</li> <li>Unchecked:\u00a0Automatically generates host path by combining your ComfyUI path with the selected container directory name (e.g., if ComfyUI path is\u00a0<code>C:\\ComfyUI</code>\u00a0and container path is\u00a0<code>models</code>, host path becomes\u00a0<code>C:\\ComfyUI\\models</code>).</li> </ul> </li> <li>Host Path:<ul> <li>The physical directory on your machine that will be connected to the container.</li> <li>Editable directly when Override is checked.</li> <li>Grayed out and auto-generated when Override is unchecked.</li> </ul> </li> <li>Container Path (Dropdown):<ul> <li>Predefined container locations you can map to:<ul> <li><code>/app/ComfyUI/models</code></li> <li><code>/app/ComfyUI/output</code></li> <li><code>/app/ComfyUI/input</code></li> <li><code>/app/ComfyUI/custom_nodes</code></li> <li><code>/app/ComfyUI/user</code></li> </ul> </li> </ul> </li> <li>Mount Action:<ul> <li>Mount:\u00a0Creates live sync between host and container directories (changes reflect immediately in both)</li> <li>Copy:\u00a0Creates a one-time snapshot copy from host to container at environment creation</li> </ul> </li> </ol>"},{"location":"legacy/usage/#key-behaviors","title":"Key Behaviors","text":"<ul> <li>Changing any Mount Config setting automatically switches Environment Type to \"Custom\"</li> <li>Add new mappings with\u00a0Add Directory\u00a0button</li> <li>Delete mappings using the \u274c icon on each row</li> <li>Container paths must be absolute paths starting with\u00a0<code>/</code></li> <li>Host paths follow OS conventions (Windows:\u00a0<code>C:\\path</code>, Linux/macOS:\u00a0<code>/path</code>)</li> </ul>"},{"location":"legacy/usage/#mounting-vs-copying-updated","title":"Mounting vs. Copying (Updated)","text":"<p>When to Use Mount:</p> <ul> <li>Frequently updated resources (models, input/output folders)</li> <li>Shared assets between environments</li> <li>Development/testing scenarios needing real-time changes</li> </ul> <p>When to Use Copy:</p> <ul> <li>Creating immutable snapshots for reproducibility</li> <li>Archiving specific workflow versions</li> <li>Sharing environments with bundled dependencies</li> <li>Sensitive data that shouldn't persist in host directories</li> </ul>"},{"location":"legacy/usage/#important-notes","title":"Important Notes:","text":"<ul> <li>Copied directories become container-only - changes in host won't affect them</li> <li>Mounted custom_nodes directories trigger automatic dependency installation</li> <li>Read-only mounts (available via advanced settings) prevent accidental container modifications</li> </ul>"},{"location":"legacy/usage/#advanced-options","title":"Advanced Options","text":"<ul> <li>Runtime: <code>NVIDIA</code> for GPU or <code>None</code> for CPU.</li> <li>Command: Extra flags for the ComfyUI startup command, e.g. <code>--fast</code> or <code>--lowvram</code>.</li> <li>Port: The web UI port.</li> </ul>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/","title":"How to Grant WSL More RAM or Processors by Editing <code>.wslconfig</code>","text":"<p>If you're running resource-heavy tasks in WSL (Windows Subsystem for Linux) and want to improve performance by granting it more RAM or processors, follow these simple steps:</p>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/#step-1-locate-your-home-directory","title":"Step 1: Locate Your Home Directory","text":"<ol> <li>Open File Explorer on your Windows computer.</li> <li> <p>In the address bar, type:</p> <pre><code>%USERPROFILE%\n</code></pre> </li> <li> <p>Press Enter to go to your home directory.</p> </li> </ol>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/#step-2-create-or-edit-the-wslconfig-file","title":"Step 2: Create or Edit the <code>.wslconfig</code> File","text":"<ol> <li>Check if you already have a file named <code>.wslconfig</code> in your home directory.<ul> <li>If it exists, open it with a text editor like Notepad.</li> <li>If it doesn\u2019t exist:<ul> <li>Right-click and select New &gt; Text Document.</li> <li>Name the file <code>.wslconfig</code> (make sure it doesn\u2019t have <code>.txt</code> at the end).</li> </ul> </li> </ul> </li> </ol>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/#step-3-add-resource-settings","title":"Step 3: Add Resource Settings","text":"<p>Add the following lines to configure WSL resources:</p> <pre><code>[wsl2]\nmemory=4GB        # Limits WSL to 4GB of RAM (adjust as needed)\nprocessors=4       # Grants WSL 4 CPU cores (adjust as needed)\n</code></pre> <ul> <li><code>memory=4GB</code>: Replace <code>4GB</code> with the amount of RAM you want to allocate (e.g., <code>8GB</code>, <code>64GB</code>).</li> <li><code>processors=4</code>: Replace <code>4</code> with the number of CPU cores you want to allocate (e.g., <code>2</code>, <code>6</code>).</li> </ul>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/#step-4-save-the-file","title":"Step 4: Save the File","text":"<ul> <li>Save your changes and close the editor.</li> </ul>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/#step-5-restart-wsl","title":"Step 5: Restart WSL","text":"<ol> <li>Open Command Prompt or PowerShell.</li> <li> <p>Restart WSL with the following command:</p> <pre><code>wsl --shutdown\n</code></pre> </li> <li> <p>Start your WSL distribution again by opening it or running:</p> <pre><code>wsl\n</code></pre> </li> </ol>"},{"location":"legacy/troubleshooting/add_more_ram_to_wsl/#step-6-verify-the-changes","title":"Step 6: Verify the Changes","text":"<ul> <li>Open your WSL terminal.</li> <li> <p>Run the following command to verify the allocated resources:or</p> <pre><code>htop\n</code></pre> <pre><code>cat /proc/meminfo\n</code></pre> </li> </ul> <p>You should see the updated memory and CPU limits applied to your WSL environment.</p> <p>That's it! You\u2019ve successfully updated WSL to use more RAM or processors, boosting its performance for resource-intensive tasks. \ud83c\udf89</p>"},{"location":"legacy/troubleshooting/edit_files_in_container/","title":"Edit Files in Container","text":""},{"location":"legacy/troubleshooting/edit_files_in_container/#using-comfydock-dev-exec","title":"Using ComfyDock Dev Exec","text":"<p>New in ComfyDock CLI: The <code>comfydock dev exec</code> command provides a convenient way to access running containers.</p> <p>The easiest way to access a running container is using the ComfyDock CLI:</p> <pre><code>comfydock dev exec\n</code></pre> <p>This command will:</p> <ol> <li>List all running ComfyDock containers</li> <li>Let you select which container to access</li> <li>Open a shell session as the root user</li> </ol> <p>From inside the container you will have access to ComfyUI files at the default path /app/ComfyUI.</p>"},{"location":"legacy/troubleshooting/edit_files_in_container/#manually-installing-custom-nodes","title":"Manually installing custom nodes","text":"<p>You can run <code>cd custom_nodes/</code> and <code>git clone &lt;path to my custom node repo&gt;</code> to manually add new custom nodes (don't forget to fix the permissions after you clone with <code>chown -R comfy:comfy &lt;my custom node repo&gt;</code>! See below for details).</p>"},{"location":"legacy/troubleshooting/edit_files_in_container/#important-root-user-permissions","title":"\u26a0\ufe0f Important: Root User Permissions","text":"<p>When using <code>comfydock dev exec</code>, you enter the container as the root user. This gives you full access to modify any files, but it comes with an important caveat:</p> <p>Files created or modified as root may become inaccessible to the container's <code>comfy</code> user.</p> <p>This can cause issues because ComfyUI runs as the <code>comfy</code> user (UID 1000) for security reasons. If you create or edit files as root, they will be owned by root (UID 0) and the comfy user may not be able to read or write them.</p>"},{"location":"legacy/troubleshooting/edit_files_in_container/#best-practices-when-using-root-access","title":"Best Practices When Using Root Access","text":"<ol> <li> <p>Check file ownership after making changes: <pre><code>ls -la /path/to/file\n</code></pre></p> </li> <li> <p>Change ownership to comfy user if needed: <pre><code>chown comfy:comfy /path/to/file\n</code></pre></p> </li> <li> <p>For directories, use recursive ownership change: <pre><code>chown -R comfy:comfy /path/to/directory\n</code></pre></p> </li> <li> <p>Alternatively, switch to the comfy user after entering: <pre><code>su comfy\n</code></pre></p> </li> <li> <p>If you encounter permission issues later, use the fix-permissions tool: <pre><code>fix-permissions\n</code></pre></p> </li> </ol>"},{"location":"legacy/troubleshooting/edit_files_in_container/#alternative-methods-for-editing-files","title":"Alternative Methods for Editing Files","text":""},{"location":"legacy/troubleshooting/edit_files_in_container/#editing-files-inside-the-container-with-vscode","title":"Editing Files Inside the Container with VSCode","text":"<p>How to Do This Using VSCode:</p> <ol> <li> <p>Install the \u201cDev Containers\u201d Extension:</p> <p>In VSCode, open the Extensions panel and search for \u201cDev Containers\u201d. Install it.</p> </li> <li> <p>Attach to the Running Container:</p> <p>Make sure your environment\u2019s container is running. In VSCode, press F1 (or open the Command Palette) and type \u201cDev Containers: Attach to Running Container\u201d and select it from menu:</p> <p></p> <p>Select the container you want to work with: (DON\u2019T choose /comfy-env-frontend)</p> <p></p> </li> <li> <p>Open &amp; Edit Files:</p> <p>Once connected, VSCode will show the container\u2019s file system. Open the \u201cFile\u201d menu from the topbar and click \u201cOpen Folder\u201d:</p> <p></p> <p>Now you can navigate to the location of ComfyUI saved in the container by typing \u201c/app/ComfyUI/ in the provided field:</p> <p></p> <p>Click \u201cOK\u201d. Now in the left sidebar you should see the contents of your ComfyUI environment, and can browse folders, open files, and edit them just like you would locally. You can also drag and drop files from your machine directly into folders in the sidebar, which will upload them to the container. Any changes you make here will apply and be saved directly inside the container.</p> </li> <li> <p>Open a Terminal to access the running python environment:</p> <p>You can perform actions such as \u201cgit clone\u201d and \u201cuv pip install\u201d inside of the container environment by opening a new terminal window after connecting:</p> <p></p> <p>You should see this terminal open at the bottom of the VSCode window:</p> <p></p> <p>Now you can perform all your required installation actions just like you would on a local environment.</p> </li> </ol> <p>Why Do This?</p> <ul> <li>Perfect for tweaking custom nodes, environment configs, or any code that isn\u2019t easily accessible from your host machine.</li> <li>Great for development and troubleshooting without having to rebuild or re-mount anything.</li> </ul>"},{"location":"legacy/troubleshooting/filepath_permissions/","title":"Understanding Filepaths in WSL vs. Windows","text":"<p>When running Docker in WSL on Windows, you\u2019re essentially working across two file systems:</p> <ul> <li>Windows File System: Uses familiar drive letters like <code>C:\\</code> or <code>D:\\</code>. Files and folders saved here can be accessed from standard Windows applications and file explorers.</li> <li>WSL File System: Runs within the Linux environment. File paths look like <code>/home/user/...</code> or <code>/mnt/c/...</code> (for accessing Windows files from within WSL).</li> </ul> <p>Key Differences:</p> <ul> <li>WSL paths are case-sensitive (<code>/ComfyUI</code> is different from <code>/comfyui</code>).</li> <li>File access between Windows and WSL can sometimes be slower due to file system translation.</li> </ul>"},{"location":"legacy/troubleshooting/filepath_permissions/#how-to-find-wsl-filepaths-from-windows","title":"How to Find WSL Filepaths from Windows","text":"<p>You can access WSL files directly from Windows Explorer:</p> <ol> <li>Open File Explorer.</li> <li> <p>Enter the following path in the address bar:</p> <pre><code>\\\\wsl.localhost\\&lt;distro-name&gt;\\&lt;path-to-directory&gt;\n</code></pre> <p>Example: <code>\\\\wsl.localhost\\Ubuntu\\home\\akatz\\ComfyUI\\models</code></p> </li> <li> <p>Replace <code>&lt;distro-name&gt;</code> with the name of your installed WSL distribution (e.g., <code>Ubuntu</code> or <code>Debian</code>).</p> </li> <li>Navigate through the folders as needed.</li> </ol>"},{"location":"legacy/troubleshooting/filepath_permissions/#common-issues-and-fixes","title":"Common Issues and Fixes","text":""},{"location":"legacy/troubleshooting/filepath_permissions/#1-permission-denied-errors","title":"1. Permission Denied Errors","text":"<p>Problem: You see an error like <code>Permission denied</code> when trying to access or modify a file or folder inside the container or WSL.</p> <p>Solution:</p> <ol> <li> <p>Check Ownership and Permissions:</p> <ul> <li>Open a WSL terminal.</li> <li>Navigate to the problematic folder using <code>cd /path/to/folder</code>.</li> <li> <p>Run:</p> <pre><code>ls -l\n</code></pre> <p>This shows the owner and permissions of files in the directory.</p> </li> <li> <p>If the owner is not your user (e.g., <code>root</code>), change ownership with:</p> <pre><code>sudo chown -R $USER:$USER /path/to/folder\n</code></pre> </li> </ul> </li> <li> <p>Ensure Write Permissions:</p> <ul> <li> <p>To grant write access, run:</p> <pre><code>chmod -R u+w /path/to/folder\n</code></pre> </li> </ul> </li> </ol>"},{"location":"legacy/troubleshooting/filepath_permissions/#2-files-not-showing-up-in-containers","title":"2. Files Not Showing Up in Containers","text":"<p>Problem: Files or directories mounted from the host are missing inside the container.</p> <p>Solution:</p> <ul> <li>Check Mount Configurations: Ensure the directory you\u2019re trying to mount is correctly specified in the environment\u2019s mount settings.</li> <li>Verify File Paths: Ensure the specified path exists on your host machine and is accessible.</li> <li>Restart the Environment: Sometimes, restarting the Docker container resolves mounting issues.</li> </ul>"},{"location":"legacy/troubleshooting/filepath_permissions/#3-slow-file-access-or-model-loading","title":"3. Slow File Access or Model Loading","text":"<p>Problem: Files stored on your Windows file system load slowly in WSL or the container.</p> <p>Solution:</p> <ul> <li> <p>Move Files to WSL:</p> <ul> <li> <p>Copy the files to your WSL installation directory for faster access. For example:</p> <pre><code>cp /mnt/c/Users/akatz/ComfyUI/models /home/akatz/ComfyUI/models\n</code></pre> </li> <li> <p>Update your environment\u2019s settings to point to the new WSL location.</p> </li> <li>Use WSL\u2019s File Explorer Path: Use <code>\\\\wsl.localhost</code> as described above for direct access.</li> </ul> </li> </ul>"},{"location":"legacy/troubleshooting/filepath_permissions/#4-unable-to-locate-wsl-distro","title":"4. Unable to Locate WSL Distro","text":"<p>Problem: You can\u2019t find your WSL installation or files in File Explorer.</p> <p>Solution:</p> <ol> <li> <p>Open a terminal and list available WSL distros:</p> <pre><code>wsl -l\n</code></pre> <p>This will display a list of installed distros (e.g., <code>Ubuntu</code>, <code>Debian</code>).</p> </li> <li> <p>Ensure the distro is running:</p> <pre><code>wsl -d &lt;distro-name&gt;\n</code></pre> </li> <li> <p>Use the correct path in File Explorer:</p> <pre><code>\\\\wsl.localhost\\&lt;distro-name&gt;\\&lt;path-to-directory&gt;\n</code></pre> </li> </ol>"},{"location":"legacy/troubleshooting/filepath_permissions/#5-files-saved-in-wsl-are-missing-in-windows","title":"5. Files Saved in WSL Are Missing in Windows","text":"<p>Problem: You saved files in WSL, but they\u2019re not visible from Windows.</p> <p>Solution:</p> <ul> <li>Use Windows Explorer: Access the WSL directory using the <code>\\\\wsl.localhost</code> path.</li> <li>Copy Files to Windows:<ul> <li> <p>Use the <code>cp</code> command in WSL to copy files to a Windows-accessible directory:</p> <pre><code>cp /home/akatz/ComfyUI/output /mnt/c/Users/akatz/Documents/ComfyUI_Output\n</code></pre> </li> </ul> </li> </ul>"},{"location":"legacy/troubleshooting/filepath_permissions/#tips-for-avoiding-path-and-permissions-issues","title":"Tips for Avoiding Path and Permissions Issues","text":"<ol> <li>Use Consistent File Naming: Stick to lowercase letters and avoid spaces or special characters in filenames to prevent case sensitivity and parsing errors.</li> <li>Verify Mount Points: Double-check mount configurations when creating or updating environments to ensure the correct paths are specified.</li> <li>Run Commands as Your User: Avoid using <code>sudo</code> unless necessary, as it may cause files to be owned by <code>root</code>, leading to permission issues.</li> <li>Keep WSL Updated: Ensure WSL and Docker are up-to-date to minimize compatibility issues.</li> </ol>"},{"location":"legacy/troubleshooting/installing_custom_nodes_manually/","title":"Installing Nodes Manually","text":""},{"location":"legacy/troubleshooting/installing_custom_nodes_manually/#installing-custom-nodes-manually","title":"Installing Custom Nodes Manually","text":"<ul> <li>You can manually install custom nodes using \u201cgit clone\u201d by using the \u201cexec\u201d feature of docker.</li> <li>Click the settings button on the environment you\u2019d like to install nodes in, and find the \u201ccontainer name\u201d in the About section.</li> <li> <p>In docker desktop find a running container with the matching container name.</p> <p></p> </li> <li> <p>After clicking on the container in docker desktop, navigate to the \u201cexec\u201d tab:</p> <p></p> </li> <li> <p>In the terminal you can run commands that will execute within the running container.</p> </li> <li>Navigate to custom nodes directory by inputting the command:</li> </ul> <pre><code>cd /app/ComfyUI/custom_nodes\n</code></pre> <ul> <li>Then run the following commands, replacing  with the URL of the github custom node repo you\u2019d like to install (e.g. https://github.com/akatz-ai/ComfyUI-AKatz-Nodes): <pre><code> git clone &lt;custom_node_repo&gt;\n cd &lt;custom_node_directory&gt;/\n pip install -r requirements.txt\n</code></pre>"},{"location":"legacy/troubleshooting/other/","title":"Other Issues","text":""},{"location":"legacy/troubleshooting/other/#default-mode-fails-to-install-all-custom-nodes","title":"Default+ Mode Fails To Install All Custom Nodes","text":"<ul> <li>Due to environmental and OS differences, using Default+ mode when creating a new ComfyUI environment may not always correctly install all custom nodes in an existing install location.</li> <li>My current recommendation is to instead try creating a new Default environment, load up the workflows that you normally use, and re-install missing custom nodes through the manager. Once you have a solid working environment, you can clone it whenever making updates or installing new nodes, and if this breaks things you can always delete &amp; clone another from the original environment.</li> </ul>"},{"location":"legacy/troubleshooting/other/#unknown-runtime-specified-nvidia","title":"Unknown runtime specified nvidia","text":"<ul> <li>docker: Error response from daemon: Unknown runtime specified nvidia.:<ul> <li>need to install nvidia-container-toolkit in linux:</li> <li>nvidia-container-toolkit install guide</li> </ul> </li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/","title":"Permission Handling in Docker Containers","text":"<p>Note: These features are available in ComfyDock Docker images v1.1.0 and later.</p> <p>ComfyDock now includes automatic permission checking and fixing tools to help resolve common file access issues when using Docker containers.</p>"},{"location":"legacy/troubleshooting/permission_handling/#automatic-permission-checking","title":"Automatic Permission Checking","text":"<p>When a ComfyDock container starts, it automatically checks for permission issues on:</p> <ul> <li>Bind-mounted volumes</li> <li>ComfyUI directories (models, custom_nodes, input, output, etc.)</li> </ul> <p>The check runs as the <code>comfy</code> user (UID 1000 by default) to ensure all necessary files are accessible.</p>"},{"location":"legacy/troubleshooting/permission_handling/#permission-check-results","title":"Permission Check Results","text":"<p>After the check completes, you'll see one of these messages:</p> <ul> <li>\u2705 No permission issues found - Everything is accessible</li> <li>\u26a0\ufe0f Permission issues detected! - Some files/directories need fixing</li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/#using-the-fix-permissions-tool","title":"Using the Fix-Permissions Tool","text":"<p>If permission issues are detected, you can use the built-in <code>fix-permissions</code> command:</p> <ol> <li> <p>Access the container: <pre><code>comfydock dev exec\n# Select running container from the list\n</code></pre></p> </li> <li> <p>Run the fix command: <pre><code>fix-permissions\n</code></pre></p> </li> <li> <p>Review and confirm:</p> <ul> <li>The tool will show all affected files and directories</li> <li>Current ownership will be displayed</li> <li>You'll be asked to confirm before any changes are made</li> </ul> </li> </ol>"},{"location":"legacy/troubleshooting/permission_handling/#what-the-tool-does","title":"What the Tool Does","text":"<ul> <li>Changes ownership of problematic files to the <code>comfy</code> user (UID:GID 1000:1000)</li> <li>Creates an audit log of all changes</li> <li>Verifies the fixes were successful</li> <li>Only affects files with permission issues (not your entire filesystem)</li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/#example-output","title":"Example Output","text":"<pre><code>=== ComfyDock Permission Fix Tool ===\nThis tool will fix permission issues for the comfy user (UID=1000, GID=1000)\n\n\u26a0\ufe0f  Permission issues found:\n   - Directories: 2\n   - Files: 15\n\nThe following items will have their ownership changed to comfy:comfy (1000:1000):\n\nDirectories:\n  \ud83d\udcc1 /app/ComfyUI/models/checkpoints (current: 501:501)\n  \ud83d\udcc1 /app/ComfyUI/custom_nodes/ComfyUI-Impact-Pack (current: 0:0)\n\nFiles:\n  \ud83d\udcc4 /app/ComfyUI/models/checkpoints/sd_xl_base.safetensors (current: 501:501)\n  ... and 14 more files\n\n\u26a0\ufe0f  WARNING: This will change ownership of the above files and directories!\nDo you want to proceed? (yes/no): yes\n</code></pre>"},{"location":"legacy/troubleshooting/permission_handling/#environment-variables","title":"Environment Variables","text":"<p>You can control permission handling behavior using these environment variables:</p>"},{"location":"legacy/troubleshooting/permission_handling/#permission_check_mode","title":"PERMISSION_CHECK_MODE","text":"<p>Controls when permission checks run:</p> <ul> <li><code>startup</code> - Check on every container start</li> <li><code>once</code>  (default) - Check only on first startup</li> <li><code>never</code> - Disable permission checking</li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/#skip_ownership_fix","title":"SKIP_OWNERSHIP_FIX","text":"<ul> <li>Set to <code>true</code> to skip automatic ownership changes when remapping UID/GID</li> <li>Useful if you want to handle permissions manually</li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/#strict_permissions","title":"STRICT_PERMISSIONS","text":"<ul> <li>Set to <code>true</code> to prevent container startup if permission issues are found</li> <li>Forces you to fix permissions before the container can run</li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/#wanted_uid-wanted_gid","title":"WANTED_UID / WANTED_GID","text":"<ul> <li>Remap the comfy user to different UID/GID values</li> <li>Useful for matching your host user ID</li> <li>Example: <code>WANTED_UID=1001 WANTED_GID=1001</code></li> </ul>"},{"location":"legacy/troubleshooting/permission_handling/#common-permission-scenarios","title":"Common Permission Scenarios","text":""},{"location":"legacy/troubleshooting/permission_handling/#wsl-users","title":"WSL Users","text":"<p>The default UID/GID (1000:1000) matches the first user created in most WSL distributions, so permissions should work automatically.</p>"},{"location":"legacy/troubleshooting/permission_handling/#non-standard-user-ids","title":"Non-Standard User IDs","text":"<p>If your host user has a different UID/GID: 1. Set <code>WANTED_UID</code> and <code>WANTED_GID</code> when creating the environment 2. The container will remap the comfy user on startup 3. Use <code>fix-permissions</code> if needed after remapping</p>"},{"location":"legacy/troubleshooting/permission_handling/#shared-model-directories","title":"Shared Model Directories","text":"<p>When multiple users share model directories: 1. Consider using group permissions on the host 2. Or use <code>fix-permissions</code> to standardize ownership 3. The audit log tracks all changes for accountability</p>"},{"location":"legacy/troubleshooting/permission_handling/#troubleshooting-tips","title":"Troubleshooting Tips","text":"<ol> <li> <p>Permission denied errors persist:</p> <ul> <li>Check if the files are on a network drive or special filesystem</li> <li>Ensure Docker has proper access to the host directories</li> <li>Try running <code>fix-permissions</code> again</li> </ul> </li> <li> <p>Fix-permissions requires sudo:</p> <ul> <li>The command must run as root to change file ownership</li> <li>This is normal and expected behavior</li> </ul> </li> <li> <p>Checking takes too long:</p> <ul> <li>Set <code>PERMISSION_CHECK_MODE=once</code> after initial setup</li> <li>Or use <code>PERMISSION_CHECK_MODE=never</code> if you manage permissions manually</li> </ul> </li> <li> <p>Need to see what was changed:</p> <ul> <li>Check the audit log at <code>/var/log/comfydock/permission-fixes-*.log</code></li> <li>Download it with: <code>docker cp &lt;container_name&gt;:/var/log/comfydock/permission-fixes-*.log ./</code></li> </ul> </li> </ol>"},{"location":"legacy/troubleshooting/slow_model_loading/","title":"Slow Model Loading (Windows Users)","text":"<ul> <li>If you have your model checkpoints currently saved on a windows drive (C:\\, D:\\, etc.), you may notice increased loading times when using the environment manager. This is due to the container running in WSL and needing to transfer data from Windows to Linux during read operations.</li> <li>You can greatly speed up model loading times by creating a ComfyUI installation inside of WSL (you can have the manager perform this automatically for you during environment creation), and then moving or copying models from Windows to the WSL install location.</li> <li>You can navigate to a WSL location from Windows File Explorer by using the prefix path: <code>\\\\wsl.localhost\\&lt;distro name&gt;\\&lt;path&gt;\\&lt;to&gt;\\&lt;directory&gt;</code><ul> <li>e.g. <code>\\\\wsl.localhost\\Ubuntu\\home\\akatz\\ComfyUI\\models</code></li> <li>If you don\u2019t know which distro you have installed, start by pasting <code>\\\\wsl.localhost</code> into your file explorer path bar and navigating using the GUI from there.</li> </ul> </li> </ul>"},{"location":"troubleshooting/common-issues/","title":"Common Issues","text":"<p>Coming soon: Solutions for common ComfyGit problems.</p> <p>This page will cover frequently encountered issues and their solutions.</p>"},{"location":"troubleshooting/common-issues/#installation-issues","title":"Installation issues","text":"<p>Coming soon.</p>"},{"location":"troubleshooting/common-issues/#environment-issues","title":"Environment issues","text":"<p>Coming soon.</p>"},{"location":"troubleshooting/common-issues/#node-installation-issues","title":"Node installation issues","text":"<p>Coming soon.</p> <p>See also:</p> <ul> <li>Dependency Conflicts</li> <li>UV Errors</li> </ul>"},{"location":"user-guide/workspaces/","title":"Managing Workspaces","text":"<p>Learn how to initialize, configure, and manage your ComfyGit workspace.</p>"},{"location":"user-guide/workspaces/#what-is-a-workspace","title":"What is a workspace?","text":"<p>A workspace is the top-level container for all your ComfyGit environments and shared resources. Typically, you have one workspace per machine located at <code>~/comfygit/</code>.</p> <p>See Core Concepts for architectural details.</p>"},{"location":"user-guide/workspaces/#initializing-a-workspace","title":"Initializing a workspace","text":""},{"location":"user-guide/workspaces/#basic-initialization","title":"Basic initialization","text":"<pre><code>cg init\n</code></pre> <p>Creates workspace at <code>~/comfygit/</code> with:</p> <ul> <li><code>environments/</code> - Your ComfyUI environments</li> <li><code>models/</code> - Shared models directory</li> <li><code>comfygit_cache/</code> - Registry cache and model index</li> <li><code>logs/</code> - Application logs</li> <li><code>.metadata/</code> - Workspace configuration</li> </ul>"},{"location":"user-guide/workspaces/#custom-location","title":"Custom location","text":"<pre><code>cg init /path/to/workspace\n</code></pre> <p>Creates workspace at custom path. You'll need to set <code>COMFYGIT_HOME</code> environment variable:</p> <pre><code>export COMFYGIT_HOME=/path/to/workspace\n</code></pre> <p>Add to <code>~/.bashrc</code> or <code>~/.zshrc</code> to persist across sessions.</p>"},{"location":"user-guide/workspaces/#with-existing-models","title":"With existing models","text":"<pre><code>cg init --models-dir /path/to/existing/models\n</code></pre> <p>Points workspace to existing models directory and indexes them automatically.</p>"},{"location":"user-guide/workspaces/#non-interactive-mode","title":"Non-interactive mode","text":"<pre><code>cg init --yes\n</code></pre> <p>Uses all defaults without prompts. Useful for scripting.</p>"},{"location":"user-guide/workspaces/#configuration-management","title":"Configuration management","text":""},{"location":"user-guide/workspaces/#view-configuration","title":"View configuration","text":"<pre><code>cg config --show\n</code></pre> <p>Shows current workspace configuration including:</p> <ul> <li>Active environment</li> <li>Models directory path</li> <li>CivitAI API key (masked)</li> </ul>"},{"location":"user-guide/workspaces/#set-civitai-api-key","title":"Set CivitAI API key","text":"<pre><code>cg config --civitai-key YOUR_API_KEY\n</code></pre> <p>Required for downloading models from CivitAI. Get your key from https://civitai.com/user/account.</p> <p>Why CivitAI API key?</p> <p>ComfyGit uses the CivitAI API to resolve model hashes and find download URLs. Without an API key, you can still use CivitAI URLs directly but automatic resolution won't work.</p>"},{"location":"user-guide/workspaces/#clear-civitai-key","title":"Clear CivitAI key","text":"<pre><code>cg config --civitai-key \"\"\n</code></pre>"},{"location":"user-guide/workspaces/#registry-management","title":"Registry management","text":"<p>ComfyGit uses the official ComfyUI registry to look up custom nodes.</p>"},{"location":"user-guide/workspaces/#check-registry-status","title":"Check registry status","text":"<pre><code>cg registry status\n</code></pre> <p>Shows:</p> <ul> <li>Last update time</li> <li>Number of cached nodes</li> <li>Registry data location</li> </ul>"},{"location":"user-guide/workspaces/#update-registry-data","title":"Update registry data","text":"<pre><code>cg registry update\n</code></pre> <p>Downloads latest registry data from GitHub. Run this periodically to get newly published nodes.</p> <p>When to update</p> <ul> <li>After installing ComfyGit (done automatically during <code>cg init</code>)</li> <li>When a node isn't found (registry might be outdated)</li> <li>Monthly maintenance</li> </ul>"},{"location":"user-guide/workspaces/#logging-and-debugging","title":"Logging and debugging","text":""},{"location":"user-guide/workspaces/#view-logs","title":"View logs","text":"<pre><code># Show last 200 lines (default)\ncg debug\n\n# Show last 50 lines\ncg debug -n 50\n\n# Show all logs\ncg debug --full\n\n# Filter by level\ncg debug --level ERROR\n\n# Show workspace logs instead of environment logs\ncg debug --workspace\n</code></pre> <p>Logs are stored in <code>workspace/logs/</code> and include:</p> <ul> <li>Environment operations (create, delete, sync)</li> <li>Node installations</li> <li>Model operations</li> <li>Error stack traces</li> </ul> <p>Debugging workflow</p> <ol> <li>Run failing command</li> <li>Check logs: <code>cg debug -n 100</code></li> <li>Look for ERROR or WARNING entries</li> <li>Include relevant log lines in bug reports</li> </ol>"},{"location":"user-guide/workspaces/#workspace-structure","title":"Workspace structure","text":"<p>After initialization, your workspace looks like:</p> <pre><code>~/comfygit/\n\u251c\u2500\u2500 environments/\n\u2502   \u251c\u2500\u2500 my-project/           # Environment 1\n\u2502   \u251c\u2500\u2500 testing/              # Environment 2\n\u2502   \u2514\u2500\u2500 production/           # Environment 3\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 checkpoints/          # SD checkpoints\n\u2502   \u251c\u2500\u2500 loras/                # LoRA files\n\u2502   \u251c\u2500\u2500 vae/                  # VAE models\n\u2502   \u2514\u2500\u2500 ...                   # Other model types\n\u251c\u2500\u2500 comfygit_cache/\n\u2502   \u251c\u2500\u2500 registry_cache.db     # Registry data\n\u2502   \u251c\u2500\u2500 model_index.db        # Model index\n\u2502   \u2514\u2500\u2500 workflow_cache.db     # Workflow analysis cache\n\u251c\u2500\u2500 logs/\n\u2502   \u251c\u2500\u2500 workspace.log         # Workspace-level logs\n\u2502   \u2514\u2500\u2500 environments/         # Per-environment logs\n\u2514\u2500\u2500 .metadata/\n    \u2514\u2500\u2500 workspace.json        # Workspace config\n</code></pre>"},{"location":"user-guide/workspaces/#multiple-workspaces","title":"Multiple workspaces","text":"<p>You can have multiple workspaces by using <code>COMFYGIT_HOME</code>:</p> <pre><code># Work workspace\nexport COMFYGIT_HOME=~/comfygit-work\ncg init\ncg create client-project\n\n# Personal workspace\nexport COMFYGIT_HOME=~/comfygit-personal\ncg init\ncg create experiments\n</code></pre> <p>Switch between them by changing the environment variable.</p>"},{"location":"user-guide/workspaces/#best-practices","title":"Best practices","text":"<p>Recommended</p> <ul> <li>One workspace per machine - Simplifies management</li> <li>Point to existing models - Avoid duplicating large files</li> <li>Update registry monthly - Get latest node information</li> <li>Set CivitAI key early - Enable automatic model resolution</li> </ul> <p>Avoid</p> <ul> <li>Multiple workspaces - Unless you have specific isolation needs</li> <li>Nested workspaces - Don't create workspace inside another workspace</li> <li>Manual .metadata edits - Use <code>cg config</code> commands instead</li> </ul>"},{"location":"user-guide/workspaces/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/workspaces/#workspace-not-initialized","title":"\"Workspace not initialized\"","text":"<p>Problem: Running commands shows workspace not found error</p> <p>Solution: <pre><code># Initialize workspace\ncg init\n\n# Or set COMFYGIT_HOME to existing workspace\nexport COMFYGIT_HOME=/path/to/workspace\n</code></pre></p>"},{"location":"user-guide/workspaces/#registry-data-missing","title":"Registry data missing","text":"<p>Problem: Node resolution fails, workflow resolve doesn't work</p> <p>Solution: <pre><code>cg registry update\n</code></pre></p>"},{"location":"user-guide/workspaces/#models-directory-not-found","title":"Models directory not found","text":"<p>Problem: Models aren't being indexed</p> <p>Solution: <pre><code># Point to correct directory\ncg model index dir /path/to/models\n\n# Sync index\ncg model index sync\n</code></pre></p>"},{"location":"user-guide/workspaces/#next-steps","title":"Next steps","text":"<ul> <li>Create environments (Coming soon)</li> <li>Model management (Coming soon)</li> <li>Environment version control (Coming soon)</li> </ul>"},{"location":"user-guide/collaboration/export-import/","title":"Export and Import","text":"<p>Share complete ComfyUI environments as portable tarballs that include configuration, workflows, and development nodes.</p>"},{"location":"user-guide/collaboration/export-import/#overview","title":"Overview","text":"<p>Export/import allows you to package an entire environment into a single <code>.tar.gz</code> file that can be shared offline. This is ideal for:</p> <ul> <li>One-time sharing: Send environments to colleagues or clients</li> <li>Backup and archival: Save environment snapshots for later restoration</li> <li>CI/CD artifacts: Deploy tested environments to production</li> <li>Template distribution: Share starter environments with the community</li> </ul> <p>Unlike git remotes (which require continuous sync), export creates a self-contained package that works offline.</p>"},{"location":"user-guide/collaboration/export-import/#exporting-an-environment","title":"Exporting an Environment","text":"<p>Export packages your environment configuration, workflows, and development nodes into a tarball.</p>"},{"location":"user-guide/collaboration/export-import/#basic-export","title":"Basic Export","text":"<p>Export the active environment:</p> <pre><code>cg export\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udce6 Exporting environment: my-env\n\n\u2705 Export complete: my-env_export_20250109.tar.gz (2.3 MB)\n\nShare this file to distribute your complete environment!\n</code></pre> <p>By default, the tarball is created in the current directory with a timestamp.</p>"},{"location":"user-guide/collaboration/export-import/#custom-output-path","title":"Custom Output Path","text":"<p>Specify where to save the export:</p> <pre><code>cg export ~/exports/my-workflow.tar.gz\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#export-specific-environment","title":"Export Specific Environment","text":"<p>Use the <code>-e</code> flag to export a non-active environment:</p> <pre><code>cg -e production export production.tar.gz\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#what-gets-exported","title":"What Gets Exported","text":"<p>The tarball contains everything needed to recreate your environment:</p> <pre><code>environment_export.tar.gz\n\u251c\u2500\u2500 pyproject.toml          # Environment configuration\n\u2502                           # - ComfyUI version\n\u2502                           # - Custom nodes list\n\u2502                           # - Model metadata\n\u2502                           # - Workflow dependencies\n\u251c\u2500\u2500 uv.lock                 # Locked Python dependencies\n\u251c\u2500\u2500 .python-version         # Python version constraint\n\u251c\u2500\u2500 workflows/              # All committed workflows\n\u2502   \u251c\u2500\u2500 workflow1.json\n\u2502   \u2514\u2500\u2500 workflow2.json\n\u2514\u2500\u2500 dev_nodes/              # Development node source code\n    \u2514\u2500\u2500 my-custom-node/     # (Only nodes with source=\"development\")\n</code></pre> <p>Only Committed Content</p> <p>Export only includes committed workflows and configuration. Uncommitted changes are excluded to ensure consistency.</p>"},{"location":"user-guide/collaboration/export-import/#export-validation","title":"Export Validation","text":"<p>ComfyGit validates your export to ensure recipients can recreate the environment successfully.</p>"},{"location":"user-guide/collaboration/export-import/#model-source-check","title":"Model Source Check","text":"<p>Before exporting, ComfyGit checks if all models have download sources:</p> <pre><code>cg export\n</code></pre> <p>Output (showing first 3 models):</p> <pre><code>\ud83d\udce6 Exporting environment: my-env\n\n\u26a0\ufe0f  Export validation:\n\n5 model(s) have no source URLs.\n\n  \u2022 sd_xl_base_1.0.safetensors\n    Used by: txt2img, img2img\n\n  \u2022 control_v11p_sd15_openpose.pth\n    Used by: pose_workflow\n\n  \u2022 vae-ft-mse-840000.safetensors\n    Used by: txt2img\n\n  ... and 2 more\n\n\u26a0\ufe0f  Recipients won't be able to download these models automatically.\n   Add sources: cg model add-source\n\nContinue export? (y/N) or (s)how all models:\n</code></pre> <p>Progressive Disclosure:</p> <p>If more than 3 models are missing sources, ComfyGit shows only the first 3 initially. Type <code>s</code> to expand and view all models before making a decision.</p> <p>After typing 's':</p> <pre><code>  \u2022 sd_xl_base_1.0.safetensors\n    Used by: txt2img, img2img\n\n  \u2022 control_v11p_sd15_openpose.pth\n    Used by: pose_workflow\n\n  \u2022 vae-ft-mse-840000.safetensors\n    Used by: txt2img\n\n  \u2022 lora_style.safetensors\n    Used by: portrait_workflow\n\n  \u2022 upscaler_4x.pth\n    Used by: img2img\n\n\u26a0\ufe0f  Recipients won't be able to download these models automatically.\n   Add sources: cg model add-source\n\nContinue export? (y/N):\n</code></pre> <p>Options:</p> <ul> <li>Add sources first (recommended): Use <code>cg model add-source</code> to add download URLs</li> <li>Continue anyway (type <code>y</code>): Export proceeds, recipients will need to manually provide the models</li> <li>Show all models (type <code>s</code>): Expand the list to see all models without sources (only available if more than 3)</li> <li>Cancel (type <code>N</code> or anything else): Abort export and fix issues first</li> <li>Skip validation: Use <code>--allow-issues</code> flag to bypass the check entirely</li> </ul> <p>Understanding the Prompt</p> <ul> <li>If you have 3 or fewer models without sources, you'll only see <code>(y/N)</code></li> <li>If you have more than 3, you'll see <code>(y/N) or (s)how all models</code> to expand the list first</li> </ul>"},{"location":"user-guide/collaboration/export-import/#adding-model-sources","title":"Adding Model Sources","text":"<p>Add download URLs so recipients can auto-download models:</p> <pre><code># Interactive mode - walks through all models without sources\ncg model add-source\n\n# Direct mode - add source to specific model\ncg model add-source sd_xl_base &lt;civitai-url&gt;\n</code></pre> <p>Interactive Mode</p> <p>Interactive mode is the fastest way to add sources for multiple models. It shows each model and prompts for a URL.</p> <p>See Adding Model Sources for details.</p>"},{"location":"user-guide/collaboration/export-import/#uncommitted-changes-check","title":"Uncommitted Changes Check","text":"<p>Export fails if you have uncommitted workflows or git changes:</p> <pre><code>\u2717 Cannot export: uncommitted changes detected\n\n\ud83d\udccb Uncommitted workflows:\n  \u2022 new_workflow\n  \u2022 modified_workflow\n\n\ud83d\udca1 Commit first:\n   cg commit -m 'Pre-export checkpoint'\n</code></pre> <p>This ensures the export matches a specific version in your history.</p> <p>Fix:</p> <pre><code>cg commit -m \"Prepare for export\"\ncg export\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#importing-an-environment","title":"Importing an Environment","text":"<p>Import creates a new environment from a tarball or git repository.</p>"},{"location":"user-guide/collaboration/export-import/#import-from-tarball","title":"Import from Tarball","text":"<p>Import a local tarball file:</p> <pre><code>cg import environment.tar.gz\n</code></pre> <p>Interactive prompts:</p> <pre><code>\ud83d\udce6 Importing environment from environment.tar.gz\n\nEnvironment name: my-imported-env\n\nModel download strategy:\n  1. all      - Download all models with sources\n  2. required - Download only required models\n  3. skip     - Skip all downloads (can resolve later)\nChoice (1-3) [1]: 1\n\n\ud83d\udd27 Initializing environment...\n   Cloning ComfyUI v0.2.7\n   Configuring PyTorch backend: cu128\n   Installing Python dependencies\n   Initializing git repository...\n\n\ud83d\udcdd Setting up workflows...\n   Copied: txt2img\n\n\ud83d\udce6 Syncing custom nodes...\n   Installed: rgthree-comfy\n\n\ud83d\udd04 Resolving workflows (all strategy)...\n\n\u2b07\ufe0f  Downloading 3 model(s)...\n\n[1/3] sd_xl_base_1.0.safetensors\nDownloading... 6533.8 MB / 6633.5 MB (98%)\n  \u2713 Complete\n\n[2/3] control_v11p_sd15_openpose.pth\nDownloading... 729.4 MB / 729.4 MB (100%)\n  \u2713 Complete\n\n\u2705 Downloaded 2 model(s)\n\n\u2705 Import complete: my-imported-env\n   Environment ready to use!\n\nActivate with: cg use my-imported-env\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#import-from-git-repository","title":"Import from Git Repository","text":"<p>Import directly from a git URL:</p> <pre><code>cg import https://github.com/user/comfy-workflow\n</code></pre> <p>This clones the repository to the environment's <code>.cec</code> directory, preserving the git history and remote connection for future updates.</p> <p>Specify branch or tag:</p> <pre><code>cg import https://github.com/user/comfy-workflow --branch v1.0\n</code></pre> <p>Git Import vs Tarball Import:</p> <ul> <li>Git imports preserve the <code>.git</code> directory with remote tracking - you can push/pull changes later</li> <li>Tarball imports create a fresh git repository with no remote - ideal for one-time distributions</li> </ul> <p>Remote Preservation</p> <p>When importing from git, the original remote is preserved. You can push updates back to the source repository or pull new changes. See Git Remotes for collaboration workflows.</p>"},{"location":"user-guide/collaboration/export-import/#non-interactive-import","title":"Non-Interactive Import","text":"<p>Skip prompts by providing all options via flags:</p> <pre><code>cg import environment.tar.gz \\\n    --name production \\\n    --torch-backend cu128 \\\n    --use\n</code></pre> <p>Flags:</p> <ul> <li><code>--name NAME</code>: Environment name (skip prompt)</li> <li><code>--torch-backend BACKEND</code>: PyTorch backend (auto, cpu, cu128, cu126, rocm6.3, xpu)</li> <li><code>--use</code>: Set as active environment immediately after import (changes output message)</li> </ul> <p>With <code>--use</code> flag:</p> <pre><code>cg import environment.tar.gz --name production --use\n</code></pre> <p>Completion message changes to:</p> <pre><code>\u2705 Import complete: production\n   Environment ready to use!\n   'production' set as active environment\n</code></pre> <p>No need to run <code>cg use production</code> separately - you can start using it immediately.</p>"},{"location":"user-guide/collaboration/export-import/#import-internals-performance","title":"Import Internals &amp; Performance","text":"<p>Understanding what happens during import helps you optimize the process and troubleshoot issues.</p>"},{"location":"user-guide/collaboration/export-import/#comfyui-caching","title":"ComfyUI Caching","text":"<p>ComfyGit caches ComfyUI installations to speed up imports and environment creation.</p> <p>First import of a ComfyUI version:</p> <pre><code>\ud83d\udd27 Initializing environment...\n   Cloning ComfyUI v0.2.7\n</code></pre> <p>ComfyGit clones from GitHub and caches the result by commit SHA.</p> <p>Subsequent imports with the same version:</p> <pre><code>\ud83d\udd27 Initializing environment...\n   Restoring ComfyUI v0.2.7 from cache...\n</code></pre> <p>This is significantly faster - a simple directory copy instead of a git clone.</p> <p>Cache behavior:</p> <ul> <li>Cache location: <code>~/comfygit/cache/comfyui/</code></li> <li>Keyed by: ComfyUI version (release tag, branch, or commit SHA)</li> <li>Shared across: All environments in the workspace</li> <li>Automatic: No configuration needed</li> </ul> <p>Performance Boost</p> <p>The first import of ComfyUI v0.2.7 might take 30-60 seconds to clone. Subsequent imports using the same version complete in 2-5 seconds.</p>"},{"location":"user-guide/collaboration/export-import/#pytorch-backend-management","title":"PyTorch Backend Management","text":"<p>When importing with the <code>--torch-backend</code> flag, ComfyGit intelligently manages PyTorch:</p> <p>Automatic stripping (prevents conflicts):</p> <ol> <li>Removes imported PyTorch index URLs from <code>pyproject.toml</code></li> <li>Strips PyTorch package source configurations</li> <li>Clears PyTorch version constraints</li> </ol> <p>Then installs fresh:</p> <ol> <li>Creates Python virtual environment</li> <li>Installs PyTorch packages with specified backend (cu128, cpu, rocm, etc.)</li> <li>Detects installed backend from package version</li> <li>Updates <code>pyproject.toml</code> with correct backend configuration</li> <li>Locks versions to prevent drift</li> </ol> <p>Why this matters:</p> <p>If you export an environment on a CUDA 12.8 system and import on a Mac (CPU only), the imported PyTorch config would fail. ComfyGit strips the old config and installs the right backend for your system.</p>"},{"location":"user-guide/collaboration/export-import/#automatic-git-commits","title":"Automatic Git Commits","text":"<p>All import changes are automatically committed to git:</p> <ul> <li>Workflow files copied to <code>ComfyUI/user/default/workflows/</code></li> <li>Custom nodes installed and synced</li> <li>Models downloaded and resolved</li> <li>PyTorch backend configured in <code>pyproject.toml</code></li> </ul> <p>Final commit message: <code>\"Imported environment\"</code></p> <p>This ensures the imported environment starts with a clean, committed state ready for development.</p>"},{"location":"user-guide/collaboration/export-import/#model-download-strategies","title":"Model Download Strategies","text":"<p>During import, you choose how to handle model downloads:</p>"},{"location":"user-guide/collaboration/export-import/#strategy-all-default","title":"Strategy: All (Default)","text":"<p>Downloads all models that have source URLs:</p> <pre><code>Choice (1-3) [1]: 1\n</code></pre> <ul> <li>Downloads: All models with sources</li> <li>Skips: Models without sources (creates download intents)</li> <li>Best for: Complete environment setup</li> </ul>"},{"location":"user-guide/collaboration/export-import/#strategy-required","title":"Strategy: Required","text":"<p>Downloads only models marked as \"required\":</p> <pre><code>Choice (1-3) [1]: 2\n</code></pre> <ul> <li>Downloads: Required models only</li> <li>Skips: Flexible and optional models</li> <li>Best for: Quick setup, storage constraints</li> </ul> <p>Model criticality is set using <code>cg workflow model importance</code>.</p>"},{"location":"user-guide/collaboration/export-import/#strategy-skip","title":"Strategy: Skip","text":"<p>Skips all downloads during import:</p> <pre><code>Choice (1-3) [1]: 3\n</code></pre> <ul> <li>Downloads: None</li> <li>Creates: Download intents for all models</li> <li>Best for: Offline imports, manual model management</li> </ul> <p>You can resolve downloads later:</p> <pre><code>cg -e my-env workflow resolve --all\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#import-analysis-preview","title":"Import Analysis Preview","text":"<p>Before importing, ComfyGit analyzes what will be installed.</p>"},{"location":"user-guide/collaboration/export-import/#import-breakdown","title":"Import Breakdown","text":"<p>The import process shows what will be set up in real-time:</p> <pre><code>\ud83d\udd27 Initializing environment...\n   Cloning ComfyUI v0.2.7\n   Configuring PyTorch backend: cu128\n   Installing Python dependencies\n   Initializing git repository...\n</code></pre> <p>During dependency installation, you'll see each group being installed with inline progress:</p> <pre><code>      Installing main... \u2713\n      Installing torch-cu128... \u2713\n      Installing comfyui... \u2713\n      Installing optional (optional)... \u2717\n</code></pre> <p>Terminal Output Format</p> <p>The check mark (\u2713) or X (\u2717) appears on the same line as \"Installing...\" after the installation completes. The <code>(optional)</code> marker indicates non-critical dependency groups.</p> <p>If optional groups fail:</p> <pre><code>\u26a0\ufe0f  Some optional dependency groups failed to install:\n   \u2717 optional\n\nSome functionality may be degraded or some nodes may not work properly.\nThe environment will still function with reduced capabilities.\n</code></pre> <p>If all groups succeed:</p> <pre><code>\u2705 Import complete: my-imported-env\n   Environment ready to use!\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#dependency-group-failures","title":"Dependency Group Failures","text":"<p>Optional dependency groups may fail without breaking the import:</p> <ul> <li>Main groups (main, torch-*, comfyui): Must succeed or import fails</li> <li>Optional groups: Allowed to fail, shows warning but import continues</li> </ul> <p>Common reasons for failures:</p> <ul> <li>Platform-specific packages not available (e.g., Windows-only package on Linux)</li> <li>Network issues downloading packages</li> <li>Version conflicts in optional dependencies</li> <li>Missing system libraries (e.g., CUDA libraries for GPU packages)</li> </ul> <p>The environment remains usable with reduced functionality when optional groups fail.</p>"},{"location":"user-guide/collaboration/export-import/#development-nodes","title":"Development Nodes","text":"<p>Export includes source code for development nodes (nodes with <code>source = \"development\"</code>).</p>"},{"location":"user-guide/collaboration/export-import/#what-gets-included","title":"What Gets Included","text":"<p>Development node source code is bundled in the tarball:</p> <pre><code>dev_nodes/\n\u2514\u2500\u2500 my-custom-node/\n    \u251c\u2500\u2500 __init__.py\n    \u251c\u2500\u2500 nodes.py\n    \u2514\u2500\u2500 requirements.txt\n</code></pre> <p>Filtering:</p> <ul> <li>Excludes <code>__pycache__/</code> directories</li> <li>Excludes <code>.pyc</code> files</li> <li>Includes all other source files</li> </ul>"},{"location":"user-guide/collaboration/export-import/#import-behavior","title":"Import Behavior","text":"<p>During import, development nodes are:</p> <ol> <li>Extracted to <code>.cec/dev_nodes/</code></li> <li>Symlinked to <code>ComfyUI/custom_nodes/</code></li> <li>Dependencies installed from <code>requirements.txt</code></li> </ol> <p>This allows sharing custom nodes under development without publishing to a registry.</p>"},{"location":"user-guide/collaboration/export-import/#advanced-import-behaviors","title":"Advanced Import Behaviors","text":"<p>ComfyGit performs several automatic operations during import to ensure environment consistency and cross-platform compatibility.</p>"},{"location":"user-guide/collaboration/export-import/#automatic-configuration-adjustments","title":"Automatic Configuration Adjustments","text":"<p>PyTorch Configuration Stripping:</p> <p>When you specify <code>--torch-backend</code>, ComfyGit automatically:</p> <ol> <li>Removes all imported PyTorch configuration from the tarball/git repository:</li> <li>PyTorch index URLs (e.g., <code>https://download.pytorch.org/whl/cu128</code>)</li> <li>Package source specifications for torch, torchvision, torchaudio</li> <li> <p>Version constraints that might conflict with target platform</p> </li> <li> <p>Installs fresh PyTorch for your target platform:</p> </li> <li>Uses the backend you specify (cu128, cpu, rocm, etc.)</li> <li>Detects actual installed versions</li> <li>Locks those versions in <code>pyproject.toml</code></li> <li>Configures correct index URLs and sources</li> </ol> <p>Why this happens:</p> <p>If you export on a Linux machine with CUDA 12.8 and import on a Mac, the CUDA-specific PyTorch won't work. ComfyGit strips the old config and installs the correct backend automatically.</p>"},{"location":"user-guide/collaboration/export-import/#git-repository-initialization","title":"Git Repository Initialization","text":"<p>For tarball imports:</p> <ul> <li>Creates fresh <code>.git</code> repository in <code>.cec/</code></li> <li>No remote configured (one-time distribution)</li> <li>Initial commit message: <code>\"Imported environment\"</code></li> </ul> <p>For git imports:</p> <ul> <li>Preserves existing <code>.git</code> directory with full history</li> <li>Keeps remote tracking (you can push/pull)</li> <li>Ensures <code>.gitignore</code> is properly configured</li> <li>Adds commit: <code>\"Imported environment\"</code> with all setup changes</li> </ul>"},{"location":"user-guide/collaboration/export-import/#automatic-commits","title":"Automatic Commits","text":"<p>All import operations are committed automatically:</p> <pre><code>Imported environment\n\n- Copied workflow files to ComfyUI/user/default/workflows/\n- Installed X custom nodes\n- Downloaded Y models\n- Configured PyTorch backend: cu128\n</code></pre> <p>This ensures:</p> <ul> <li>Clean starting state</li> <li>All changes tracked from the beginning</li> <li>Easy rollback if needed</li> <li>Clear history of what was imported</li> </ul>"},{"location":"user-guide/collaboration/export-import/#workflow-file-handling","title":"Workflow File Handling","text":"<p>During import, workflow JSON files are:</p> <ol> <li>Extracted from tarball to <code>.cec/workflows/</code></li> <li>Copied to ComfyUI runtime at <code>ComfyUI/user/default/workflows/</code></li> <li>Tracked in git automatically</li> </ol> <p>Both locations are kept in sync - the <code>.cec/workflows/</code> directory is the source of truth, and ComfyUI's workflows directory is kept updated.</p>"},{"location":"user-guide/collaboration/export-import/#model-download-intent-preservation","title":"Model Download Intent Preservation","text":"<p>If models can't be downloaded during import (missing sources, network issues, strategy is \"skip\"):</p> <ul> <li>ComfyGit creates download intents in <code>pyproject.toml</code></li> <li>These track which models are needed but not yet available</li> <li>You can resolve them later with <code>cg workflow resolve</code></li> <li>Model metadata (filename, hash, relative path, sources) is preserved</li> </ul> <p>Example download intent:</p> <pre><code>[[tool.comfygit.workflows.txt2img.models]]\nfilename = \"sd_xl_base_1.0.safetensors\"\nhash = \"abc123...\"\nrelative_path = \"checkpoints/sd_xl_base_1.0.safetensors\"\nstatus = \"unresolved\"\nsources = [\n    { type = \"civitai\", url = \"https://civitai.com/...\" }\n]\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#development-node-extraction","title":"Development Node Extraction","text":"<p>Development nodes (nodes with <code>source = \"development\"</code>) are:</p> <ol> <li>Extracted to <code>.cec/dev_nodes/&lt;node-name&gt;/</code></li> <li>Symlinked to <code>ComfyUI/custom_nodes/&lt;node-name&gt;</code></li> <li>Dependencies installed from their <code>requirements.txt</code> if present</li> <li>Treated as local code (not managed via git/registry)</li> </ol> <p>This allows distributing custom nodes under active development without publishing them to the ComfyUI registry.</p>"},{"location":"user-guide/collaboration/export-import/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/collaboration/export-import/#models-without-sources","title":"Models Without Sources","text":"<p>Problem: Export warns about models without download URLs.</p> <pre><code>\u26a0\ufe0f  3 model(s) have no source URLs.\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Add sources (recommended):    <pre><code>cg model add-source\n</code></pre></p> </li> <li> <p>Export anyway:    <pre><code>cg export --allow-issues\n</code></pre></p> </li> </ol> <p>Recipients will need to manually provide the models.</p> <ol> <li>Document manual steps: Include instructions for recipients to download models manually.</li> </ol>"},{"location":"user-guide/collaboration/export-import/#civitai-authentication-errors","title":"CivitAI Authentication Errors","text":"<p>Problem: Import fails with <code>401 Unauthorized</code> for CivitAI downloads.</p> <pre><code>\u2717 Failed: 401 Unauthorized\n</code></pre> <p>Solution: Add your CivitAI API key:</p> <pre><code>cg config --civitai-key &lt;your-api-key&gt;\n</code></pre> <p>Get your key from: https://civitai.com/user/account</p> <p>Then retry the import or resolve manually:</p> <pre><code>cg -e my-env workflow resolve --all\n</code></pre>"},{"location":"user-guide/collaboration/export-import/#download-failures","title":"Download Failures","text":"<p>Problem: Some models fail to download during import.</p> <pre><code>\u26a0\ufe0f  2 model(s) failed:\n   \u2022 sd_xl_base_1.0.safetensors: Connection timeout\n   \u2022 controlnet.pth: 404 Not Found\n</code></pre> <p>What Happens:</p> <ul> <li>Failed downloads are saved as \"download intents\"</li> <li>Environment import continues</li> <li>Workflows may be incomplete</li> </ul> <p>Solutions:</p> <ol> <li> <p>Retry download:    <pre><code>cg -e my-env workflow resolve &lt;workflow-name&gt;\n</code></pre></p> </li> <li> <p>Check model sources:    <pre><code>cg -e my-env model index show sd_xl_base\n</code></pre></p> </li> <li> <p>Manual download: Download the model manually and place it in the models directory, then sync:    <pre><code>cg model index sync\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/export-import/#import-fails-mid-process","title":"Import Fails Mid-Process","text":"<p>Problem: Import fails during environment setup.</p> <p>What Happens:</p> <ul> <li>Partial environment is created</li> <li>May have incomplete dependencies or nodes</li> </ul> <p>Solution:</p> <ol> <li> <p>Delete the failed environment:    <pre><code>cg delete &lt;env-name&gt;\n</code></pre></p> </li> <li> <p>Check error message for specific cause (network, disk space, etc.)</p> </li> <li> <p>Retry import after fixing the issue:    <pre><code>cg import environment.tar.gz\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/export-import/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/collaboration/export-import/#before-exporting","title":"Before Exporting","text":"<ol> <li> <p>Commit all changes: Ensure workflows are committed    <pre><code>cg commit -m \"Finalize environment for export\"\n</code></pre></p> </li> <li> <p>Add model sources: Use interactive mode to add all sources    <pre><code>cg model add-source\n</code></pre></p> </li> <li> <p>Test the export: Import it locally to verify completeness    <pre><code>cg export test.tar.gz\ncg import test.tar.gz --name test-import\n</code></pre></p> </li> <li> <p>Document custom setup: If models can't be auto-downloaded, provide manual instructions</p> </li> </ol>"},{"location":"user-guide/collaboration/export-import/#for-recipients","title":"For Recipients","text":"<ol> <li> <p>Review import analysis: Check what will be installed during import preview</p> </li> <li> <p>Choose appropriate strategy: Select model download strategy based on needs</p> </li> <li>Full setup: Use \"all\"</li> <li>Quick start: Use \"required\"</li> <li> <p>Offline/manual: Use \"skip\"</p> </li> <li> <p>Verify hardware compatibility: Check PyTorch backend matches your GPU    <pre><code>cg import env.tar.gz --torch-backend cu128\n</code></pre></p> </li> <li> <p>Check disk space: Imports can be large (models + dependencies)</p> </li> </ol>"},{"location":"user-guide/collaboration/export-import/#naming-conventions","title":"Naming Conventions","text":"<ul> <li>Descriptive names: <code>project-v1.0-export.tar.gz</code></li> <li>Version tags: Include version or date for clarity</li> <li>Environment type: Indicate purpose (dev, prod, test)</li> </ul>"},{"location":"user-guide/collaboration/export-import/#next-steps","title":"Next Steps","text":"<ul> <li>Git Remotes - Continuous collaboration with push/pull</li> <li>Team Workflows - Best practices for team collaboration</li> <li>Adding Model Sources - Ensure models are downloadable</li> <li>Workflow Resolution - Resolve missing dependencies</li> </ul>"},{"location":"user-guide/collaboration/export-import/#summary","title":"Summary","text":"<p>Export/import enables offline environment sharing with intelligent automation:</p> <p>Export Features:</p> <ul> <li>Validation ensures recipients can recreate environments (uncommitted changes, model sources)</li> <li>Progressive disclosure for models without sources - view first 3, expand to see all</li> <li>Tarball packaging includes pyproject.toml, workflows, development nodes, and dependency locks</li> <li>Committed content only - ensures consistency and reproducibility</li> </ul> <p>Import Features:</p> <ul> <li>Dual source support - import from tarballs or git URLs</li> <li>ComfyUI caching speeds up subsequent imports (30-60s \u2192 2-5s for same version)</li> <li>Model strategies control download behavior (all/required/skip)</li> <li>PyTorch backend management strips imported config and installs correct backend for target platform</li> <li>Development nodes extracted and symlinked automatically</li> <li>Download intent preservation tracks models that couldn't be downloaded for later resolution</li> </ul> <p>Automatic Behaviors:</p> <ul> <li>Git repository initialization (fresh for tarballs, preserved for git imports)</li> <li>Automatic commit of all import changes</li> <li>PyTorch configuration stripping to prevent platform conflicts</li> <li>Workflow file copying to ComfyUI runtime directory</li> <li>Dependency group installation with optional failure handling</li> </ul> <p>Use Cases:</p> <ul> <li>One-time sharing: Send environments to colleagues or clients (use tarballs)</li> <li>Team collaboration: Share via git with preserved remotes for push/pull workflows</li> <li>Backup and archival: Save environment snapshots for later restoration</li> <li>CI/CD artifacts: Deploy tested environments to production</li> <li>Template distribution: Share starter environments with the community</li> <li>Cross-platform deployment: Export on Linux/CUDA, import on Mac/CPU with automatic PyTorch adjustment</li> </ul> <p>For continuous team collaboration with ongoing sync, see Git Remotes.</p>"},{"location":"user-guide/collaboration/git-remotes/","title":"Git Remotes","text":"<p>Collaborate continuously with team members by pushing and pulling environment changes through git remotes.</p>"},{"location":"user-guide/collaboration/git-remotes/#overview","title":"Overview","text":"<p>Git remotes enable real-time collaboration by syncing environment versions through a shared git repository. Each environment has its own git repository in the <code>.cec/</code> directory that tracks:</p> <ul> <li>Environment configuration (<code>pyproject.toml</code>)</li> <li>Python dependencies (<code>uv.lock</code>)</li> <li>Workflows (<code>.cec/workflows/*.json</code>)</li> <li>Version history (git commits)</li> </ul> <p>This is ideal for:</p> <ul> <li>Team development: Multiple people working on the same environment</li> <li>Version tracking: Full git history of environment changes</li> <li>Branch workflows: Develop features in branches, merge to main</li> <li>Continuous sync: Push/pull updates as you work</li> </ul> <p>Unlike export/import (which creates one-time snapshots), git remotes enable ongoing collaboration with full version control.</p>"},{"location":"user-guide/collaboration/git-remotes/#managing-remotes","title":"Managing Remotes","text":"<p>Each environment can have multiple git remotes for pushing and pulling changes.</p>"},{"location":"user-guide/collaboration/git-remotes/#adding-a-remote","title":"Adding a Remote","text":"<p>Add a remote repository to your environment:</p> <pre><code>cg -e my-env remote add origin https://github.com/user/comfy-env.git\n</code></pre> <p>Output:</p> <pre><code>\u2713 Added remote 'origin': https://github.com/user/comfy-env.git\n</code></pre> <p>Common remote names:</p> <ul> <li><code>origin</code>: Primary remote (convention from git)</li> <li><code>upstream</code>: Upstream repository for forks</li> <li><code>backup</code>: Backup location</li> </ul> <p>Environment-Specific</p> <p>Remotes are configured per-environment. Each environment has its own git repository and remote configuration.</p>"},{"location":"user-guide/collaboration/git-remotes/#listing-remotes","title":"Listing Remotes","text":"<p>View all configured remotes:</p> <pre><code>cg -e my-env remote list\n</code></pre> <p>Output:</p> <pre><code>Remotes:\n  origin    https://github.com/user/comfy-env.git (fetch)\n  origin    https://github.com/user/comfy-env.git (push)\n  backup    git@gitlab.com:user/comfy-backup.git (fetch)\n  backup    git@gitlab.com:user/comfy-backup.git (push)\n</code></pre> <p>Each remote shows separate fetch and push URLs (usually the same).</p>"},{"location":"user-guide/collaboration/git-remotes/#removing-a-remote","title":"Removing a Remote","text":"<p>Remove a remote that's no longer needed:</p> <pre><code>cg -e my-env remote remove backup\n</code></pre> <p>Output:</p> <pre><code>\u2713 Removed remote 'backup'\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#pushing-changes","title":"Pushing Changes","text":"<p>Push commits to a remote repository to share your environment updates.</p>"},{"location":"user-guide/collaboration/git-remotes/#basic-push","title":"Basic Push","text":"<p>Push to the default remote (<code>origin</code>):</p> <pre><code>cg -e my-env push\n</code></pre> <p>Output:</p> <pre><code>Pushing to origin/main\n\u2713 Push complete\n</code></pre> <p>Changes are now visible to anyone with access to the remote repository.</p>"},{"location":"user-guide/collaboration/git-remotes/#push-to-specific-remote","title":"Push to Specific Remote","text":"<p>Push to a named remote:</p> <pre><code>cg -e my-env push -r upstream\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#push-with-force","title":"Push with Force","text":"<p>Force push when you need to overwrite remote history (use carefully):</p> <pre><code>cg -e my-env push --force\n</code></pre> <p>Force Push Safety</p> <p>Force push uses <code>--force-with-lease</code> to prevent overwriting others' changes. It only succeeds if the remote branch hasn't been updated since your last fetch.</p>"},{"location":"user-guide/collaboration/git-remotes/#push-requirements","title":"Push Requirements","text":"<p>ComfyGit ensures safe pushes by validating your environment state.</p>"},{"location":"user-guide/collaboration/git-remotes/#clean-working-directory","title":"Clean Working Directory","text":"<p>Push requires all changes to be committed:</p> <pre><code>cg -e my-env push\n</code></pre> <p>If uncommitted changes exist:</p> <pre><code>\u2717 Cannot push with uncommitted changes.\n  Run: cg commit -m 'message' first\n</code></pre> <p>Fix:</p> <pre><code>cg -e my-env commit -m \"Add new workflow\"\ncg -e my-env push\n</code></pre> <p>This includes both git changes (in <code>.cec/</code>) and workflow changes (in <code>ComfyUI/</code>).</p>"},{"location":"user-guide/collaboration/git-remotes/#remote-configuration","title":"Remote Configuration","text":"<p>Push fails if no remote is configured:</p> <pre><code>\u2717 Push failed: No remote 'origin' configured\n</code></pre> <p>Fix:</p> <pre><code>cg -e my-env remote add origin &lt;url&gt;\ncg -e my-env push\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#authentication","title":"Authentication","text":"<p>Push may fail with authentication errors:</p> <pre><code>\u2717 Push failed: Authentication failed for 'https://github.com/user/repo.git'\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Use SSH: Configure git to use SSH keys    <pre><code>cg -e my-env remote remove origin\ncg -e my-env remote add origin git@github.com:user/repo.git\n</code></pre></p> </li> <li> <p>Use credential helper: Configure git credential storage    <pre><code>git config --global credential.helper store\n</code></pre></p> </li> <li> <p>Personal access token: Use GitHub/GitLab personal access tokens instead of passwords</p> </li> </ol>"},{"location":"user-guide/collaboration/git-remotes/#pulling-changes","title":"Pulling Changes","text":"<p>Pull fetches changes from a remote and merges them into your environment.</p>"},{"location":"user-guide/collaboration/git-remotes/#basic-pull","title":"Basic Pull","text":"<p>Pull from the default remote (<code>origin</code>):</p> <pre><code>cg -e my-env pull\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udce5 Pulling from origin/main\n\n\u2b07\ufe0f  Fetching changes from remote\n\u2713 Merged 3 commits\n\n\ud83d\udd04 Reconciling environment with pulled changes\n\n\ud83d\udce6 Installing nodes\n  [1/2] Installing rgthree-comfy... \u2713\n  [2/2] Installing was-node-suite-comfyui... \u2713\n\n\ud83d\udd27 Syncing Python packages\n\u2713 Python environment synced\n\n\ud83d\udcdd Restoring workflows\n\u2713 Workflows synced to ComfyUI\n\n\u23ed Auto-committing post-pull state\n\u2713 Pull complete: environment synced to latest\n</code></pre> <p>The pull process:</p> <ol> <li>Fetches changes from remote</li> <li>Merges into local branch</li> <li>Reconciles nodes (install/remove based on changes)</li> <li>Syncs Python packages to match <code>uv.lock</code></li> <li>Restores workflows from <code>.cec</code> to <code>ComfyUI/</code></li> <li>Commits the merged state as a new version</li> </ol>"},{"location":"user-guide/collaboration/git-remotes/#pull-from-specific-remote","title":"Pull from Specific Remote","text":"<p>Pull from a named remote:</p> <pre><code>cg -e my-env pull -r upstream\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#pull-reconciliation","title":"Pull Reconciliation","text":"<p>Pull doesn't just update git files\u2014it reconciles your entire environment to match the pulled configuration.</p>"},{"location":"user-guide/collaboration/git-remotes/#what-gets-reconciled","title":"What Gets Reconciled","text":"<p>After merging git changes, ComfyGit updates:</p> <p>Custom Nodes:</p> <ul> <li>Added nodes: Installed automatically from registry/git</li> <li>Removed nodes: Uninstalled and cleaned up</li> <li>Version changes: Updated to match new commit</li> </ul> <p>Python Packages:</p> <ul> <li>Dependencies synced: Matches <code>uv.lock</code> from remote</li> <li>Groups installed: All dependency groups reconciled</li> </ul> <p>Workflows:</p> <ul> <li>New workflows: Copied from <code>.cec/workflows/</code> to <code>ComfyUI/</code></li> <li>Updated workflows: Overwritten with tracked versions</li> <li>Deleted workflows: Removed from <code>ComfyUI/</code></li> </ul> <p>Working Directory Overwrite</p> <p>Pull overwrites <code>ComfyUI/</code> workflows with tracked versions from <code>.cec/</code>. Uncommitted workflow changes are lost unless you commit first.</p>"},{"location":"user-guide/collaboration/git-remotes/#example-node-reconciliation","title":"Example: Node Reconciliation","text":"<p>Scenario: Remote added <code>was-node-suite-comfyui</code> and removed <code>comfyui-manager</code>.</p> <p>Pull output:</p> <pre><code>\ud83d\udd04 Reconciling environment with pulled changes\n\n\ud83d\udce6 Installing nodes\n  [1/1] Installing was-node-suite-comfyui... \u2713\n\n\ud83d\uddd1\ufe0f  Removing nodes\n  [1/1] Removing comfyui-manager... \u2713\n</code></pre> <p>Your local environment now matches the remote configuration.</p>"},{"location":"user-guide/collaboration/git-remotes/#model-download-strategy","title":"Model Download Strategy","text":"<p>Control whether pull downloads new model dependencies.</p>"},{"location":"user-guide/collaboration/git-remotes/#strategy-all-default","title":"Strategy: All (Default)","text":"<p>Downloads all models referenced in pulled workflows:</p> <pre><code>cg -e my-env pull\n</code></pre> <p>Automatically resolves and downloads any new model dependencies.</p>"},{"location":"user-guide/collaboration/git-remotes/#strategy-required","title":"Strategy: Required","text":"<p>Downloads only required models:</p> <pre><code>cg -e my-env pull --models required\n</code></pre> <p>Skips optional and flexible models.</p>"},{"location":"user-guide/collaboration/git-remotes/#strategy-skip","title":"Strategy: Skip","text":"<p>Skips all model downloads:</p> <pre><code>cg -e my-env pull --models skip\n</code></pre> <p>Models are tracked as download intents. Resolve later:</p> <pre><code>cg -e my-env workflow resolve --all\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#pull-requirements","title":"Pull Requirements","text":"<p>Pull requires a clean working directory to prevent conflicts.</p>"},{"location":"user-guide/collaboration/git-remotes/#clean-state-required","title":"Clean State Required","text":"<p>Pull fails if you have uncommitted changes:</p> <pre><code>cg -e my-env pull\n</code></pre> <p>If changes exist:</p> <pre><code>\u2717 Cannot pull with uncommitted changes.\nUncommitted changes detected:\n  \u2022 Git changes in .cec/\n  \u2022 Workflow changes in ComfyUI\n\nCommit first:\n  cg commit -m 'message'\n</code></pre> <p>Fix:</p> <pre><code>cg -e my-env commit -m \"Save local changes\"\ncg -e my-env pull\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#force-pull","title":"Force Pull","text":"<p>Discard local changes and force pull:</p> <pre><code>cg -e my-env pull --force\n</code></pre> <p>Data Loss Warning</p> <p>Force pull discards ALL uncommitted changes (git and workflows). Use with caution.</p>"},{"location":"user-guide/collaboration/git-remotes/#merge-conflicts","title":"Merge Conflicts","text":"<p>Git merge conflicts require manual resolution.</p>"},{"location":"user-guide/collaboration/git-remotes/#detecting-conflicts","title":"Detecting Conflicts","text":"<p>Pull fails when conflicts occur:</p> <pre><code>\u2717 Pull failed: Merge conflict in pyproject.toml\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#resolving-conflicts","title":"Resolving Conflicts","text":"<ol> <li> <p>View conflicts:    <pre><code>cd ~/comfygit/environments/my-env/.cec\ngit status\n</code></pre></p> </li> <li> <p>Edit conflicted files to resolve conflicts:    <pre><code>nano pyproject.toml\n</code></pre></p> </li> </ol> <p>Look for conflict markers:    <pre><code>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD\n[tool.comfygit.nodes]\n\"my-node\" = { source = \"registry\" }\n=======\n[tool.comfygit.nodes]\n\"other-node\" = { source = \"registry\" }\n&gt;&gt;&gt;&gt;&gt;&gt;&gt; origin/main\n</code></pre></p> <ol> <li> <p>Stage resolved files:    <pre><code>git add pyproject.toml\n</code></pre></p> </li> <li> <p>Commit the merge:    <pre><code>git commit -m \"Merge remote changes\"\n</code></pre></p> </li> <li> <p>Sync environment:    <pre><code>cg -e my-env sync\n</code></pre></p> </li> </ol> <p>Avoiding Conflicts</p> <ul> <li>Pull frequently to stay up-to-date</li> <li>Communicate with team about major changes</li> <li>Use branches for experimental work</li> </ul>"},{"location":"user-guide/collaboration/git-remotes/#rollback-on-failure","title":"Rollback on Failure","text":"<p>If pull fails after merging, ComfyGit automatically rolls back git changes.</p>"},{"location":"user-guide/collaboration/git-remotes/#automatic-rollback","title":"Automatic Rollback","text":"<p>Scenario: Pull succeeds in merging, but node installation fails.</p> <p>Output:</p> <pre><code>\u2717 Pull failed: Could not install rgthree-comfy - network error\nRolling back git changes...\n\u2713 Rollback complete: environment restored to pre-pull state\n</code></pre> <p>Your environment is restored to exactly how it was before the pull attempt.</p>"},{"location":"user-guide/collaboration/git-remotes/#what-gets-rolled-back","title":"What Gets Rolled Back","text":"<ul> <li>Git files: <code>pyproject.toml</code>, <code>uv.lock</code>, workflows restored</li> <li>Environment state: Nodes, packages unchanged</li> </ul> <p>This ensures pull is atomic\u2014it either succeeds completely or reverts entirely.</p>"},{"location":"user-guide/collaboration/git-remotes/#version-history","title":"Version History","text":"<p>Each push and pull creates versions in your environment history.</p>"},{"location":"user-guide/collaboration/git-remotes/#view-version-history","title":"View Version History","text":"<p>See past versions:</p> <pre><code>cg -e my-env log\n</code></pre> <p>Output:</p> <pre><code>Recent versions:\n\n  v12 (2025-01-09 10:23:41)\n    Merge remote changes\n    [abc1234]\n\n  v11 (2025-01-09 09:15:22)\n    Add ControlNet workflow\n    [def5678]\n\n  v10 (2025-01-08 16:42:10)\n    Update node dependencies\n    [ghi9012]\n</code></pre> <p>Each pull creates a new version by auto-committing the merged state.</p>"},{"location":"user-guide/collaboration/git-remotes/#rollback-to-version","title":"Rollback to Version","text":"<p>Restore to a previous version:</p> <pre><code>cg -e my-env rollback v10\n</code></pre> <p>This creates a new version (v13) that matches v10's state. See Version Control for details.</p>"},{"location":"user-guide/collaboration/git-remotes/#common-workflows","title":"Common Workflows","text":""},{"location":"user-guide/collaboration/git-remotes/#initial-setup-team-lead","title":"Initial Setup (Team Lead)","text":"<p>Create an environment and set up remote:</p> <pre><code># 1. Create environment\ncg create team-env\n\n# 2. Configure environment (add nodes, workflows, etc.)\ncg -e team-env node add rgthree-comfy\ncg -e team-env commit -m \"Initial setup\"\n\n# 3. Add remote\ncg -e team-env remote add origin https://github.com/team/comfy-env.git\n\n# 4. Push to remote\ncg -e team-env push\n</code></pre> <p>Team members can now clone or pull from this remote.</p>"},{"location":"user-guide/collaboration/git-remotes/#daily-workflow-team-member","title":"Daily Workflow (Team Member)","text":"<p>Stay synced with team changes:</p> <pre><code># 1. Pull latest changes\ncg -e team-env pull\n\n# 2. Make your changes\ncg -e team-env node add custom-node\n# ... work on workflows ...\n\n# 3. Commit your changes\ncg -e team-env commit -m \"Add custom node for feature X\"\n\n# 4. Push to share with team\ncg -e team-env push\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#joining-team-new-member","title":"Joining Team (New Member)","text":"<p>Two options for new team members:</p> <p>Option 1: Import from git</p> <pre><code>cg import https://github.com/team/comfy-env.git --name team-env\n</code></pre> <p>Option 2: Clone manually + pull</p> <pre><code># Create empty environment\ncg create team-env\n\n# Add remote\ncg -e team-env remote add origin https://github.com/team/comfy-env.git\n\n# Pull initial state\ncg -e team-env pull\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/collaboration/git-remotes/#push-rejected-non-fast-forward","title":"Push Rejected (Non-Fast-Forward)","text":"<p>Problem: Remote has commits you don't have.</p> <pre><code>\u2717 Push failed: Updates were rejected because the remote contains work that you do not have locally\n</code></pre> <p>Solution: Pull first, then push:</p> <pre><code>cg -e my-env pull\ncg -e my-env push\n</code></pre> <p>If conflicts occur during pull, resolve them manually.</p>"},{"location":"user-guide/collaboration/git-remotes/#pull-fails-detached-head","title":"Pull Fails: Detached HEAD","text":"<p>Problem: Environment is in detached HEAD state.</p> <pre><code>\u2717 Pull failed: Cannot pull in detached HEAD state\n</code></pre> <p>Solution: Return to a branch:</p> <pre><code>cd ~/comfygit/environments/my-env/.cec\ngit checkout main\ncd -\ncg -e my-env pull\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#authentication-repeatedly-prompts","title":"Authentication Repeatedly Prompts","text":"<p>Problem: Git keeps asking for credentials.</p> <p>Solution: Configure credential caching:</p> <pre><code># Cache credentials for 1 hour\ngit config --global credential.helper 'cache --timeout=3600'\n\n# Or store credentials permanently (less secure)\ngit config --global credential.helper store\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#remote-already-exists","title":"Remote Already Exists","text":"<p>Problem: Trying to add a remote that's already configured.</p> <pre><code>\u2717 Remote 'origin' already exists\n</code></pre> <p>Solution: Remove first, then re-add:</p> <pre><code>cg -e my-env remote remove origin\ncg -e my-env remote add origin &lt;new-url&gt;\n</code></pre> <p>Or update the URL directly in git:</p> <pre><code>cd ~/comfygit/environments/my-env/.cec\ngit remote set-url origin &lt;new-url&gt;\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#pull-fails-uncommitted-workflows","title":"Pull Fails: Uncommitted Workflows","text":"<p>Problem: You have unsaved workflows in ComfyUI.</p> <pre><code>\u2717 Cannot pull with uncommitted changes.\nUncommitted changes detected:\n  \u2022 Workflow changes in ComfyUI\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Commit workflows (recommended):    <pre><code>cg -e my-env commit -m \"Save current workflows\"\ncg -e my-env pull\n</code></pre></p> </li> <li> <p>Force pull (discards workflow changes):    <pre><code>cg -e my-env pull --force\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/git-remotes/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/collaboration/git-remotes/#pull-before-push","title":"Pull Before Push","text":"<p>Always pull before pushing to avoid conflicts:</p> <pre><code>cg -e my-env pull\ncg -e my-env commit -m \"My changes\"\ncg -e my-env push\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#commit-frequently","title":"Commit Frequently","text":"<p>Small, focused commits make collaboration easier:</p> <pre><code>cg -e my-env commit -m \"Add ControlNet workflow\"\ncg -e my-env commit -m \"Update node dependencies\"\n</code></pre> <p>Not:</p> <pre><code>cg -e my-env commit -m \"Lots of changes\"\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#use-descriptive-messages","title":"Use Descriptive Messages","text":"<p>Write clear commit messages:</p> <ul> <li>\u2705 \"Add SDXL txt2img workflow with ControlNet\"</li> <li>\u2705 \"Update IPAdapter to v2.1.0\"</li> <li>\u274c \"Changes\"</li> <li>\u274c \"Update\"</li> </ul>"},{"location":"user-guide/collaboration/git-remotes/#communicate-major-changes","title":"Communicate Major Changes","text":"<p>Before making breaking changes, coordinate with team:</p> <ul> <li>Removing widely-used nodes</li> <li>Changing ComfyUI versions</li> <li>Restructuring workflows</li> </ul>"},{"location":"user-guide/collaboration/git-remotes/#use-branches-for-experiments","title":"Use Branches for Experiments","text":"<p>Create branches for experimental work:</p> <pre><code>cd ~/comfygit/environments/my-env/.cec\ngit checkout -b experiment-feature\n</code></pre> <p>Merge to main when ready:</p> <pre><code>git checkout main\ngit merge experiment-feature\ncg -e my-env push\n</code></pre>"},{"location":"user-guide/collaboration/git-remotes/#next-steps","title":"Next Steps","text":"<ul> <li>Export and Import - One-time environment sharing</li> <li>Team Workflows - Collaboration patterns and best practices</li> <li>Version Control - Commit and rollback strategies</li> <li>Managing Custom Nodes - Update and remove nodes</li> </ul>"},{"location":"user-guide/collaboration/git-remotes/#summary","title":"Summary","text":"<p>Git remotes enable continuous collaboration:</p> <ul> <li>Remotes connect environments to shared git repositories</li> <li>Push shares your commits with the team</li> <li>Pull fetches and merges changes, reconciling your entire environment</li> <li>Requirements ensure safe operations (clean state, no conflicts)</li> <li>Reconciliation keeps nodes, packages, and workflows in sync</li> </ul> <p>Use git remotes for active team development with full version history. For one-time sharing, use Export and Import.</p>"},{"location":"user-guide/collaboration/team-workflows/","title":"Team Workflows","text":"<p>Best practices and patterns for collaborating on ComfyUI environments with your team.</p>"},{"location":"user-guide/collaboration/team-workflows/#overview","title":"Overview","text":"<p>ComfyGit supports multiple collaboration patterns to fit different team structures and workflows. Choose the approach that matches your needs:</p> <ul> <li>Tarball Distribution: One-time sharing via export/import</li> <li>Git Collaboration: Continuous sync via push/pull</li> <li>Git Import: Template-based distribution from repositories</li> <li>Hybrid: Combine approaches for different use cases</li> </ul> <p>This guide provides proven patterns for each scenario.</p>"},{"location":"user-guide/collaboration/team-workflows/#choosing-a-collaboration-method","title":"Choosing a Collaboration Method","text":""},{"location":"user-guide/collaboration/team-workflows/#when-to-use-tarball-exportimport","title":"When to Use Tarball Export/Import","text":"<p>Best for:</p> <ul> <li>One-time environment sharing</li> <li>Offline environments (no internet access)</li> <li>Client deliverables</li> <li>Archival and backups</li> <li>CI/CD artifacts</li> </ul> <p>Advantages:</p> <ul> <li>Works offline</li> <li>No git repository needed</li> <li>Self-contained package</li> <li>Simple distribution (email, file share, etc.)</li> </ul> <p>Limitations:</p> <ul> <li>No version history</li> <li>Manual updates required</li> <li>Recipients must re-import for updates</li> </ul> <p>Pattern:</p> <pre><code>Creator \u2192 Export \u2192 .tar.gz \u2192 Distribute \u2192 Recipients \u2192 Import\n</code></pre> <p>See Export and Import for details.</p>"},{"location":"user-guide/collaboration/team-workflows/#when-to-use-git-remotes","title":"When to Use Git Remotes","text":"<p>Best for:</p> <ul> <li>Active team development</li> <li>Continuous collaboration</li> <li>Version-controlled workflows</li> <li>Branch-based development</li> </ul> <p>Advantages:</p> <ul> <li>Full git history</li> <li>Automatic synchronization</li> <li>Conflict resolution</li> <li>Branch workflows</li> </ul> <p>Limitations:</p> <ul> <li>Requires git repository</li> <li>Network access needed</li> <li>More complex setup</li> </ul> <p>Pattern:</p> <pre><code>Team Member A \u2192 Push \u2192 Remote \u2192 Pull \u2190 Team Member B\n</code></pre> <p>See Git Remotes for details.</p>"},{"location":"user-guide/collaboration/team-workflows/#when-to-use-git-import","title":"When to Use Git Import","text":"<p>Best for:</p> <ul> <li>Public workflow templates</li> <li>Starter environments</li> <li>Reproducible research</li> <li>Community distributions</li> </ul> <p>Advantages:</p> <ul> <li>Direct URL import</li> <li>Version pinning (branches/tags)</li> <li>GitHub/GitLab integration</li> <li>Subdirectory support</li> </ul> <p>Limitations:</p> <ul> <li>Read-only (no push back)</li> <li>Requires public repository</li> <li>One-way distribution</li> </ul> <p>Pattern:</p> <pre><code>Public Repo \u2192 Import URL \u2192 User's Environment\n</code></pre> <p>See Export and Import for details.</p>"},{"location":"user-guide/collaboration/team-workflows/#pattern-1-single-maintainer-distribution","title":"Pattern 1: Single Maintainer Distribution","text":"<p>Scenario: One person creates and maintains an environment, distributes to team/clients.</p>"},{"location":"user-guide/collaboration/team-workflows/#workflow","title":"Workflow","text":"<p>1. Maintainer: Create and Configure</p> <pre><code># Create environment\ncg create production-workflow\n\n# Add custom nodes\ncg -e production-workflow node add rgthree-comfy\ncg -e production-workflow node add was-node-suite-comfyui\n\n# Add workflows\n# ... create workflows in ComfyUI ...\n\n# Commit state\ncg -e production-workflow commit -m \"Initial production setup\"\n</code></pre> <p>2. Maintainer: Add Model Sources</p> <p>Ensure all models have download URLs:</p> <pre><code># Interactive mode - add sources for all models\ncg -e production-workflow model add-source\n</code></pre> <p>This allows recipients to auto-download models.</p> <p>3. Maintainer: Export</p> <pre><code>cg -e production-workflow export production-v1.0.tar.gz\n</code></pre> <p>4. Maintainer: Distribute</p> <p>Share the tarball via:</p> <ul> <li>Email attachment</li> <li>Cloud storage (Dropbox, Google Drive)</li> <li>Internal file share</li> <li>CDN for public distribution</li> </ul> <p>5. Recipients: Import</p> <pre><code>cg import production-v1.0.tar.gz --name production\n</code></pre> <p>Models download automatically if sources were added.</p> <p>6. Updates: New Version</p> <p>When updates are needed:</p> <pre><code># Maintainer makes changes\ncg -e production-workflow commit -m \"v1.1: Add new workflows\"\ncg -e production-workflow export production-v1.1.tar.gz\n\n# Recipients import new version\ncg delete production\ncg import production-v1.1.tar.gz --name production\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#advantages","title":"Advantages","text":"<ul> <li>Simple mental model (one source of truth)</li> <li>No merge conflicts</li> <li>Controlled distribution</li> <li>Works offline</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Version your exports: Use clear version numbers in filenames    <pre><code>production-v1.0.tar.gz\nproduction-v1.1.tar.gz\nproduction-v2.0.tar.gz\n</code></pre></p> </li> <li> <p>Add model sources: Always add sources before exporting    <pre><code>cg model add-source\n</code></pre></p> </li> <li> <p>Document changes: Include a CHANGELOG with each export    <pre><code>v1.1 (2025-01-09):\n- Added ControlNet workflow\n- Updated ComfyUI to v0.2.7\n- Added IPAdapter nodes\n</code></pre></p> </li> <li> <p>Test the export: Import locally to verify completeness    <pre><code>cg import test.tar.gz --name test-import\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#pattern-2-active-team-development","title":"Pattern 2: Active Team Development","text":"<p>Scenario: Multiple developers actively collaborating on a shared environment.</p>"},{"location":"user-guide/collaboration/team-workflows/#initial-setup","title":"Initial Setup","text":"<p>1. Team Lead: Create Environment</p> <pre><code># Create environment\ncg create team-env\n\n# Configure environment\ncg -e team-env node add rgthree-comfy\ncg -e team-env commit -m \"Initial setup\"\n</code></pre> <p>2. Team Lead: Create Git Repository</p> <p>Create a repository on GitHub/GitLab/Bitbucket:</p> <pre><code># On GitHub/GitLab, create an empty repository: team-env\n</code></pre> <p>3. Team Lead: Push Initial State</p> <pre><code># Add remote\ncg -e team-env remote add origin git@github.com:company/team-env.git\n\n# Push\ncg -e team-env push\n</code></pre> <p>4. Team Members: Join</p> <p>Option A - Import from git:</p> <pre><code>cg import git@github.com:company/team-env.git --name team-env\n</code></pre> <p>Option B - Clone + pull:</p> <pre><code># Create environment\ncg create team-env\n\n# Add remote\ncg -e team-env remote add origin git@github.com:company/team-env.git\n\n# Pull\ncg -e team-env pull\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#daily-workflow","title":"Daily Workflow","text":"<p>Morning: Pull Latest Changes</p> <p>Start each day by pulling updates:</p> <pre><code>cg -e team-env pull\n</code></pre> <p>This syncs your environment with the team's latest changes.</p> <p>During Day: Work and Commit</p> <p>Make changes and commit frequently:</p> <pre><code># Add a node\ncg -e team-env node add custom-node\n\n# Create/modify workflows\n# ... work in ComfyUI ...\n\n# Commit\ncg -e team-env commit -m \"Add feature X workflow\"\n</code></pre> <p>End of Day: Push Changes</p> <p>Share your work with the team:</p> <pre><code># Pull first (in case others pushed)\ncg -e team-env pull\n\n# Push your commits\ncg -e team-env push\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#handling-conflicts","title":"Handling Conflicts","text":"<p>1. Pull Rejects with Conflicts</p> <pre><code>\u2717 Pull failed: Merge conflict in pyproject.toml\n</code></pre> <p>2. Resolve Manually</p> <pre><code># Navigate to environment\ncd ~/comfygit/environments/team-env/.cec\n\n# Check conflict\ngit status\n\n# Edit conflicted file\nnano pyproject.toml\n\n# Stage resolution\ngit add pyproject.toml\n\n# Commit merge\ngit commit -m \"Merge remote changes\"\n\n# Sync environment\ncd -\ncg -e team-env sync\n</code></pre> <p>3. Push Resolution</p> <pre><code>cg -e team-env push\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#best-practices_1","title":"Best Practices","text":"<ol> <li> <p>Pull before push: Always pull latest changes before pushing    <pre><code>cg -e team-env pull &amp;&amp; cg -e team-env push\n</code></pre></p> </li> <li> <p>Small, focused commits: Easier to review and merge    <pre><code>cg -e team-env commit -m \"Add SDXL workflow\"\ncg -e team-env commit -m \"Update ControlNet node\"\n</code></pre></p> </li> <li> <p>Descriptive messages: Help team understand changes    <pre><code>\u2705 \"Add img2img workflow with IPAdapter\"\n\u274c \"Updates\"\n</code></pre></p> </li> <li> <p>Communicate major changes: Discuss before:</p> </li> <li>Removing nodes others might use</li> <li>Changing ComfyUI version</li> <li> <p>Restructuring workflows</p> </li> <li> <p>Use branches for experiments:    <pre><code>cd ~/comfygit/environments/team-env/.cec\ngit checkout -b experiment-feature\n# ... make changes ...\ngit checkout main\ngit merge experiment-feature\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#pattern-3-template-distribution","title":"Pattern 3: Template Distribution","text":"<p>Scenario: Distributing starter environments to the community or across teams.</p>"},{"location":"user-guide/collaboration/team-workflows/#creating-a-template","title":"Creating a Template","text":"<p>1. Create Clean Template</p> <pre><code># Create template environment\ncg create comfyui-template\n\n# Add commonly-used nodes\ncg -e comfyui-template node add rgthree-comfy\ncg -e comfyui-template node add was-node-suite-comfyui\ncg -e comfyui-template node add comfyui-controlnet-aux\n\n# Add starter workflows\n# ... create basic workflows ...\n\n# Commit\ncg -e comfyui-template commit -m \"Template v1.0\"\n</code></pre> <p>2. Add Model Sources</p> <p>Critical for templates - users must be able to download models:</p> <pre><code>cg -e comfyui-template model add-source\n</code></pre> <p>3. Push to Public Repository</p> <pre><code># Create public GitHub repo\ncg -e comfyui-template remote add origin git@github.com:user/comfyui-template.git\ncg -e comfyui-template push\n\n# Tag releases\ncd ~/comfygit/environments/comfyui-template/.cec\ngit tag v1.0\ngit push origin v1.0\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#using-a-template","title":"Using a Template","text":"<p>Import Specific Version</p> <pre><code># Import latest\ncg import https://github.com/user/comfyui-template --name my-project\n\n# Import specific version\ncg import https://github.com/user/comfyui-template --branch v1.0 --name my-project\n</code></pre> <p>Customize After Import</p> <pre><code># Add your own nodes\ncg -e my-project node add custom-node\n\n# Create your workflows\n# ...\n\n# Commit your changes\ncg -e my-project commit -m \"Customize for my project\"\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#template-best-practices","title":"Template Best Practices","text":"<ol> <li> <p>Comprehensive model sources: Every model should have a download URL</p> </li> <li> <p>Include documentation: Add README in the repo    <pre><code># ComfyUI Template\n\nStarter environment with commonly-used nodes.\n\n## Included Workflows\n- txt2img: Basic SDXL text-to-image\n- img2img: Image-to-image with ControlNet\n\n## Usage\ncg import https://github.com/user/comfyui-template --name my-env\n</code></pre></p> </li> <li> <p>Version releases: Use git tags for stable versions    <pre><code>git tag -a v1.0 -m \"Release v1.0\"\ngit push origin v1.0\n</code></pre></p> </li> <li> <p>Keep it minimal: Only include universally-useful components</p> </li> <li> <p>Test imports: Verify template imports work in a fresh workspace</p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#pattern-4-hybrid-approach","title":"Pattern 4: Hybrid Approach","text":"<p>Scenario: Different distribution methods for different audiences.</p>"},{"location":"user-guide/collaboration/team-workflows/#example-setup","title":"Example Setup","text":"<p>Internal Team: Git Collaboration</p> <pre><code># Team uses git remotes for active development\ncg -e project remote add origin git@github.com:company/project-internal.git\ncg -e project push\n</code></pre> <p>Client Delivery: Tarball Export</p> <pre><code># Export stable version for client\ncg -e project export client-delivery-v1.0.tar.gz\n</code></pre> <p>Public Showcase: Git Import</p> <pre><code># Push to public repo for community\ncg -e project remote add public https://github.com/company/project-public.git\ncg -e project push -r public\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#advantages_1","title":"Advantages","text":"<ul> <li>Flexibility: Use the right tool for each audience</li> <li>Security: Keep internal development private</li> <li>Convenience: Git for team, tarball for clients</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#model-management-strategies","title":"Model Management Strategies","text":"<p>Models are often the largest component of environments. Choose a strategy that fits your team's needs.</p>"},{"location":"user-guide/collaboration/team-workflows/#strategy-1-centralized-model-library","title":"Strategy 1: Centralized Model Library","text":"<p>Setup:</p> <p>One shared models directory on a network drive or cloud storage.</p> <pre><code># All team members point to shared directory\ncg model index dir /mnt/shared/models\n</code></pre> <p>Advantages:</p> <ul> <li>No duplicate downloads</li> <li>Consistent model versions</li> <li>Saves disk space and bandwidth</li> </ul> <p>Limitations:</p> <ul> <li>Requires network access</li> <li>Single point of failure</li> <li>Slower access over network</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#strategy-2-individual-model-libraries","title":"Strategy 2: Individual Model Libraries","text":"<p>Setup:</p> <p>Each team member maintains their own models directory.</p> <pre><code># Each member has local models\ncg model index dir ~/ComfyUI/models\n</code></pre> <p>Advantages:</p> <ul> <li>No network dependency</li> <li>Fast local access</li> <li>Works offline</li> </ul> <p>Limitations:</p> <ul> <li>Duplicate downloads across team</li> <li>Potential version inconsistencies</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#strategy-3-hybrid","title":"Strategy 3: Hybrid","text":"<p>Setup:</p> <p>Shared directory for large/common models, local for experiments.</p> <pre><code># Symlink common models from shared location\nln -s /mnt/shared/models/checkpoints ~/comfygit/models/checkpoints\n\n# Keep local models for experiments\ncg model index dir ~/comfygit/models\n</code></pre> <p>Advantages:</p> <ul> <li>Balance of speed and efficiency</li> <li>Flexibility for team members</li> </ul> <p>Limitations:</p> <ul> <li>More complex setup</li> <li>Requires coordination</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#communication-and-coordination","title":"Communication and Coordination","text":""},{"location":"user-guide/collaboration/team-workflows/#establish-team-conventions","title":"Establish Team Conventions","text":"<p>Document team practices:</p> <p>Commit Messages:</p> <pre><code>Format: &lt;type&gt;: &lt;description&gt;\n\nExamples:\n- feat: Add SDXL upscaling workflow\n- fix: Resolve ControlNet version conflict\n- update: Upgrade ComfyUI to v0.2.7\n- docs: Add workflow usage instructions\n</code></pre> <p>Branch Naming:</p> <pre><code>feature/&lt;name&gt;    - New features\nfix/&lt;name&gt;        - Bug fixes\nexperiment/&lt;name&gt; - Experimental work\n</code></pre> <p>Node Management:</p> <pre><code>- Test new nodes in branches before merging\n- Communicate before removing nodes\n- Document node dependencies in commits\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#regular-sync-meetings","title":"Regular Sync Meetings","text":"<p>Schedule regular check-ins:</p> <ul> <li>Daily standups: Share what you're working on</li> <li>Weekly syncs: Review environment changes</li> <li>Release planning: Coordinate major updates</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#communication-channels","title":"Communication Channels","text":"<p>Use dedicated channels for environment collaboration:</p> <ul> <li>Slack/Discord: Quick updates and questions</li> <li>GitHub Issues: Track environment issues and feature requests</li> <li>Wiki/Docs: Document workflows and best practices</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#troubleshooting-team-issues","title":"Troubleshooting Team Issues","text":""},{"location":"user-guide/collaboration/team-workflows/#issue-frequent-merge-conflicts","title":"Issue: Frequent Merge Conflicts","text":"<p>Symptoms: Team members constantly get conflicts when pulling.</p> <p>Solutions:</p> <ol> <li> <p>Pull more frequently: Reduce time between syncs    <pre><code># Pull every hour or before starting work\ncg -e team-env pull\n</code></pre></p> </li> <li> <p>Use branches: Isolate experimental work    <pre><code>git checkout -b my-feature\n</code></pre></p> </li> <li> <p>Coordinate changes: Communicate before major edits    <pre><code>\"I'm updating ControlNet nodes, please don't modify them for 30min\"\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#issue-push-rejected-someone-pushed-first","title":"Issue: Push Rejected (Someone Pushed First)","text":"<p>Symptoms:</p> <pre><code>\u2717 Push failed: Updates were rejected\n</code></pre> <p>Solution:</p> <pre><code># Pull to merge their changes\ncg -e team-env pull\n\n# Resolve any conflicts\n# ...\n\n# Push again\ncg -e team-env push\n</code></pre>"},{"location":"user-guide/collaboration/team-workflows/#issue-models-missing-after-pull","title":"Issue: Models Missing After Pull","text":"<p>Symptoms: Workflows break because models weren't downloaded.</p> <p>Solutions:</p> <ol> <li> <p>Use pull with model strategy:    <pre><code>cg -e team-env pull --models all\n</code></pre></p> </li> <li> <p>Resolve manually after pull:    <pre><code>cg -e team-env workflow resolve --all\n</code></pre></p> </li> <li> <p>Check model sources:    <pre><code>cg -e team-env model index show &lt;model-name&gt;\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#issue-inconsistent-python-environments","title":"Issue: Inconsistent Python Environments","text":"<p>Symptoms: Different team members have different package versions.</p> <p>Causes:</p> <ul> <li>Not pulling latest <code>uv.lock</code></li> <li>Manual package installations</li> </ul> <p>Solutions:</p> <ol> <li> <p>Pull regularly to sync <code>uv.lock</code>:    <pre><code>cg -e team-env pull\n</code></pre></p> </li> <li> <p>Never manually install packages: Always use ComfyGit commands    <pre><code># \u2705 Correct\ncg -e team-env py add requests\n\n# \u274c Wrong\ncd ~/comfygit/environments/team-env/.venv\npip install requests\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#security-considerations","title":"Security Considerations","text":""},{"location":"user-guide/collaboration/team-workflows/#private-repositories","title":"Private Repositories","text":"<p>Use SSH keys for authentication:</p> <pre><code># Add remote with SSH URL\ncg -e team-env remote add origin git@github.com:company/private-env.git\n</code></pre> <p>Configure SSH keys: GitHub SSH Setup</p>"},{"location":"user-guide/collaboration/team-workflows/#access-control","title":"Access Control","text":"<p>Use repository permissions to control access:</p> <ul> <li>Read-only: Can pull, cannot push</li> <li>Write: Can pull and push</li> <li>Admin: Full repository control</li> </ul> <p>Manage via GitHub/GitLab settings.</p>"},{"location":"user-guide/collaboration/team-workflows/#secrets-management","title":"Secrets Management","text":"<p>Never commit secrets to the environment repository:</p> <ul> <li>API keys</li> <li>Passwords</li> <li>Authentication tokens</li> </ul> <p>Instead:</p> <ol> <li> <p>Use environment variables:    <pre><code>export CIVITAI_API_KEY=&lt;your-key&gt;\n</code></pre></p> </li> <li> <p>Local configuration files: Add to <code>.gitignore</code></p> </li> <li> <p>ComfyGit config: Store separately from environment    <pre><code>cg config --civitai-key &lt;key&gt;\n</code></pre></p> </li> </ol>"},{"location":"user-guide/collaboration/team-workflows/#next-steps","title":"Next Steps","text":"<ul> <li>Export and Import - Tarball-based sharing</li> <li>Git Remotes - Push/pull collaboration</li> <li>Version Control - Commit and rollback</li> <li>Managing Custom Nodes - Node updates and conflicts</li> </ul>"},{"location":"user-guide/collaboration/team-workflows/#summary","title":"Summary","text":"<p>Effective team collaboration requires:</p> <ul> <li>Choose the right method: Tarball, git, or hybrid based on your needs</li> <li>Establish conventions: Commit messages, branch naming, communication</li> <li>Sync frequently: Pull before work, push when done</li> <li>Manage models: Decide on centralized vs individual model libraries</li> <li>Coordinate changes: Communicate before major updates</li> <li>Handle conflicts: Pull, resolve, sync, push</li> </ul> <p>Start with simple patterns and evolve as your team grows. The key to successful collaboration is clear communication and consistent practices.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/","title":"Adding Custom Nodes","text":"<p>Learn how to install custom nodes from the ComfyUI registry, GitHub repositories, and local development directories.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#overview","title":"Overview","text":"<p>ComfyGit provides several ways to add custom nodes to your environment:</p> <ul> <li>Registry lookup - Search the official ComfyUI registry by name</li> <li>GitHub URLs - Install directly from any GitHub repository</li> <li>Development nodes - Track local nodes you're actively developing</li> <li>Batch installation - Add multiple nodes in one command</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#prerequisites","title":"Prerequisites","text":"<p>Before adding nodes, make sure you have:</p> <ul> <li>An active environment (created with <code>cg create</code> or set with <code>cg use</code>)</li> <li>Internet connection for downloading repositories</li> <li>Registry cache downloaded (runs automatically on first use)</li> </ul> <p>Check registry status</p> <pre><code>cg registry status\n</code></pre> <p>If the registry cache is outdated or missing, update it: <pre><code>cg registry update\n</code></pre></p>"},{"location":"user-guide/custom-nodes/adding-nodes/#adding-nodes-from-the-registry","title":"Adding nodes from the registry","text":"<p>The ComfyUI registry contains hundreds of community-maintained custom nodes. ComfyGit searches this registry to find the correct GitHub repository.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#basic-installation","title":"Basic installation","text":"<pre><code>cg node add comfyui-impact-pack\n</code></pre> <p>What happens:</p> <ol> <li>Registry lookup - ComfyGit searches for \"comfyui-impact-pack\" in the registry</li> <li>Package download - Downloads pre-packaged node archive from ComfyUI Registry CDN to <code>custom_nodes/</code> (or clones from GitHub if CDN package unavailable)</li> <li>Dependency installation - Scans for <code>requirements.txt</code> or <code>install.py</code> and installs Python packages</li> <li>Configuration update - Adds the node to <code>.cec/pyproject.toml</code></li> </ol> <p>Example output:</p> <pre><code>\ud83d\udce6 Adding node: comfyui-impact-pack\n\u2713 Node 'ComfyUI-Impact-Pack' added to pyproject.toml\n\nRun 'cg -e my-env env status' to review changes\n</code></pre>"},{"location":"user-guide/custom-nodes/adding-nodes/#specifying-versions","title":"Specifying versions","text":"<p>Install a specific version using the <code>@version</code> syntax:</p> <pre><code># Install specific release version\ncg node add comfyui-impact-pack@1.2.0\n\n# Install from a branch\ncg node add comfyui-impact-pack@main\n\n# Install from a commit hash\ncg node add comfyui-impact-pack@abc1234\n</code></pre> <p>Version resolution</p> <p>For registry nodes: ComfyGit queries the registry API for the specific version (if available in the registry's CDN)</p> <p>For GitHub nodes: ComfyGit passes the version/ref to git during clone. Works with:</p> <ul> <li>Release tags: <code>@v1.0.0</code>, <code>@1.0.0</code></li> <li>Branches: <code>@main</code>, <code>@develop</code></li> <li>Commit hashes: <code>@abc1234</code> (short or full)</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#how-registry-lookup-works","title":"How registry lookup works","text":"<p>When you provide a registry ID like <code>comfyui-impact-pack</code>:</p> <ol> <li>ComfyGit checks the local registry cache (if <code>prefer_registry_cache=true</code> in config)</li> <li>If not found or cache disabled, queries the live ComfyUI registry API</li> <li>Retrieves the node's download URL (CDN package) and metadata</li> <li>Downloads the pre-packaged node from the registry CDN to your environment's <code>custom_nodes/</code> directory</li> <li>If no CDN package is available, falls back to cloning from the node's GitHub repository</li> </ol> <p>Registry ID vs. repository name</p> <p>Registry IDs are usually lowercase with hyphens (e.g., <code>comfyui-impact-pack</code>), while repository names may have different casing (e.g., <code>ComfyUI-Impact-Pack</code>). ComfyGit handles this automatically.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#adding-nodes-from-github","title":"Adding nodes from GitHub","text":"<p>Install directly from any GitHub repository without registry lookup:</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#full-github-urls","title":"Full GitHub URLs","text":"<pre><code>cg node add https://github.com/ltdrdata/ComfyUI-Impact-Pack\n</code></pre> <p>This bypasses the registry entirely and clones directly from GitHub using git (not the CDN download method).</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#github-urls-with-versions","title":"GitHub URLs with versions","text":"<pre><code># Specific branch\ncg node add https://github.com/ltdrdata/ComfyUI-Impact-Pack@main\n\n# Specific tag\ncg node add https://github.com/ltdrdata/ComfyUI-Impact-Pack@v1.2.0\n\n# Specific commit\ncg node add https://github.com/ltdrdata/ComfyUI-Impact-Pack@abc1234\n</code></pre> <p>When to use GitHub URLs</p> <p>Use GitHub URLs when:</p> <ul> <li>The node isn't in the registry yet</li> <li>You want to install from a fork</li> <li>You need a specific branch or commit that isn't packaged in the registry</li> <li>The registry ID is ambiguous</li> </ul> <p>Note: GitHub URLs use git clone, while registry IDs typically use faster CDN downloads. Registry installation is usually preferred when available.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#batch-installation","title":"Batch installation","text":"<p>Add multiple nodes in a single command:</p> <pre><code>cg node add comfyui-impact-pack comfyui-controlnet-aux comfyui-video-helper-suite\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udce6 Adding 3 nodes...\n  [1/3] Installing comfyui-impact-pack... \u2713\n  [2/3] Installing comfyui-controlnet-aux... \u2713\n  [3/3] Installing comfyui-video-helper-suite... \u2713\n\n\u2705 Installed 3/3 nodes\n\nRun 'cg -e my-env env status' to review changes\n</code></pre>"},{"location":"user-guide/custom-nodes/adding-nodes/#handling-batch-failures","title":"Handling batch failures","text":"<p>If some nodes fail during batch installation:</p> <pre><code>\ud83d\udce6 Adding 3 nodes...\n  [1/3] Installing comfyui-impact-pack... \u2713\n  [2/3] Installing invalid-node... \u2717 (Node not found in registry)\n  [3/3] Installing comfyui-controlnet-aux... \u2713\n\n\u2705 Installed 2/3 nodes\n\n\u26a0\ufe0f  Failed to install 1 nodes:\n  \u2022 invalid-node: Node not found in registry\n\nRun 'cg -e my-env env status' to review changes\n</code></pre> <p>ComfyGit continues installing other nodes even if one fails.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#development-nodes","title":"Development nodes","text":"<p>Track local nodes you're actively developing without managing them as regular installed nodes.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#what-are-development-nodes","title":"What are development nodes?","text":"<p>Development nodes are:</p> <ul> <li>Local directories in <code>custom_nodes/</code> that you're editing</li> <li>Tracked separately from regular nodes in pyproject.toml</li> <li>Not managed by ComfyGit (you handle git operations yourself)</li> <li>Dependency-aware - ComfyGit syncs their <code>requirements.txt</code> to your environment</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#adding-a-development-node","title":"Adding a development node","text":"<p>If you have a local node directory in <code>custom_nodes/my-custom-node/</code>:</p> <pre><code>cg node add my-custom-node --dev\n</code></pre> <p>What happens:</p> <ol> <li>ComfyGit scans <code>custom_nodes/my-custom-node/requirements.txt</code></li> <li>Installs Python dependencies to the environment</li> <li>Marks the node as <code>development</code> in pyproject.toml</li> <li>Does not git clone or manage updates</li> </ol> <p>Example output:</p> <pre><code>\ud83d\udce6 Adding development node: my-custom-node\n\u2713 Development node 'my-custom-node' added and tracked\n\nRun 'cg -e my-env env status' to review changes\n</code></pre>"},{"location":"user-guide/custom-nodes/adding-nodes/#development-node-workflow","title":"Development node workflow","text":"<pre><code># 1. Clone your node repo manually\ncd ~/comfygit/environments/my-env/ComfyUI/custom_nodes/\ngit clone https://github.com/you/your-custom-node\n\n# 2. Track it as a development node\ncg node add your-custom-node --dev\n\n# 3. Edit code locally\ncd your-custom-node\n# ... make changes ...\n\n# 4. Update dependencies if you change requirements.txt\ncg node update your-custom-node\n\n# 5. When done, commit your environment\ncg commit -m \"Added dev node: your-custom-node\"\n</code></pre> <p>Why use development nodes?</p> <p>Development nodes let you:</p> <ul> <li>Work on node code while using it in ComfyUI</li> <li>Keep your own git workflow separate from ComfyGit</li> <li>Have ComfyGit manage Python dependencies automatically</li> <li>Track which dev nodes are part of the environment</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#advanced-options","title":"Advanced options","text":""},{"location":"user-guide/custom-nodes/adding-nodes/#force-overwrite","title":"Force overwrite","text":"<p>Replace an existing node directory:</p> <pre><code>cg node add comfyui-impact-pack --force\n</code></pre> <p>This removes the existing <code>custom_nodes/ComfyUI-Impact-Pack/</code> directory and re-downloads/re-installs the node.</p> <p>Destructive operation</p> <p><code>--force</code> deletes the existing directory. Any uncommitted local changes will be lost. Use with caution.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#skip-resolution-testing","title":"Skip resolution testing","text":"<p>By default, ComfyGit tests that the node's dependencies can be resolved. Skip this with:</p> <pre><code>cg node add comfyui-impact-pack --no-test\n</code></pre> <p>Useful when:</p> <ul> <li>You know the dependencies are fine</li> <li>You want faster installation</li> <li>The node has complex dependencies that may show false conflicts</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#what-gets-tracked","title":"What gets tracked","text":"<p>When you add a node, ComfyGit updates <code>.cec/pyproject.toml</code>:</p> <pre><code>[tool.comfygit.nodes]\n\"comfyui-impact-pack\" = {name = \"ComfyUI-Impact-Pack\", repository = \"https://github.com/ltdrdata/ComfyUI-Impact-Pack\", version = \"abc1234\", source = \"registry\"}\n</code></pre> <p>This tracks:</p> <ul> <li>name - The node's directory name in <code>custom_nodes/</code></li> <li>repository - The git repository URL</li> <li>version - The git commit hash (for reproducibility)</li> <li>source - Where it came from (<code>registry</code>, <code>git</code>, or <code>development</code>)</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#dependency-installation","title":"Dependency installation","text":"<p>ComfyGit automatically handles node dependencies:</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#requirementstxt","title":"requirements.txt","text":"<p>If the node has <code>requirements.txt</code>:</p> <pre><code># custom_nodes/ComfyUI-Impact-Pack/requirements.txt\nopencv-python&gt;=4.5.0\npillow&gt;=9.0.0\n</code></pre> <p>ComfyGit runs:</p> <pre><code>uv add opencv-python pillow\n</code></pre> <p>These get added to your environment's <code>pyproject.toml</code> under a dedicated dependency group.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#installpy-scripts","title":"install.py scripts","text":"<p>Some nodes have <code>install.py</code> scripts for custom installation. ComfyGit:</p> <ol> <li>Scans for <code>requirements.txt</code> first</li> <li>If <code>install.py</code> exists, does not run it automatically</li> <li>You may need to run it manually:</li> </ol> <pre><code>cd ~/comfygit/environments/my-env/ComfyUI/custom_nodes/node-name\npython install.py\n</code></pre> <p>Why not auto-run install.py?</p> <p>ComfyGit doesn't run arbitrary scripts for security reasons. Review the script first, then run manually if needed.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#how-node-caching-works","title":"How node caching works","text":"<p>ComfyGit uses a two-stage installation process for efficiency:</p> <ol> <li>Download to global cache - Nodes are first downloaded to a workspace-level cache directory</li> <li>Copy to environment - The cached node is then copied to your environment's <code>custom_nodes/</code> directory</li> </ol> <p>Benefits of caching:</p> <ul> <li>Fast reinstallation - Reinstalling the same node version is instant (no re-download)</li> <li>Shared across environments - Multiple environments can share the same cached node files</li> <li>Preserved on removal - Removing a node from an environment doesn't delete the cached copy</li> <li>Reduced bandwidth - CDN packages are only downloaded once per workspace</li> </ul> <p>Cache location:</p> <pre><code>~/comfygit/cache/custom_nodes/\n  \u251c\u2500\u2500 ComfyUI-Impact-Pack@abc1234/\n  \u251c\u2500\u2500 ComfyUI-ControlNet-Aux@def5678/\n  \u2514\u2500\u2500 ...\n</code></pre> <p>Quick reinstallation</p> <p>If you remove a node and then re-add it (same version), ComfyGit will copy it from cache instantly instead of re-downloading.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#avoiding-comfyui-manager","title":"Avoiding ComfyUI-Manager","text":"<p>Don't install ComfyUI-Manager</p> <p>ComfyGit replaces ComfyUI-Manager's functionality. Installing <code>comfyui-manager</code> can cause conflicts because both tools manage custom nodes.</p> <p>Instead of ComfyUI-Manager:</p> <ul> <li>Use <code>cg node add</code> to install nodes</li> <li>Use <code>cg node update</code> to update nodes</li> <li>Use <code>cg node list</code> to see installed nodes</li> <li>Use <code>cg workflow resolve</code> to resolve workflow dependencies</li> </ul>"},{"location":"user-guide/custom-nodes/adding-nodes/#common-patterns","title":"Common patterns","text":""},{"location":"user-guide/custom-nodes/adding-nodes/#installing-from-a-requirements-file","title":"Installing from a requirements file","text":"<p>If you have a list of nodes:</p> <pre><code># nodes.txt\ncomfyui-impact-pack\ncomfyui-controlnet-aux\ncomfyui-video-helper-suite\n</code></pre> <p>Install them all:</p> <pre><code>cg node add $(cat nodes.txt)\n</code></pre> <p>Or manually:</p> <pre><code>cg node add comfyui-impact-pack comfyui-controlnet-aux comfyui-video-helper-suite\n</code></pre>"},{"location":"user-guide/custom-nodes/adding-nodes/#installing-a-fork","title":"Installing a fork","text":"<pre><code># Install from your fork instead of the original\ncg node add https://github.com/yourusername/ComfyUI-Impact-Pack\n</code></pre>"},{"location":"user-guide/custom-nodes/adding-nodes/#installing-a-specific-commit-for-stability","title":"Installing a specific commit for stability","text":"<pre><code># Pin to a known-working commit\ncg node add comfyui-impact-pack@abc1234567890abcdef\n</code></pre>"},{"location":"user-guide/custom-nodes/adding-nodes/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/custom-nodes/adding-nodes/#node-not-found-in-registry","title":"Node not found in registry","text":"<pre><code>\u2717 Failed to add node 'unknown-node'\n   Node not found in registry\n</code></pre> <p>Solutions:</p> <ol> <li>Check spelling and try again</li> <li>Use the GitHub URL directly:    <pre><code>cg node add https://github.com/user/repo\n</code></pre></li> <li>Update the registry cache:    <pre><code>cg registry update\ncg node add unknown-node\n</code></pre></li> </ol>"},{"location":"user-guide/custom-nodes/adding-nodes/#registry-cache-unavailable","title":"Registry cache unavailable","text":"<pre><code>\u2717 Cannot add node - registry data unavailable\n  Cache location: ~/comfygit/comfygit_cache/registry/\n\nTo fix this issue:\n  1. Download registry data:\n     \u2192 cg registry update\n\n  2. Check download status:\n     \u2192 cg registry status\n</code></pre> <p>Follow the suggested commands to download the registry.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#directory-already-exists","title":"Directory already exists","text":"<pre><code>\u2717 Cannot add node 'comfyui-impact-pack'\n  Directory custom_nodes/ComfyUI-Impact-Pack already exists\n  Filesystem: https://github.com/user/fork\n  Registry:   https://github.com/ltdrdata/ComfyUI-Impact-Pack\n\nSuggested actions:\n  1. Remove existing node\n     \u2192 cg node remove comfyui-impact-pack\n\n  2. Force overwrite existing directory\n     \u2192 cg node add comfyui-impact-pack --force\n</code></pre> <p>Choose one of the suggested actions based on what you want.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#dependency-conflicts","title":"Dependency conflicts","text":"<p>If a node has conflicting dependencies:</p> <pre><code>\u2717 Failed to add node 'problematic-node'\n   Dependency conflict: torch==2.0.0 (required) conflicts with torch&gt;=2.1.0 (installed)\n</code></pre> <p>See Node Conflicts for detailed conflict resolution strategies.</p>"},{"location":"user-guide/custom-nodes/adding-nodes/#next-steps","title":"Next steps","text":"<ul> <li> <p> Managing Nodes</p> <p>List, update, remove, and prune installed nodes</p> </li> <li> <p> Node Conflicts</p> <p>Resolve dependency conflicts between nodes</p> </li> <li> <p> Workflows</p> <p>Automatically resolve node dependencies from workflows</p> </li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/","title":"Managing Custom Nodes","text":"<p>View, update, remove, and clean up custom nodes in your environment.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#overview","title":"Overview","text":"<p>Once you've added custom nodes, ComfyGit provides commands to manage their lifecycle:</p> <ul> <li>List - View all installed nodes with version info</li> <li>Update - Pull latest changes from repositories</li> <li>Remove - Uninstall nodes (single or batch)</li> <li>Prune - Clean up unused nodes automatically</li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#listing-installed-nodes","title":"Listing installed nodes","text":"<p>View all custom nodes in your environment:</p> <pre><code>cg node list\n</code></pre> <p>Example output:</p> <pre><code>Custom nodes in 'my-project':\n  \u2022 comfyui-impact-pack (registry) @ abc12345\n  \u2022 comfyui-controlnet-aux (git) @ def67890\n  \u2022 my-custom-node (development) (dev)\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#understanding-the-output","title":"Understanding the output","text":"<p>Each line shows:</p> <ul> <li>Node name - The registry ID or directory name</li> <li>Source type - Where the node came from:</li> <li><code>registry</code> - Installed from ComfyUI registry lookup</li> <li><code>git</code> - Installed directly from GitHub URL</li> <li><code>development</code> - Local development node tracked with <code>--dev</code></li> <li>Version - The git commit hash (short form) or <code>(dev)</code> for development nodes</li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#when-no-nodes-are-installed","title":"When no nodes are installed","text":"<pre><code>No custom nodes installed\n</code></pre> <p>This means your environment only has ComfyUI's built-in nodes.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#updating-nodes","title":"Updating nodes","text":"<p>Update a node to the latest version from its repository:</p> <pre><code>cg node update comfyui-impact-pack\n</code></pre> <p>What happens:</p> <ol> <li>Git pull - Fetches latest changes from the node's repository</li> <li>Dependency scan - Checks for updated <code>requirements.txt</code></li> <li>Dependency update - Installs any new or updated Python packages</li> <li>Version update - Updates the commit hash in pyproject.toml</li> </ol> <p>Example output (changes detected):</p> <pre><code>\ud83d\udd04 Updating node: comfyui-impact-pack\n\u2713 Updated to commit abc1234 (10 commits ahead)\n\nRun 'cg status' to review changes\n</code></pre> <p>Example output (no changes):</p> <pre><code>\ud83d\udd04 Updating node: comfyui-impact-pack\n\u2139\ufe0f  Already up to date\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#auto-confirm-updates","title":"Auto-confirm updates","text":"<p>Skip the confirmation prompt with <code>--yes</code>:</p> <pre><code>cg node update comfyui-impact-pack --yes\n</code></pre> <p>Useful for scripting or CI/CD pipelines.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#skip-resolution-testing","title":"Skip resolution testing","text":"<p>By default, ComfyGit tests that updated dependencies don't conflict. Skip this with:</p> <pre><code>cg node update comfyui-impact-pack --no-test\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#updating-development-nodes","title":"Updating development nodes","text":"<p>Development nodes have a different update behavior:</p> <pre><code>cg node update my-custom-node\n</code></pre> <p>For development nodes:</p> <ul> <li>Does not run <code>git pull</code> (you manage git yourself)</li> <li>Does re-scan <code>requirements.txt</code> and sync dependencies</li> <li>Shows what dependencies were added or removed</li> </ul> <p>Example output:</p> <pre><code>\ud83d\udd04 Updating node: my-custom-node\n\u2713 Development node dependencies synced\n  Added dependencies:\n    + opencv-python&gt;=4.8.0\n  Removed dependencies:\n    - pillow&lt;9.0.0\n\nRun 'cg status' to review changes\n</code></pre> <p>When to update development nodes</p> <p>Run <code>cg node update &lt;dev-node&gt;</code> when you:</p> <ul> <li>Change <code>requirements.txt</code> in your dev node</li> <li>Want ComfyGit to sync dependencies to your environment</li> <li>See \"Dev node updates available\" in <code>cg status</code></li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#removing-nodes","title":"Removing nodes","text":"<p>Remove custom nodes from your environment:</p> <pre><code>cg node remove comfyui-impact-pack\n</code></pre> <p>What happens:</p> <ol> <li>Removes from pyproject.toml - Node configuration deleted</li> <li>Deletes directory - Removes <code>custom_nodes/ComfyUI-Impact-Pack/</code></li> <li>Preserves in cache - Node is cached globally and can be reinstalled quickly</li> </ol> <p>Example output:</p> <pre><code>\ud83d\uddd1 Removing node: comfyui-impact-pack\n\u2713 Node 'ComfyUI-Impact-Pack' removed from environment\n   (cached globally, can reinstall)\n\nRun 'cg -e my-env env status' to review changes\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#batch-removal","title":"Batch removal","text":"<p>Remove multiple nodes at once:</p> <pre><code>cg node remove comfyui-impact-pack comfyui-controlnet-aux comfyui-video-helper-suite\n</code></pre> <p>Output:</p> <pre><code>\ud83d\uddd1 Removing 3 nodes...\n  [1/3] Removing comfyui-impact-pack... \u2713\n  [2/3] Removing comfyui-controlnet-aux... \u2713\n  [3/3] Removing comfyui-video-helper-suite... \u2713\n\n\u2705 Removed 3/3 nodes\n\nRun 'cg -e my-env env status' to review changes\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#removing-development-nodes","title":"Removing development nodes","text":"<p>Development nodes are handled differently:</p> <pre><code>cg node remove my-custom-node\n</code></pre> <p>Output:</p> <pre><code>\ud83d\uddd1 Removing node: my-custom-node\n\u2139\ufe0f  Development node 'my-custom-node' removed from tracking\n   Files preserved at: custom_nodes/my-custom-node.disabled/\n</code></pre> <p>Development nodes are:</p> <ul> <li>Removed from tracking - No longer in pyproject.toml</li> <li>Directory renamed - Moved to <code>.disabled</code> suffix to prevent ComfyUI from loading it</li> <li>Not deleted - Your code is preserved</li> </ul> <p>Why preserve development nodes?</p> <p>ComfyGit assumes you want to keep local development work. The directory is disabled (renamed) so ComfyUI won't load it, but your code remains intact.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#remove-development-nodes-with-dev-flag","title":"Remove development nodes with --dev flag","text":"<p>Explicitly remove a development node:</p> <pre><code>cg node remove my-custom-node --dev\n</code></pre> <p>This has the same behavior as regular removal of dev nodes (renames to <code>.disabled</code>).</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#pruning-unused-nodes","title":"Pruning unused nodes","text":"<p>Remove all nodes that aren't used by any tracked workflow:</p> <pre><code>cg node prune\n</code></pre> <p>What it does:</p> <ol> <li>Analyzes all workflows in your environment</li> <li>Identifies nodes not referenced by any workflow</li> <li>Prompts for confirmation</li> <li>Removes unused nodes</li> </ol> <p>Example output:</p> <pre><code>Found 2 unused node(s):\n\n  \u2022 comfyui-old-pack\n  \u2022 comfyui-experimental-feature\n\nRemove 2 node(s)? [y/N]: y\n\n\ud83d\uddd1 Pruning 2 unused nodes...\n  [1/2] Removing comfyui-old-pack... \u2713\n  [2/2] Removing comfyui-experimental-feature... \u2713\n\n\u2713 Removed 2 node(s)\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#auto-confirm-pruning","title":"Auto-confirm pruning","text":"<p>Skip the confirmation prompt:</p> <pre><code>cg node prune --yes\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#exclude-specific-nodes","title":"Exclude specific nodes","text":"<p>Keep certain nodes even if unused:</p> <pre><code>cg node prune --exclude comfyui-dev-tools comfyui-experimental-feature\n</code></pre> <p>This removes unused nodes except the excluded ones.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#when-no-unused-nodes-exist","title":"When no unused nodes exist","text":"<pre><code>\u2713 No unused nodes found\n</code></pre> <p>All installed nodes are referenced by at least one workflow.</p> <p>When to use prune</p> <p>Use <code>cg node prune</code> when:</p> <ul> <li>Cleaning up after testing many nodes</li> <li>Reducing environment size before export</li> <li>Keeping only workflow-essential nodes</li> <li>Preparing a production environment</li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#viewing-node-status","title":"Viewing node status","text":"<p>The <code>cg status</code> command shows node-related information:</p> <pre><code>cg status\n</code></pre> <p>Example output:</p> <pre><code>Environment: my-project \u2713\n\n\ud83d\udce6 Nodes (3 installed):\n  \u2713 comfyui-impact-pack @ abc1234\n  \u2713 comfyui-controlnet-aux @ def6789\n  \u26a0 comfyui-old-node @ ghi0123 (update available)\n\n\ud83d\udd27 Dev node updates available:\n  \u2022 my-custom-node\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#status-indicators","title":"Status indicators","text":"<ul> <li>\u2713 Green checkmark - Node installed and up to date</li> <li>\u26a0 Warning - Update available or issue detected</li> <li>Dev node updates - Development node <code>requirements.txt</code> changed since last sync</li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#syncing-development-node-changes","title":"Syncing development node changes","text":"<p>When you see \"Dev node updates available\":</p> <pre><code>cg node update my-custom-node\n</code></pre> <p>This re-syncs the node's dependencies to your environment.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#node-types-explained","title":"Node types explained","text":"<p>ComfyGit tracks three types of nodes:</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#registry-nodes","title":"Registry nodes","text":"<pre><code>cg node add comfyui-impact-pack\n</code></pre> <ul> <li>Source: ComfyUI registry lookup</li> <li>Management: Full ComfyGit control (update, remove)</li> <li>Version tracking: Git commit hash</li> <li>Listed as: <code>comfyui-impact-pack (registry) @ abc1234</code></li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#git-nodes","title":"Git nodes","text":"<pre><code>cg node add https://github.com/user/custom-node\n</code></pre> <ul> <li>Source: Direct GitHub URL</li> <li>Management: Full ComfyGit control</li> <li>Version tracking: Git commit hash</li> <li>Listed as: <code>custom-node (git) @ def5678</code></li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#development-nodes","title":"Development nodes","text":"<pre><code>cg node add my-local-node --dev\n</code></pre> <ul> <li>Source: Local development directory</li> <li>Management: You handle git, ComfyGit handles dependencies</li> <li>Version tracking: Marked as <code>dev</code></li> <li>Listed as: <code>my-local-node (development) (dev)</code></li> </ul>"},{"location":"user-guide/custom-nodes/managing-nodes/#common-workflows","title":"Common workflows","text":""},{"location":"user-guide/custom-nodes/managing-nodes/#update-all-nodes","title":"Update all nodes","text":"<p>ComfyGit doesn't have a built-in \"update all\" command, but you can script it:</p> <pre><code># List node names and update each\ncg node list | grep '\u2022' | awk '{print $2}' | while read node; do\n    cg node update \"$node\" --yes\ndone\n</code></pre> <p>Use with caution</p> <p>Updating all nodes at once can introduce breaking changes. Test in a non-production environment first.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#clean-up-after-workflow-testing","title":"Clean up after workflow testing","text":"<pre><code># Remove unused nodes after experimenting\ncg node prune --yes\n\n# Commit the cleanup\ncg commit -m \"Pruned unused nodes\"\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#temporarily-disable-a-node","title":"Temporarily disable a node","text":"<p>Instead of removing:</p> <pre><code># Manually rename the directory\ncd ~/comfygit/environments/my-env/ComfyUI/custom_nodes/\nmv ComfyUI-SomeNode ComfyUI-SomeNode.disabled\n</code></pre> <p>ComfyUI won't load <code>.disabled</code> directories. Re-enable by renaming back.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#keep-development-nodes-in-sync","title":"Keep development nodes in sync","text":"<p>Create a git hook in your dev node repository:</p> <pre><code># In your dev node repo: .git/hooks/post-checkout\n#!/bin/bash\ncg node update my-custom-node\n</code></pre> <p>This auto-syncs dependencies when you checkout branches.</p>"},{"location":"user-guide/custom-nodes/managing-nodes/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/custom-nodes/managing-nodes/#node-not-found-when-updating","title":"Node not found when updating","text":"<pre><code>\u2717 Failed to update node 'unknown-node'\n   Node not found in environment\n</code></pre> <p>Solutions:</p> <ol> <li>Check installed nodes:    <pre><code>cg node list\n</code></pre></li> <li>Verify spelling matches the listed name</li> <li>The node may have been removed - reinstall:    <pre><code>cg node add unknown-node\n</code></pre></li> </ol>"},{"location":"user-guide/custom-nodes/managing-nodes/#update-fails-with-git-errors","title":"Update fails with git errors","text":"<pre><code>\u2717 Failed to update node 'comfyui-impact-pack'\n   Git pull failed: uncommitted changes in repository\n</code></pre> <p>Solutions:</p> <ol> <li>Check the node directory for local changes:    <pre><code>cd ~/comfygit/environments/my-env/ComfyUI/custom_nodes/ComfyUI-Impact-Pack\ngit status\n</code></pre></li> <li>Commit or stash changes:    <pre><code>git stash\n</code></pre></li> <li>Try updating again:    <pre><code>cg node update comfyui-impact-pack\n</code></pre></li> </ol>"},{"location":"user-guide/custom-nodes/managing-nodes/#prune-removes-important-nodes","title":"Prune removes important nodes","text":"<p>If you accidentally pruned nodes you need:</p> <pre><code># Rollback to previous version\ncg rollback\n\n# Or reinstall specific nodes\ncg node add comfyui-important-pack\n</code></pre>"},{"location":"user-guide/custom-nodes/managing-nodes/#development-node-not-detected","title":"Development node not detected","text":"<p>If <code>cg node list</code> doesn't show your dev node:</p> <ol> <li>Verify it was added with <code>--dev</code>:    <pre><code>cg node add my-node --dev\n</code></pre></li> <li>Check pyproject.toml:    <pre><code>grep my-node .cec/pyproject.toml\n</code></pre></li> </ol>"},{"location":"user-guide/custom-nodes/managing-nodes/#next-steps","title":"Next steps","text":"<ul> <li> <p> Adding Nodes</p> <p>Install nodes from registry, GitHub, or local development</p> </li> <li> <p> Node Conflicts</p> <p>Resolve dependency conflicts between nodes</p> </li> <li> <p> Repair Command</p> <p>Fix environment sync issues with <code>cg repair</code></p> </li> </ul>"},{"location":"user-guide/custom-nodes/node-conflicts/","title":"Resolving Node Conflicts","text":"<p>Understand and fix dependency conflicts when adding or updating custom nodes.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#overview","title":"Overview","text":"<p>Node conflicts occur when two or more custom nodes require incompatible versions of the same Python package. ComfyGit uses UV's dependency resolver to detect these conflicts early and provide actionable solutions.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#what-are-dependency-conflicts","title":"What are dependency conflicts?","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#example-conflict-scenario","title":"Example conflict scenario","text":"<p>Imagine you have:</p> <ul> <li>Node A requires <code>torch&gt;=2.1.0</code></li> <li>Node B requires <code>torch==2.0.0</code></li> </ul> <p>These requirements are incompatible - you can't satisfy both in the same Python environment. ComfyGit detects this during installation and prevents broken environments.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#why-conflicts-happen","title":"Why conflicts happen","text":"<p>Common causes:</p> <ul> <li>PyTorch version differences - Nodes built for different CUDA versions</li> <li>Pinned dependencies - Node hardcodes <code>package==1.0.0</code> instead of <code>package&gt;=1.0.0</code></li> <li>Outdated requirements - Node hasn't updated its <code>requirements.txt</code></li> <li>Conflicting sub-dependencies - Package A needs X v1, Package B needs X v2</li> </ul>"},{"location":"user-guide/custom-nodes/node-conflicts/#how-comfygit-detects-conflicts","title":"How ComfyGit detects conflicts","text":"<p>When you run <code>cg node add</code> or <code>cg node update</code>, ComfyGit:</p> <ol> <li>Parses requirements.txt - Reads the node's dependencies</li> <li>Runs UV resolution - Attempts to resolve all dependencies together</li> <li>Detects conflicts - UV reports incompatibilities</li> <li>Displays error - Shows conflict details with suggested fixes</li> </ol> <p>By default, ComfyGit prevents installing nodes that would break your environment.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#reading-conflict-error-messages","title":"Reading conflict error messages","text":"<p>When a dependency conflict occurs, ComfyGit displays uv's native resolution output. This shows exactly which packages conflict and why, with the full dependency chain.</p> <p>Example output:</p> <pre><code>\u2717 Dependency conflict detected\n\n  \u00d7 No solution found when resolving dependencies:\n  \u2570\u2500\u25b6 Because node-a depends on torch==2.0.0 and node-b depends on torch&gt;=2.1.0,\n      we can conclude that node-a and node-b are incompatible.\n      And because you require node-a and node-b, we can conclude that\n      your requirements are unsatisfiable.\n</code></pre> <p>The uv resolver provides detailed information about:</p> <ul> <li>Which packages have conflicting requirements</li> <li>The full dependency chain showing why each version is required</li> <li>Which combination of packages cannot be satisfied together</li> </ul>"},{"location":"user-guide/custom-nodes/node-conflicts/#common-conflict-types","title":"Common conflict types","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#pytorch-version-conflicts","title":"PyTorch version conflicts","text":"<p>Most common conflict - Different CUDA backends or PyTorch versions.</p> <p>Example:</p> <pre><code>\u2717 Failed to add node 'cuda-node'\n  torch==2.0.1+cu117 conflicts with torch==2.1.0+cu121\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Check your PyTorch backend: <pre><code># View current PyTorch version\ncg py list | grep torch\n</code></pre></p> </li> <li> <p>Recreate environment with matching backend: <pre><code># If node needs CUDA 11.7\ncg create new-env --torch-backend cu117\ncg -e new-env node add cuda-node\n</code></pre></p> </li> <li> <p>Update the node (if newer version supports your PyTorch):    <pre><code>cg node update cuda-node\n</code></pre></p> </li> <li> <p>Use constraints to pin PyTorch version:    <pre><code>cg constraint add \"torch==2.1.0\"\ncg node add cuda-node\n</code></pre></p> </li> </ol>"},{"location":"user-guide/custom-nodes/node-conflicts/#package-pinning-conflicts","title":"Package pinning conflicts","text":"<p>Example:</p> <pre><code>\u2717 Failed to add node 'old-node'\n  pillow==8.0.0 (required by old-node)\n  conflicts with pillow&gt;=9.0.0 (required by another-node)\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Check if node has updates: <pre><code># Try adding latest version\ncg node add old-node@main\n</code></pre></p> </li> <li> <p>Manually edit requirements.txt (for development nodes):    <pre><code>cd custom_nodes/old-node\n# Change pillow==8.0.0 to pillow&gt;=8.0.0\nnano requirements.txt\ncg node update old-node\n</code></pre></p> </li> <li> <p>Remove conflicting node: <pre><code>cg node remove another-node\ncg node add old-node\n</code></pre></p> </li> </ol>"},{"location":"user-guide/custom-nodes/node-conflicts/#directory-name-conflicts","title":"Directory name conflicts","text":"<p>Example:</p> <pre><code>\u2717 Cannot add node 'comfyui-impact-pack'\n  Directory custom_nodes/ComfyUI-Impact-Pack already exists\n  Filesystem: https://github.com/yourfork/ComfyUI-Impact-Pack\n  Registry:   https://github.com/ltdrdata/ComfyUI-Impact-Pack\n\nSuggested actions:\n  1. Remove existing node\n     \u2192 cg node remove comfyui-impact-pack\n\n  2. Force overwrite existing directory\n     \u2192 cg node add comfyui-impact-pack --force\n\n  3. Rename existing directory\n     \u2192 mv custom_nodes/ComfyUI-Impact-Pack custom_nodes/ComfyUI-Impact-Pack-old\n</code></pre> <p>Solutions:</p> <p>Choose based on what you want:</p> <ul> <li>Use the registry version: Follow suggestion 1 (remove) or 2 (force)</li> <li>Keep your fork: Remove from pyproject.toml, then re-add as git URL:   <pre><code>cg node remove comfyui-impact-pack\ncg node add https://github.com/yourfork/ComfyUI-Impact-Pack --dev\n</code></pre></li> <li>Keep both: Manually rename one directory (suggestion 3)</li> </ul>"},{"location":"user-guide/custom-nodes/node-conflicts/#sub-dependency-conflicts","title":"Sub-dependency conflicts","text":"<p>Example:</p> <pre><code>\u2717 Failed to add node 'node-x'\n  Package 'requests' requires urllib3&gt;=1.26\n  Package 'boto3' requires urllib3&lt;1.27\n</code></pre> <p>This is a transitive dependency conflict - neither node directly requires urllib3, but their dependencies do.</p> <p>Solutions:</p> <ol> <li> <p>Use constraints to force a compatible version: <pre><code>cg constraint add \"urllib3&gt;=1.26,&lt;1.27\"\ncg node add node-x\n</code></pre></p> </li> <li> <p>Update existing nodes - newer versions may have relaxed constraints:    <pre><code>cg node update boto3-node\ncg node add node-x\n</code></pre></p> </li> <li> <p>Skip resolution testing (risky):    <pre><code>cg node add node-x --no-test\n</code></pre></p> </li> </ol>"},{"location":"user-guide/custom-nodes/node-conflicts/#resolution-strategies","title":"Resolution strategies","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#interactive-resolution-default","title":"Interactive resolution (default)","text":"<p>When conflicts occur, ComfyGit shows suggestions:</p> <pre><code>\u2717 Cannot add node 'new-node'\n  torch==2.0.0 conflicts with torch&gt;=2.1.0\n\nSuggested actions:\n  1. Update conflicting node\n     \u2192 cg node update old-node\n\n  2. Remove conflicting node\n     \u2192 cg node remove old-node\n\nWhat would you like to do? [1/2/cancel]:\n</code></pre> <p>Choose the appropriate action or cancel.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#force-overwrite-force","title":"Force overwrite (--force)","text":"<p>Override directory conflicts:</p> <pre><code>cg node add comfyui-pack --force\n</code></pre> <p>This deletes the existing directory and re-downloads/re-installs the node. Use when:</p> <ul> <li>You want the registry version instead of a fork</li> <li>The directory is corrupted</li> <li>You're okay losing local changes</li> </ul> <p>Destructive operation</p> <p><code>--force</code> permanently deletes the existing directory. Any uncommitted changes are lost.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#skip-resolution-testing-no-test","title":"Skip resolution testing (--no-test)","text":"<p>Bypass dependency conflict detection:</p> <pre><code>cg node add problematic-node --no-test\n</code></pre> <p>ComfyGit will:</p> <ul> <li>Not test if dependencies can resolve</li> <li>Still install the node and its dependencies</li> <li>Hope UV can handle it at runtime</li> </ul> <p>Use when:</p> <ul> <li>You know the conflict is a false positive</li> <li>The node's requirements.txt is incorrect but the code works</li> <li>You'll manually fix dependencies later</li> </ul> <p>Risk of broken environment</p> <p><code>--no-test</code> can result in an environment where <code>cg repair</code> fails. Use carefully and test thoroughly.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#using-constraints-to-prevent-conflicts","title":"Using constraints to prevent conflicts","text":"<p>Constraints are UV-specific dependency pins that apply globally to your environment.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#what-are-constraints","title":"What are constraints?","text":"<p>Think of constraints as \"meta-dependencies\" that restrict what versions UV can choose:</p> <pre><code># Prevent PyTorch from updating past 2.1.x\ncg constraint add \"torch&gt;=2.1.0,&lt;2.2.0\"\n\n# Pin NumPy to a specific version\ncg constraint add \"numpy==1.24.0\"\n</code></pre> <p>Now, any node that requires incompatible versions will be rejected before installation.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#common-constraint-patterns","title":"Common constraint patterns","text":"<p>Pin PyTorch backend:</p> <pre><code># Lock to CUDA 12.1\ncg constraint add \"torch==2.1.0+cu121\"\n</code></pre> <p>Prevent major version updates:</p> <pre><code># Stay on Pillow 9.x\ncg constraint add \"pillow&gt;=9.0.0,&lt;10.0.0\"\n</code></pre> <p>Force minimum versions:</p> <pre><code># Ensure modern numpy\ncg constraint add \"numpy&gt;=1.24.0\"\n</code></pre>"},{"location":"user-guide/custom-nodes/node-conflicts/#managing-constraints","title":"Managing constraints","text":"<p>List active constraints:</p> <pre><code>cg constraint list\n</code></pre> <p>Remove a constraint:</p> <pre><code>cg constraint remove torch\n</code></pre> <p>See Python Dependencies: Constraints for more details.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#practical-conflict-resolution-workflow","title":"Practical conflict resolution workflow","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#step-1-identify-the-conflict","title":"Step 1: Identify the conflict","text":"<pre><code>cg node add new-node\n</code></pre> <p>Read the error message carefully to understand:</p> <ul> <li>Which packages conflict</li> <li>Which nodes require them</li> <li>What versions are needed</li> </ul>"},{"location":"user-guide/custom-nodes/node-conflicts/#step-2-check-existing-nodes","title":"Step 2: Check existing nodes","text":"<pre><code>cg node list\n</code></pre> <p>Identify if the conflicting node is:</p> <ul> <li>Essential - Keep it, reject the new node or find alternatives</li> <li>Unused - Remove it with <code>cg node remove</code></li> <li>Outdated - Update it with <code>cg node update</code></li> </ul>"},{"location":"user-guide/custom-nodes/node-conflicts/#step-3-try-suggested-actions","title":"Step 3: Try suggested actions","text":"<p>ComfyGit's suggested actions are usually the best path:</p> <pre><code>Suggested actions:\n  1. Update existing node to compatible version\n     \u2192 cg node update old-node\n</code></pre> <p>Follow the suggestions in order.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#step-4-use-constraints-if-needed","title":"Step 4: Use constraints if needed","text":"<p>For persistent conflicts:</p> <pre><code># Pin the problematic package to a compatible version\ncg constraint add \"package&gt;=1.0,&lt;2.0\"\ncg node add new-node\n</code></pre>"},{"location":"user-guide/custom-nodes/node-conflicts/#step-5-test-the-resolution","title":"Step 5: Test the resolution","text":"<p>After resolving conflicts:</p> <pre><code># Verify environment is consistent\ncg status\n\n# Test ComfyUI loads\ncg run\n</code></pre> <p>Ensure no errors appear when ComfyUI starts.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#advanced-techniques","title":"Advanced techniques","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#dependency-conflict-debugging","title":"Dependency conflict debugging","text":"<p>View full UV error output:</p> <pre><code>cg debug -n 100\n</code></pre> <p>This shows the complete UV resolution error, not just the summary.</p> <p>Manually test resolution:</p> <pre><code>cd ~/comfygit/environments/my-env/.cec\nuv pip compile pyproject.toml\n</code></pre> <p>This runs UV's resolver directly and shows detailed conflict traces.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#creating-conflict-free-environments","title":"Creating conflict-free environments","text":"<p>Start with a constraint file:</p> <pre><code># constraints.txt\ntorch==2.1.0+cu121\npillow&gt;=9.0.0,&lt;10.0.0\nnumpy&gt;=1.24.0\n\n# Add constraints before adding nodes\ncg constraint add -r constraints.txt\ncg node add node-a node-b node-c\n</code></pre> <p>This establishes a \"compatibility baseline\" before installing nodes.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#splitting-environments-by-compatibility","title":"Splitting environments by compatibility","text":"<p>If nodes are fundamentally incompatible:</p> <pre><code># Environment 1: PyTorch 2.0 nodes\ncg create torch20-env --torch-backend cu117\ncg -e torch20-env node add old-node\n\n# Environment 2: PyTorch 2.1 nodes\ncg create torch21-env --torch-backend cu121\ncg -e torch21-env node add new-node\n</code></pre> <p>Use separate environments for incompatible node ecosystems.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#when-conflicts-cant-be-resolved","title":"When conflicts can't be resolved","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#fundamental-incompatibilities","title":"Fundamental incompatibilities","text":"<p>Some nodes simply cannot coexist:</p> <ul> <li>Different major PyTorch versions (1.x vs 2.x)</li> <li>CPU-only vs GPU-specific packages</li> <li>Conflicting C extensions (opencv-python vs opencv-python-headless)</li> </ul> <p>Solution: Use separate environments or choose one node over the other.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#reporting-upstream-issues","title":"Reporting upstream issues","text":"<p>If a node has overly restrictive requirements:</p> <ol> <li>Check the node's GitHub issues for existing reports</li> <li>Test if relaxing the constraint works:    <pre><code># Edit custom_nodes/node-name/requirements.txt\n# Change torch==2.0.0 to torch&gt;=2.0.0\ncg node update node-name\n</code></pre></li> <li>If it works, open a PR to the node's repository</li> <li>Track it as a development node with your fix:    <pre><code>cg node add node-name --dev\n</code></pre></li> </ol>"},{"location":"user-guide/custom-nodes/node-conflicts/#troubleshooting-common-scenarios","title":"Troubleshooting common scenarios","text":""},{"location":"user-guide/custom-nodes/node-conflicts/#package-not-found-after-conflict-resolution","title":"\"Package not found\" after conflict resolution","text":"<p>Sometimes UV can't find a package version that satisfies all constraints.</p> <p>Example:</p> <pre><code>\u2717 Failed to resolve dependencies\n  No version of 'obscure-package' satisfies constraints\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Remove the overly restrictive constraint: <pre><code>cg constraint list\ncg constraint remove obscure-package\n</code></pre></p> </li> <li> <p>Add the package manually with a broader range: <pre><code>cg py add \"obscure-package&gt;=1.0\"\n</code></pre></p> </li> </ol>"},{"location":"user-guide/custom-nodes/node-conflicts/#environment-becomes-unsynced-after-conflict","title":"Environment becomes unsynced after conflict","text":"<p>After resolving conflicts, you might see:</p> <pre><code>cg status\n</code></pre> <pre><code>Environment: my-env \u26a0\n\n\u26a0 Environment out of sync (2 changes)\n</code></pre> <p>Solution:</p> <pre><code>cg repair\n</code></pre> <p>This synchronizes the environment to match pyproject.toml.</p>"},{"location":"user-guide/custom-nodes/node-conflicts/#circular-dependency-errors","title":"Circular dependency errors","text":"<p>UV reports circular dependencies:</p> <pre><code>\u2717 Circular dependency detected: A \u2192 B \u2192 C \u2192 A\n</code></pre> <p>Solutions:</p> <ol> <li> <p>Update all involved nodes - one may have fixed it:    <pre><code>cg node update node-a node-b node-c\n</code></pre></p> </li> <li> <p>Remove one node from the cycle:    <pre><code>cg node remove node-c\n</code></pre></p> </li> <li> <p>Report to node maintainers - this is a packaging bug</p> </li> </ol>"},{"location":"user-guide/custom-nodes/node-conflicts/#next-steps","title":"Next steps","text":"<ul> <li> <p> Adding Nodes</p> <p>Install nodes from registry, GitHub, or local development</p> </li> <li> <p> Managing Nodes</p> <p>List, update, remove, and prune installed nodes</p> </li> <li> <p> Python Dependencies</p> <p>Manage Python packages and constraints</p> </li> <li> <p> Environment Repair</p> <p>Fix sync issues with the repair command</p> </li> </ul>"},{"location":"user-guide/environments/creating-environments/","title":"Creating Environments","text":"<p>Everything you need to know about creating isolated ComfyUI environments with different Python versions, ComfyUI versions, and hardware configurations.</p>"},{"location":"user-guide/environments/creating-environments/#prerequisites","title":"Prerequisites","text":"<ul> <li>ComfyGit workspace initialized \u2014 <code>cg init</code></li> <li>Internet connection for downloading ComfyUI and dependencies</li> <li>Disk space (2-5 GB per environment depending on PyTorch backend)</li> </ul>"},{"location":"user-guide/environments/creating-environments/#basic-environment-creation","title":"Basic environment creation","text":"<p>Create a new environment with default settings:</p> <pre><code>cg create my-env\n</code></pre> <p>This creates an environment with:</p> <ul> <li>Python 3.12 (default version)</li> <li>Latest ComfyUI (master branch)</li> <li>PyTorch with auto-detected GPU support (CUDA, ROCm, or CPU)</li> <li>Isolated Python virtual environment</li> <li>Git-tracked configuration in <code>.cec/</code></li> </ul> <p>Output:</p> <pre><code>\ud83d\ude80 Creating environment: my-env\n   This will download PyTorch and dependencies (may take a few minutes)...\n\n\u2713 Environment created: my-env\n\nNext steps:\n  \u2022 Run ComfyUI: cg -e my-env run\n  \u2022 Add nodes: cg -e my-env node add &lt;node-name&gt;\n  \u2022 Set as active: cg use my-env\n</code></pre> <p>What's happening?</p> <p>ComfyGit creates an isolated directory at <code>~/comfygit/environments/my-env/</code>, downloads ComfyUI from GitHub, sets up a Python virtual environment with UV, installs PyTorch and dependencies, and initializes a git repository in <code>.cec/</code> for version control.</p>"},{"location":"user-guide/environments/creating-environments/#setting-as-active-environment","title":"Setting as active environment","text":"<p>Skip the <code>-e</code> flag on every command by setting an active environment:</p> <pre><code>cg create my-env --use\n</code></pre> <p>Output:</p> <pre><code>\u2713 Environment created: my-env\n\u2713 Active environment set to: my-env\n\nNext steps:\n  \u2022 Run ComfyUI: cg run\n  \u2022 Add nodes: cg node add &lt;node-name&gt;\n</code></pre> <p>Now you can run commands without specifying <code>-e my-env</code>.</p>"},{"location":"user-guide/environments/creating-environments/#specifying-python-version","title":"Specifying Python version","text":"<p>Choose a specific Python version:</p> <pre><code># Python 3.11\ncg create py311-env --python 3.11\n\n# Python 3.10\ncg create legacy-env --python 3.10\n\n# Python 3.12 (default)\ncg create modern-env --python 3.12\n</code></pre> <p>The Python version is pinned in <code>.cec/.python-version</code> and UV ensures that exact version is used.</p> <p>Python version availability</p> <p>UV will download the specified Python version if it's not already installed. Make sure the version you specify is supported by ComfyUI (typically 3.10+).</p>"},{"location":"user-guide/environments/creating-environments/#specifying-comfyui-version","title":"Specifying ComfyUI version","text":""},{"location":"user-guide/environments/creating-environments/#latest-comfyui-default","title":"Latest ComfyUI (default)","text":"<pre><code>cg create latest-env\n</code></pre> <p>Uses the <code>master</code> branch HEAD.</p>"},{"location":"user-guide/environments/creating-environments/#specific-comfyui-version-tag","title":"Specific ComfyUI version tag","text":"<pre><code># Specific release version\ncg create stable-env --comfyui v0.2.2\n\n# Another version\ncg create older-env --comfyui v0.1.0\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#specific-branch","title":"Specific branch","text":"<pre><code># Development branch\ncg create dev-env --comfyui dev\n\n# Feature branch\ncg create feature-env --comfyui feature/new-nodes\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#specific-commit-sha","title":"Specific commit SHA","text":"<pre><code># Pin to exact commit\ncg create pinned-env --comfyui a1b2c3d4\n</code></pre> <p>ComfyUI caching</p> <p>ComfyGit caches downloaded ComfyUI versions locally. If you create multiple environments with the same ComfyUI version, the second one will be much faster (restored from cache instead of re-cloning).</p>"},{"location":"user-guide/environments/creating-environments/#pytorch-backend-configuration","title":"PyTorch backend configuration","text":"<p>ComfyGit supports multiple PyTorch backends for different hardware:</p>"},{"location":"user-guide/environments/creating-environments/#auto-detection-default","title":"Auto-detection (default)","text":"<pre><code>cg create auto-env\n</code></pre> <p>Automatically detects your GPU:</p> <ul> <li>NVIDIA GPU \u2192 Installs CUDA 12.8 backend</li> <li>AMD GPU \u2192 Installs ROCm backend</li> <li>No GPU \u2192 Installs CPU-only backend</li> </ul>"},{"location":"user-guide/environments/creating-environments/#specific-cuda-version","title":"Specific CUDA version","text":"<pre><code># CUDA 12.8 (latest, recommended for RTX 40-series)\ncg create cuda128-env --torch-backend cu128\n\n# CUDA 12.6\ncg create cuda126-env --torch-backend cu126\n\n# CUDA 12.4\ncg create cuda124-env --torch-backend cu124\n\n# CUDA 11.8 (for older GPUs)\ncg create cuda118-env --torch-backend cu118\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#amd-rocm","title":"AMD ROCm","text":"<pre><code># ROCm 6.3 (for AMD GPUs)\ncg create amd-env --torch-backend rocm6.3\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#intel-xpu","title":"Intel XPU","text":"<pre><code># Intel Arc GPUs\ncg create intel-env --torch-backend xpu\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#cpu-only","title":"CPU-only","text":"<pre><code># No GPU acceleration\ncg create cpu-env --torch-backend cpu\n</code></pre> <p>When to specify backend manually</p> <p>Auto-detection works for most users. Specify backend manually when:</p> <ul> <li>You want a specific CUDA version for compatibility</li> <li>Auto-detection picks the wrong backend</li> <li>You're creating a CPU-only environment on a GPU machine</li> <li>You need to match another environment's configuration</li> </ul>"},{"location":"user-guide/environments/creating-environments/#combining-options","title":"Combining options","text":"<p>Create a fully customized environment:</p> <pre><code>cg create production \\\n  --python 3.11 \\\n  --comfyui v0.2.2 \\\n  --torch-backend cu128 \\\n  --use\n</code></pre> <p>Creates environment with:</p> <ul> <li>Python 3.11</li> <li>ComfyUI v0.2.2</li> <li>PyTorch with CUDA 12.8</li> <li>Set as active environment</li> </ul>"},{"location":"user-guide/environments/creating-environments/#environment-naming-rules","title":"Environment naming rules","text":"<p>Environment names must follow these rules:</p> <p>\u2705 Valid names:</p> <pre><code>cg create my-project\ncg create sdxl-testing\ncg create env_123\ncg create production-v2\n</code></pre> <p>\u274c Invalid names:</p> <pre><code># Reserved names (case-insensitive)\ncg create workspace  # Reserved\ncg create models     # Reserved\ncg create logs       # Reserved\n\n# Hidden directories\ncg create .hidden    # Cannot start with '.'\n\n# Path separators\ncg create my/env     # No slashes\ncg create my\\\\env    # No backslashes\ncg create ../env     # No path traversal\n\n# Empty names\ncg create \"\"         # Must have a name\n</code></pre> <p>Reserved names</p> <p>These names are reserved for ComfyGit internal directories: <code>workspace</code>, <code>logs</code>, <code>models</code>, <code>comfygit</code></p>"},{"location":"user-guide/environments/creating-environments/#what-happens-during-creation","title":"What happens during creation?","text":"<p>Understanding the creation process helps troubleshoot issues:</p> <ol> <li>Validate environment name \u2014 Check for reserved names and invalid characters</li> <li>Create directory structure \u2014 <code>~/comfygit/environments/my-env/.cec/</code></li> <li>Pin Python version \u2014 Write <code>.python-version</code> file</li> <li>Clone ComfyUI \u2014 Download from GitHub (or restore from cache)</li> <li>Create virtual environment \u2014 Use UV to create <code>.venv/</code></li> <li>Install PyTorch \u2014 Download PyTorch with specified backend</li> <li>Detect backend \u2014 Extract backend from installed PyTorch version</li> <li>Configure UV index \u2014 Add PyTorch download index to <code>pyproject.toml</code></li> <li>Pin PyTorch versions \u2014 Lock torch, torchvision, torchaudio versions</li> <li>Install ComfyUI requirements \u2014 Add dependencies from <code>requirements.txt</code></li> <li>Sync dependencies \u2014 Final UV sync to install everything</li> <li>Initialize git \u2014 Create <code>.cec/.git/</code> with initial commit</li> <li>Create model symlink \u2014 Link <code>ComfyUI/models/</code> to workspace models directory</li> </ol> <p>Typical creation time:</p> <ul> <li>With internet: 2-5 minutes (mostly PyTorch download)</li> <li>From cache: 30-60 seconds (ComfyUI already cached)</li> <li>Subsequent creates: Faster as PyTorch packages are cached locally</li> </ul>"},{"location":"user-guide/environments/creating-environments/#common-variations","title":"Common variations","text":""},{"location":"user-guide/environments/creating-environments/#minimal-environment-for-testing","title":"Minimal environment for testing","text":"<pre><code>cg create test --use\n</code></pre> <p>Quick environment with all defaults for experimentation.</p>"},{"location":"user-guide/environments/creating-environments/#production-environment","title":"Production environment","text":"<pre><code>cg create production \\\n  --python 3.11 \\\n  --comfyui v0.2.2 \\\n  --torch-backend cu128\n</code></pre> <p>Pinned versions for stability.</p>"},{"location":"user-guide/environments/creating-environments/#development-environment","title":"Development environment","text":"<pre><code>cg create dev --comfyui dev --use\n</code></pre> <p>Track ComfyUI's development branch for latest features.</p>"},{"location":"user-guide/environments/creating-environments/#multiple-environments-for-different-projects","title":"Multiple environments for different projects","text":"<pre><code># Client A's project\ncg create client-a --comfyui v0.2.2\n\n# Client B's project\ncg create client-b --comfyui v0.2.1\n\n# Personal experiments\ncg create playground --use\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/environments/creating-environments/#creation-fails-during-pytorch-install","title":"Creation fails during PyTorch install","text":"<p>Symptom: Error during \"Installing PyTorch with backend: auto\"</p> <p>Solutions:</p> <pre><code># Try CPU-only first to test\ncg create test-cpu --torch-backend cpu\n\n# Specify exact CUDA version\ncg create test-cuda --torch-backend cu128\n\n# Check disk space\ndf -h ~/comfygit\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#environment-already-exists","title":"Environment already exists","text":"<p>Symptom: <code>Environment 'my-env' already exists</code></p> <p>Solutions:</p> <pre><code># List existing environments\ncg list\n\n# Delete the old environment first\ncg delete my-env\n\n# Or choose a different name\ncg create my-env-v2\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#comfyui-clone-fails","title":"ComfyUI clone fails","text":"<p>Symptom: Failed during \"Cloning ComfyUI...\"</p> <p>Solutions:</p> <pre><code># Check internet connection\nping github.com\n\n# Try a specific version instead of latest\ncg create test --comfyui v0.2.2\n\n# Check GitHub API rate limits (rare)\ncurl -I https://api.github.com/rate_limit\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#python-version-not-available","title":"Python version not available","text":"<p>Symptom: UV cannot find specified Python version</p> <p>Solutions:</p> <pre><code># Let UV download it automatically (it will)\n# Or install Python manually first\n\n# On macOS\nbrew install python@3.11\n\n# On Ubuntu\nsudo apt install python3.11\n\n# Then retry creation\ncg create my-env --python 3.11\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#interrupted-creation-leaves-partial-environment","title":"Interrupted creation leaves partial environment","text":"<p>Symptom: Ctrl+C during creation, environment partially created</p> <p>Solution:</p> <p>ComfyGit automatically cleans up partial environments. If cleanup fails:</p> <pre><code># Manually delete the partial environment\ncg delete my-env\n\n# Or remove directory directly\nrm -rf ~/comfygit/environments/my-env\n</code></pre>"},{"location":"user-guide/environments/creating-environments/#next-steps","title":"Next steps","text":"<p>After creating an environment:</p> <ul> <li>Run ComfyUI \u2014 Start the web interface</li> <li>Check status \u2014 Verify environment is ready</li> <li>Add custom nodes \u2014 Install extensions</li> <li>Version control \u2014 Commit your configuration</li> </ul>"},{"location":"user-guide/environments/creating-environments/#see-also","title":"See also","text":"<ul> <li>Core Concepts \u2014 Deep dive into environment architecture</li> <li>CLI Reference \u2014 Complete create command documentation</li> <li>Python Dependencies \u2014 Managing packages</li> </ul>"},{"location":"user-guide/environments/running-comfyui/","title":"Running ComfyUI","text":"<p>Learn how to start, stop, and manage the ComfyUI web interface in your environments.</p>"},{"location":"user-guide/environments/running-comfyui/#prerequisites","title":"Prerequisites","text":"<ul> <li>Environment created \u2014 <code>cg create my-env</code></li> <li>Environment set as active \u2014 <code>cg use my-env</code> (or use <code>-e</code> flag)</li> </ul>"},{"location":"user-guide/environments/running-comfyui/#basic-usage","title":"Basic usage","text":"<p>Start ComfyUI in your active environment:</p> <pre><code>cg run\n</code></pre> <p>Output:</p> <pre><code>\ud83c\udfae Starting ComfyUI in environment: my-env\n</code></pre> <p>ComfyUI then outputs its startup logs and opens on http://localhost:8188</p> <p>First run</p> <p>The first time you run ComfyUI in an environment, it may take a few seconds to initialize. Subsequent runs are faster.</p>"},{"location":"user-guide/environments/running-comfyui/#running-in-specific-environment","title":"Running in specific environment","text":"<p>If you don't have an active environment set:</p> <pre><code>cg -e my-env run\n</code></pre> <p>Or switch environments:</p> <pre><code># Set active\ncg use my-env\n\n# Then run\ncg run\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#accessing-comfyui","title":"Accessing ComfyUI","text":"<p>Once running, open your browser to:</p> <pre><code>http://localhost:8188\n</code></pre> <p>You should see:</p> <ul> <li>ComfyUI's web interface</li> <li>Default workflow loaded</li> <li>Node library on the left</li> <li>Canvas in the center</li> </ul>"},{"location":"user-guide/environments/running-comfyui/#stopping-comfyui","title":"Stopping ComfyUI","text":"<p>ComfyUI runs in the foreground by default. To stop it:</p> <p>Press Ctrl+C in the terminal</p> <pre><code>^C\n\u2713 ComfyUI stopped\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#running-in-the-background","title":"Running in the background","text":""},{"location":"user-guide/environments/running-comfyui/#using","title":"Using &amp;","text":"<p>Run ComfyUI in the background:</p> <pre><code>cg run &amp;\n</code></pre> <p>To stop:</p> <pre><code># Find the process\nps aux | grep ComfyUI\n\n# Kill it\nkill &lt;PID&gt;\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#using-screen","title":"Using screen","text":"<p>More reliable for long-running sessions:</p> <pre><code># Start a screen session\nscreen -S comfy\n\n# Run ComfyUI\ncg run\n\n# Detach with Ctrl+A, then D\n</code></pre> <p>To reattach:</p> <pre><code>screen -r comfy\n</code></pre> <p>To stop:</p> <pre><code># Reattach\nscreen -r comfy\n\n# Press Ctrl+C\n# Exit screen\nexit\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#using-tmux","title":"Using tmux","text":"<p>Another option for persistent sessions:</p> <pre><code># Start tmux session\ntmux new -s comfy\n\n# Run ComfyUI\ncg run\n\n# Detach with Ctrl+B, then D\n</code></pre> <p>To reattach:</p> <pre><code>tmux attach -t comfy\n</code></pre> <p>To stop:</p> <pre><code># Reattach\ntmux attach -t comfy\n\n# Press Ctrl+C\n# Exit tmux\nexit\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#passing-arguments-to-comfyui","title":"Passing arguments to ComfyUI","text":"<p>ComfyGit passes all arguments after <code>run</code> directly to ComfyUI's <code>main.py</code>:</p>"},{"location":"user-guide/environments/running-comfyui/#change-port","title":"Change port","text":"<pre><code># Run on port 8080\ncg run --port 8080\n</code></pre> <p>Access at: <code>http://localhost:8080</code></p>"},{"location":"user-guide/environments/running-comfyui/#listen-on-all-interfaces","title":"Listen on all interfaces","text":"<pre><code># Allow external access\ncg run --listen 0.0.0.0\n</code></pre> <p>Security</p> <p>Only use <code>--listen 0.0.0.0</code> on trusted networks. This exposes ComfyUI to your entire network.</p>"},{"location":"user-guide/environments/running-comfyui/#auto-launch-browser","title":"Auto-launch browser","text":"<pre><code># Open browser automatically\ncg run --auto-launch\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#enable-cors","title":"Enable CORS","text":"<pre><code># Allow cross-origin requests\ncg run --enable-cors-header\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#disable-gpu","title":"Disable GPU","text":"<pre><code># Force CPU-only execution\ncg run --cpu\n</code></pre> <p>Useful for testing or if GPU is in use.</p>"},{"location":"user-guide/environments/running-comfyui/#multiple-arguments","title":"Multiple arguments","text":"<p>Combine any ComfyUI arguments:</p> <pre><code>cg run --port 8080 --listen 0.0.0.0 --auto-launch\n</code></pre> <p>Output:</p> <pre><code>\ud83c\udfae Starting ComfyUI in environment: my-env\n   Arguments: --port 8080 --listen 0.0.0.0 --auto-launch\n</code></pre> <p>ComfyUI arguments</p> <p>For a full list of ComfyUI arguments, run: <pre><code>cg run -- --help\n</code></pre> The <code>--</code> separator tells cg to pass all remaining arguments to ComfyUI.</p>"},{"location":"user-guide/environments/running-comfyui/#running-multiple-environments-simultaneously","title":"Running multiple environments simultaneously","text":"<p>You can run different environments on different ports:</p> <pre><code># Terminal 1: production on default port\ncg -e production run\n\n# Terminal 2: testing on port 8189\ncg -e testing run --port 8189\n\n# Terminal 3: dev on port 8190\ncg -e dev run --port 8190\n</code></pre> <p>Access each at:</p> <ul> <li>Production: <code>http://localhost:8188</code></li> <li>Testing: <code>http://localhost:8189</code></li> <li>Dev: <code>http://localhost:8190</code></li> </ul> <p>Resource usage</p> <p>Running multiple ComfyUI instances simultaneously uses significant GPU memory. You may need to reduce batch sizes or use CPU mode for secondary instances.</p>"},{"location":"user-guide/environments/running-comfyui/#checking-logs","title":"Checking logs","text":"<p>If ComfyUI fails to start or behaves unexpectedly:</p>"},{"location":"user-guide/environments/running-comfyui/#comfyui-output","title":"ComfyUI output","text":"<p>ComfyUI prints logs directly to your terminal when run in the foreground. Look for:</p> <ul> <li>Errors during startup \u2014 Missing dependencies, port conflicts</li> <li>Model loading issues \u2014 Missing models, corrupt files</li> <li>Custom node errors \u2014 Failed imports, missing packages</li> </ul>"},{"location":"user-guide/environments/running-comfyui/#comfygit-logs","title":"ComfyGit logs","text":"<p>For environment-level issues:</p> <pre><code># Show recent logs\ncg debug -n 50\n\n# Show all logs\ncg debug\n\n# Follow logs in real-time\ntail -f ~/comfygit/logs/comfygit.log\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#common-scenarios","title":"Common scenarios","text":""},{"location":"user-guide/environments/running-comfyui/#quick-testing","title":"Quick testing","text":"<pre><code># Start, test, stop\ncg run\n# Use ComfyUI...\n# Ctrl+C when done\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#long-running-server","title":"Long-running server","text":"<pre><code># Use screen or tmux\nscreen -S comfy\ncg run\n\n# Detach: Ctrl+A, D\n# ComfyUI keeps running\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#development-workflow","title":"Development workflow","text":"<pre><code># Terminal 1: Run ComfyUI\ncg run\n\n# Terminal 2: Make changes, test, commit\ncg node add new-node\n# Test in browser...\ncg commit -m \"Added new node\"\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#testing-workflow-files","title":"Testing workflow files","text":"<pre><code># Start ComfyUI\ncg run\n\n# Open http://localhost:8188\n# Load workflow from ComfyUI/user/default/workflows/\n# Make changes in browser\n# Save workflow\n# Stop ComfyUI (Ctrl+C)\n\n# Check status\ncg status\n# Will show modified workflow\n\n# Commit if good\ncg commit -m \"Updated workflow\"\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/environments/running-comfyui/#port-already-in-use","title":"Port already in use","text":"<p>Symptom: <code>Address already in use</code> error on port 8188</p> <p>Solutions:</p> <pre><code># Find what's using port 8188\nlsof -i :8188\n\n# Kill the process\nkill &lt;PID&gt;\n\n# Or use a different port\ncg run --port 8189\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#gpu-out-of-memory","title":"GPU out of memory","text":"<p>Symptom: CUDA out of memory errors</p> <p>Solutions:</p> <pre><code># Force CPU mode\ncg run --cpu\n\n# Or close other GPU applications\n# Or reduce batch size in ComfyUI\n# Or use a smaller model\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#custom-nodes-not-loading","title":"Custom nodes not loading","text":"<p>Symptom: \"Failed to import custom node\" in logs</p> <p>Solutions:</p> <pre><code># Stop ComfyUI (Ctrl+C)\n\n# Repair environment\ncg repair\n\n# Restart ComfyUI\ncg run\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#models-not-found","title":"Models not found","text":"<p>Symptom: \"Model not found\" errors in ComfyUI</p> <p>Solutions:</p> <pre><code># Check model symlink\nls -la ~/comfygit/environments/my-env/ComfyUI/models\n\n# Should show symlink to workspace models\n# If not, recreate environment or check workspace init\n\n# Sync model index\ncg model index sync\n\n# Check where ComfyUI expects models\n# They should be in ~/comfygit/models/&lt;category&gt;/\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#comfyui-crashes-immediately","title":"ComfyUI crashes immediately","text":"<p>Symptom: ComfyUI starts then exits with error</p> <p>Solutions:</p> <pre><code># Check environment is synced\ncg status\n\n# Repair if needed\ncg repair\n\n# Check for Python dependency conflicts\ncg py list\n\n# Try running Python directly to see error\ncd ~/comfygit/environments/my-env/ComfyUI\n~/comfygit/environments/my-env/.venv/bin/python main.py\n</code></pre>"},{"location":"user-guide/environments/running-comfyui/#cant-access-from-another-device","title":"Can't access from another device","text":"<p>Symptom: Can access <code>http://localhost:8188</code> but not from phone/tablet</p> <p>Solutions:</p> <pre><code># Run with listen flag\ncg run --listen 0.0.0.0\n\n# Find your machine's IP\n# macOS/Linux\nifconfig | grep inet\n\n# Then access from other device\nhttp://&lt;your-ip&gt;:8188\n</code></pre> <p>Firewall</p> <p>You may need to allow port 8188 through your firewall for external access.</p>"},{"location":"user-guide/environments/running-comfyui/#next-steps","title":"Next steps","text":"<p>Now that ComfyUI is running:</p> <ul> <li>Check environment status \u2014 Monitor changes</li> <li>Add custom nodes \u2014 Extend functionality</li> <li>Manage workflows \u2014 Track and version workflows</li> <li>Commit changes \u2014 Save your configuration</li> </ul>"},{"location":"user-guide/environments/running-comfyui/#see-also","title":"See also","text":"<ul> <li>ComfyUI Documentation \u2014 Official ComfyUI docs</li> <li>CLI Reference \u2014 Complete run command documentation</li> <li>Troubleshooting \u2014 More solutions</li> </ul>"},{"location":"user-guide/environments/version-control/","title":"Version Control","text":"<p>Use git-based version control to track, commit, and rollback changes to your environment configuration. Every environment is a git repository.</p>"},{"location":"user-guide/environments/version-control/#overview","title":"Overview","text":"<p>ComfyGit gives each environment its own git repository in the <code>.cec/</code> directory. This tracks:</p> <ul> <li>Custom nodes \u2014 Which nodes are installed and their versions</li> <li>Python dependencies \u2014 Packages from <code>pyproject.toml</code></li> <li>Workflows \u2014 Workflow JSON files you've created or modified</li> <li>Model references \u2014 Model download URLs and importance settings</li> <li>Constraints \u2014 Version pins and dependency constraints</li> </ul> <p>Changes are tracked automatically \u2014 you just commit when ready.</p>"},{"location":"user-guide/environments/version-control/#the-cec-directory","title":"The .cec directory","text":"<p>Each environment has a <code>.cec/</code> directory:</p> <pre><code>~/comfygit/environments/my-env/.cec/\n\u251c\u2500\u2500 .git/                   # Git repository\n\u251c\u2500\u2500 pyproject.toml          # Dependencies and nodes\n\u251c\u2500\u2500 uv.lock                 # Locked dependency versions\n\u251c\u2500\u2500 workflows/              # Tracked workflow files\n\u2514\u2500\u2500 .python-version         # Python version pin\n</code></pre> <p>This entire directory is version controlled. When you commit, you're committing changes to these files.</p>"},{"location":"user-guide/environments/version-control/#checking-for-changes","title":"Checking for changes","text":"<p>See what's changed since your last commit:</p> <pre><code>cg status\n</code></pre> <p>Clean environment:</p> <pre><code>Environment: my-env \u2713\n\n\u2713 No workflows\n\u2713 No uncommitted changes\n</code></pre> <p>With uncommitted changes:</p> <pre><code>Environment: my-env\n\n\u26a0 Uncommitted changes:\n\n  Custom Nodes:\n    + comfyui-impact-pack\n\n  Python Packages:\n    + ultralytics (any)\n\n\ud83d\udca1 Next:\n  Commit changes: cg commit -m \"&lt;message&gt;\"\n</code></pre>"},{"location":"user-guide/environments/version-control/#committing-changes","title":"Committing changes","text":""},{"location":"user-guide/environments/version-control/#basic-commit","title":"Basic commit","text":"<p>Save your current environment state:</p> <pre><code>cg commit -m \"Added impact pack for face detailing\"\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udccb Analyzing workflows...\n\u2705 Commit successful: Added impact pack for face detailing\n  \u2022 Added 1 workflow(s)\n</code></pre>"},{"location":"user-guide/environments/version-control/#auto-generated-commit-message","title":"Auto-generated commit message","text":"<p>Let ComfyGit generate a message:</p> <pre><code>cg commit\n</code></pre> <p>Generates messages like:</p> <ul> <li>\"Update workflows\"</li> <li>\"Add custom nodes\"</li> <li>\"Update dependencies\"</li> </ul> <p>Descriptive messages</p> <p>Use descriptive commit messages for easier version navigation: <pre><code>cg commit -m \"Added IPAdapter nodes for style transfer\"\ncg commit -m \"Pinned torch to 2.4.1 for stability\"\ncg commit -m \"Removed unused video nodes\"\n</code></pre></p>"},{"location":"user-guide/environments/version-control/#what-gets-committed","title":"What gets committed","text":"<p>A commit captures:</p> <ol> <li>Node changes \u2014 Additions, removals, updates</li> <li>Dependency changes \u2014 Python packages added/removed/updated</li> <li>Workflow changes \u2014 New, modified, or deleted workflow files</li> <li>Constraint changes \u2014 Version pins added/removed</li> <li>Model metadata \u2014 Download URLs and importance settings</li> </ol> <p>Example commit:</p> <pre><code># Add a node\ncg node add comfyui-impact-pack\n\n# Check status\ncg status\n# Shows: + comfyui-impact-pack under Custom Nodes\n\n# Commit\ncg commit -m \"Added impact pack\"\n</code></pre>"},{"location":"user-guide/environments/version-control/#workflow-issues-and-commits","title":"Workflow issues and commits","text":"<p>ComfyGit blocks commits if workflows have unresolved issues:</p> <p>Blocked commit:</p> <pre><code>cg commit -m \"Update workflow\"\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udccb Analyzing workflows...\n\n\u26a0 Cannot commit - workflows have unresolved issues:\n\n  \u2022 portrait.json: 2 nodes unresolved, 1 models not found\n\n\ud83d\udca1 Options:\n  1. Resolve issues: cg workflow resolve \"portrait\"\n  2. Force commit: cg commit -m 'msg' --allow-issues\n</code></pre> <p>Option 1: Resolve first (recommended)</p> <pre><code># Fix the issues\ncg workflow resolve portrait\n\n# Then commit\ncg commit -m \"Updated portrait workflow\"\n</code></pre> <p>Option 2: Force commit</p> <pre><code># Commit anyway (not recommended)\ncg commit -m \"WIP: portrait workflow\" --allow-issues\n</code></pre> <p>Allow issues flag</p> <p>Using <code>--allow-issues</code> commits broken workflows. Only use this for work-in-progress commits. Fix issues before sharing the environment.</p>"},{"location":"user-guide/environments/version-control/#viewing-commit-history","title":"Viewing commit history","text":""},{"location":"user-guide/environments/version-control/#compact-format-default","title":"Compact format (default)","text":"<pre><code>cg log\n</code></pre> <p>Output:</p> <pre><code>Version history for environment 'my-env':\n\nv3: Removed unused video nodes\nv2: Added IPAdapter for style transfer\nv1: Added impact pack for face detailing\n\nUse 'cg rollback &lt;version&gt;' to restore to a specific version\n</code></pre>"},{"location":"user-guide/environments/version-control/#verbose-format","title":"Verbose format","text":"<p>See full details:</p> <pre><code>cg log --verbose\n</code></pre> <p>Output:</p> <pre><code>Version history for environment 'my-env':\n\nVersion: v3\nMessage: Removed unused video nodes\nDate:    2025-11-03 14:23:45\nCommit:  a1b2c3d4\n\n\nVersion: v2\nMessage: Added IPAdapter for style transfer\nDate:    2025-11-03 12:10:33\nCommit:  e5f6g7h8\n\n\nVersion: v1\nMessage: Added impact pack for face detailing\nDate:    2025-11-03 09:15:22\nCommit:  i9j0k1l2\n\nUse 'cg rollback &lt;version&gt;' to restore to a specific version\n</code></pre>"},{"location":"user-guide/environments/version-control/#rolling-back-changes","title":"Rolling back changes","text":""},{"location":"user-guide/environments/version-control/#discard-uncommitted-changes","title":"Discard uncommitted changes","text":"<p>Undo all changes since last commit:</p> <pre><code>cg rollback\n</code></pre> <p>Confirmation prompt:</p> <pre><code>\u23ee Discarding uncommitted changes in environment 'my-env'\n\nThis will discard all changes since your last commit:\n  \u2022 Custom nodes added/removed\n  \u2022 Dependencies changed\n  \u2022 Workflows modified\n\nContinue? (y/N):\n</code></pre> <p>Type <code>y</code> and press Enter.</p> <p>Output:</p> <pre><code>\u2713 Rollback complete\n\nUncommitted changes have been discarded\n\u2022 Environment is now clean and matches the last commit\n\u2022 Run 'cg log' to see version history\n</code></pre> <p>Skip confirmation:</p> <pre><code>cg rollback --yes\n</code></pre>"},{"location":"user-guide/environments/version-control/#rollback-to-specific-version","title":"Rollback to specific version","text":"<p>Restore environment to a previous commit:</p> <pre><code># Rollback to v2\ncg rollback v2\n</code></pre> <p>Confirmation prompt:</p> <pre><code>\u23ee Rolling back environment 'my-env' to v2\n\nThis will:\n  \u2022 Restore pyproject.toml to v2\n  \u2022 Reset workflows to v2 state\n  \u2022 Update environment to match v2 dependencies\n\nCurrent state will be lost unless committed first.\n\nContinue? (y/N):\n</code></pre> <p>Output:</p> <pre><code>\u2713 Rollback complete\n\nEnvironment is now at version v2\n\u2022 Run 'cg commit -m \"message\"' to save any new changes\n\u2022 Run 'cg log' to see version history\n</code></pre> <p>What happens:</p> <ol> <li>Git checks out the specified version in <code>.cec/</code></li> <li><code>pyproject.toml</code> is restored to that version</li> <li>Workflows are restored to that version</li> <li>Environment is auto-repaired to match the restored configuration</li> </ol> <p>Skip confirmation:</p> <pre><code>cg rollback v2 --yes\n</code></pre>"},{"location":"user-guide/environments/version-control/#pushing-to-remotes","title":"Pushing to remotes","text":"<p>Share your environment with others via git remotes.</p>"},{"location":"user-guide/environments/version-control/#adding-a-remote","title":"Adding a remote","text":"<pre><code># Add a remote repository\ncg remote add origin https://github.com/username/my-env.git\n</code></pre>"},{"location":"user-guide/environments/version-control/#pushing-commits","title":"Pushing commits","text":"<pre><code>cg push origin\n</code></pre> <p>Pre-flight checks:</p> <pre><code>\u2717 You have uncommitted changes\n\n\ud83d\udca1 Commit first:\n   cg commit -m 'your message'\n</code></pre> <p>After committing:</p> <pre><code>cg push origin\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udce4 Pushing to origin...\n   \u2713 Pushed commits to origin\n\n\ud83d\udcbe Remote: https://github.com/username/my-env.git\n</code></pre>"},{"location":"user-guide/environments/version-control/#force-push","title":"Force push","text":"<p>Overwrite remote history (use with caution):</p> <pre><code>cg push origin --force\n</code></pre> <p>Force push</p> <p>Only force push if you're sure. This rewrites history and can cause issues for collaborators.</p>"},{"location":"user-guide/environments/version-control/#pulling-from-remotes","title":"Pulling from remotes","text":"<p>Update your environment from a remote repository.</p>"},{"location":"user-guide/environments/version-control/#basic-pull","title":"Basic pull","text":"<pre><code>cg pull origin\n</code></pre> <p>Pre-flight checks:</p> <pre><code>\u2717 You have uncommitted changes\n\n\ud83d\udca1 Options:\n  \u2022 Commit: cg commit -m 'message'\n  \u2022 Discard: cg rollback\n  \u2022 Force: cg pull origin --force\n</code></pre> <p>After committing or discarding:</p> <pre><code>cg pull origin\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udce5 Pulling from origin...\n  [1/2] Installing comfyui-controlnet-aux... \u2713\n  [2/2] Installing comfyui-ipadapter-plus... \u2713\n\n\u2713 Pulled changes from origin\n   \u2022 Installed 2 node(s)\n\n\u2699\ufe0f  Environment synced successfully\n</code></pre> <p>What happens:</p> <ol> <li>Pulls latest commits from remote</li> <li>Merges changes into <code>.cec/</code></li> <li>Automatically runs <code>cg repair</code> to sync environment</li> <li>Installs missing nodes</li> <li>Downloads missing models (if configured)</li> </ol>"},{"location":"user-guide/environments/version-control/#force-pull","title":"Force pull","text":"<p>Discard local changes and pull:</p> <pre><code>cg pull origin --force\n</code></pre>"},{"location":"user-guide/environments/version-control/#handling-merge-conflicts","title":"Handling merge conflicts","text":"<p>If both you and a remote have changes:</p> <pre><code>\u2717 Merge conflict detected\n\n\ud83d\udca1 To resolve:\n   1. cd ~/comfygit/environments/my-env/.cec\n   2. git status  # See conflicted files\n   3. Edit conflicts and resolve\n   4. git add &lt;resolved-files&gt;\n   5. git commit\n   6. cg repair  # Sync environment\n</code></pre> <p>Resolution steps:</p> <pre><code># Navigate to .cec\ncd ~/comfygit/environments/my-env/.cec\n\n# See conflicts\ngit status\n\n# Edit conflicted files (usually pyproject.toml)\n# Look for conflict markers: &lt;&lt;&lt;&lt;&lt;&lt;&lt;, =======, &gt;&gt;&gt;&gt;&gt;&gt;&gt;\n# Keep the changes you want\n\n# Stage resolved files\ngit add pyproject.toml\n\n# Commit the merge\ngit commit -m \"Merged remote changes\"\n\n# Return to workspace\ncd ~/comfygit\n\n# Sync environment\ncg repair\n</code></pre>"},{"location":"user-guide/environments/version-control/#repairing-environments","title":"Repairing environments","text":"<p>Sync environment filesystem to match <code>pyproject.toml</code>:</p> <pre><code>cg repair\n</code></pre> <p>When to use:</p> <ul> <li>After manual edits to <code>pyproject.toml</code></li> <li>After <code>git pull</code> or <code>rollback</code></li> <li>When nodes aren't loading</li> <li>After resolving git conflicts</li> </ul> <p>Example:</p> <pre><code># Manually edit .cec/pyproject.toml\n# Add a dependency or change a node URL\n\n# Sync environment\ncg repair\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udd27 Syncing environment to pyproject.toml...\n\nPreview:\n  Nodes to install:\n    + comfyui-manager\n\n  Python packages to install:\n    + requests (&gt;=2.31.0)\n\nContinue? (y/N): y\n\n  [1/1] Installing comfyui-manager... \u2713\n\n\u2705 Environment synced successfully\n   \u2022 Installed 1 node(s)\n   \u2022 Installed 1 package(s)\n</code></pre> <p>Skip confirmation:</p> <pre><code>cg repair --yes\n</code></pre>"},{"location":"user-guide/environments/version-control/#common-workflows","title":"Common workflows","text":""},{"location":"user-guide/environments/version-control/#experiment-and-commit","title":"Experiment and commit","text":"<pre><code># Make changes\ncg node add experimental-node\n\n# Test it\ncg run\n# Try it out...\n\n# Good? Commit\ncg commit -m \"Added experimental node - works great\"\n\n# Bad? Rollback\ncg rollback\n</code></pre>"},{"location":"user-guide/environments/version-control/#feature-branch-workflow","title":"Feature branch workflow","text":"<pre><code># Create environment for feature\ncg create feature-xyz --use\n\n# Make changes\ncg node add new-feature-node\ncg commit -m \"Added feature node\"\n\n# More changes\ncg node add another-node\ncg commit -m \"Added supporting node\"\n\n# Test\ncg run\n\n# Good? Push\ncg remote add origin https://github.com/me/feature-xyz.git\ncg push origin\n\n# Share link with team\n</code></pre>"},{"location":"user-guide/environments/version-control/#safe-experimentation","title":"Safe experimentation","text":"<pre><code># Current state\ncg commit -m \"Stable state before experiment\"\n\n# Try something risky\ncg node add untested-node\ncg run\n# Doesn't work...\n\n# Rollback\ncg rollback\n\n# Back to stable state\n</code></pre>"},{"location":"user-guide/environments/version-control/#team-collaboration","title":"Team collaboration","text":"<p>Team member 1:</p> <pre><code># Create environment\ncg create project-x\n\n# Add nodes\ncg node add comfyui-ipadapter-plus\ncg commit -m \"Initial setup with IPAdapter\"\n\n# Push\ncg remote add origin https://github.com/team/project-x.git\ncg push origin\n</code></pre> <p>Team member 2:</p> <pre><code># Import from git\ncg import https://github.com/team/project-x.git --name project-x\n\n# Make changes\ncg node add comfyui-controlnet-aux\ncg commit -m \"Added ControlNet support\"\n\n# Push\ncg push origin\n</code></pre> <p>Team member 1:</p> <pre><code># Pull changes\ncg pull origin\n\n# Nodes are auto-installed\n# Continue working...\n</code></pre>"},{"location":"user-guide/environments/version-control/#version-control-best-practices","title":"Version control best practices","text":""},{"location":"user-guide/environments/version-control/#commit-early-and-often","title":"Commit early and often","text":"<pre><code># After each logical change\ncg node add some-node\ncg commit -m \"Added some-node for X feature\"\n\n# Not after 10 changes\ncg node add node1\ncg node add node2\n# ... 8 more changes\ncg commit -m \"Updated everything\"  # Bad!\n</code></pre>"},{"location":"user-guide/environments/version-control/#use-descriptive-messages","title":"Use descriptive messages","text":"<p>Good:</p> <ul> <li>\"Added ComfyUI-Manager for node management\"</li> <li>\"Pinned PyTorch to 2.4.1 for CUDA 12.8 compatibility\"</li> <li>\"Removed deprecated ControlNet nodes\"</li> <li>\"Updated portrait workflow with better face detailing\"</li> </ul> <p>Bad:</p> <ul> <li>\"Update\"</li> <li>\"Changes\"</li> <li>\"WIP\"</li> <li>\"asdf\"</li> </ul>"},{"location":"user-guide/environments/version-control/#test-before-committing","title":"Test before committing","text":"<pre><code># Make changes\ncg node add new-node\n\n# Test\ncg run\n# Verify it works...\n\n# Good? Commit\ncg commit -m \"Added new-node\"\n\n# Bad? Fix first or rollback\n</code></pre>"},{"location":"user-guide/environments/version-control/#commit-workflow-changes-separately","title":"Commit workflow changes separately","text":"<pre><code># Bad: mixing concerns\ncg node add ipadapter\n# Edit workflow in ComfyUI...\ncg commit -m \"Updated everything\"\n\n# Good: separate commits\ncg node add ipadapter\ncg commit -m \"Added IPAdapter node\"\n# Edit workflow...\ncg commit -m \"Updated portrait workflow to use IPAdapter\"\n</code></pre>"},{"location":"user-guide/environments/version-control/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/environments/version-control/#cant-commit-no-changes-detected","title":"Can't commit - no changes detected","text":"<p>Symptom: <code>\u2713 No changes to commit</code></p> <p>Cause: Nothing has changed in <code>.cec/</code> since last commit</p> <p>Check:</p> <pre><code>cg status\n# Should show uncommitted changes if any exist\n</code></pre>"},{"location":"user-guide/environments/version-control/#rollback-doesnt-work","title":"Rollback doesn't work","text":"<p>Symptom: Rollback command fails or doesn't restore properly</p> <p>Solutions:</p> <pre><code># Check git status manually\ncd ~/comfygit/environments/my-env/.cec\ngit status\n\n# Force clean\ngit reset --hard HEAD\n\n# Return and repair\ncd ~/comfygit\ncg repair\n</code></pre>"},{"location":"user-guide/environments/version-control/#push-rejected","title":"Push rejected","text":"<p>Symptom: Remote rejects push</p> <p>Cause: Remote has commits you don't have locally</p> <p>Solution:</p> <pre><code># Pull first\ncg pull origin\n\n# Resolve conflicts if any\n# Then push\ncg push origin\n</code></pre>"},{"location":"user-guide/environments/version-control/#lost-changes-after-rollback","title":"Lost changes after rollback","text":"<p>Symptom: Rolled back but want changes back</p> <p>Solution:</p> <pre><code># Git never forgets - find your commit\ncd ~/comfygit/environments/my-env/.cec\ngit reflog\n\n# Find the commit hash\n# Restore it\ngit checkout &lt;commit-hash&gt;\n\n# Or cherry-pick specific changes\ngit cherry-pick &lt;commit-hash&gt;\n\n# Return to comfygit\ncd ~/comfygit\ncg repair\n</code></pre>"},{"location":"user-guide/environments/version-control/#next-steps","title":"Next steps","text":"<p>Master version control, then explore:</p> <ul> <li>Custom Nodes \u2014 Install and manage extensions</li> <li>Workflows \u2014 Resolve dependencies automatically</li> <li>Collaboration \u2014 Share environments with team</li> </ul>"},{"location":"user-guide/environments/version-control/#see-also","title":"See also","text":"<ul> <li>Git Remotes \u2014 Detailed remote management</li> <li>Export &amp; Import \u2014 Tarball-based sharing</li> <li>CLI Reference \u2014 Complete command docs</li> </ul>"},{"location":"user-guide/models/adding-sources/","title":"Adding Model Sources","text":"<p>Register download URLs for your models to enable re-downloads, environment sharing, and team collaboration.</p>"},{"location":"user-guide/models/adding-sources/#overview","title":"Overview","text":"<p>Model sources are download URLs that tell ComfyGit where to get a model file. When you add sources:</p> <ul> <li>Re-download capability - Retrieve deleted models easily</li> <li>Environment portability - Share environments with automatic model downloads</li> <li>Team collaboration - Team members can download models from shared sources</li> <li>Fallback URLs - Multiple sources provide redundancy</li> </ul>"},{"location":"user-guide/models/adding-sources/#what-are-model-sources","title":"What are model sources?","text":"<p>A model source is a URL that points to a downloadable model file. ComfyGit stores sources in the model index:</p> <pre><code>Model: sd_xl_base_1.0.safetensors\n  Sources:\n    \u2022 HuggingFace: https://huggingface.co/.../sd_xl_base_1.0.safetensors\n    \u2022 CivitAI: https://civitai.com/api/download/models/128078\n</code></pre> <p>Sources enable:</p> <ol> <li>Automatic downloads - <code>cg import</code> can download models from sources</li> <li>Manual re-downloads - Copy URL and run <code>cg model download &lt;url&gt;</code></li> <li>Export validation - <code>cg export</code> warns if models lack sources</li> </ol>"},{"location":"user-guide/models/adding-sources/#when-to-add-sources","title":"When to add sources","text":"<p>Add sources when:</p> <ul> <li>Preparing to export - Before sharing an environment</li> <li>Team collaboration - So others can download models</li> <li>Backup strategy - Register multiple mirrors</li> <li>After manual downloads - Browser downloads don't auto-register sources</li> </ul> <p>Downloads auto-register sources</p> <p>Models downloaded with <code>cg model download</code> automatically have their source URL registered. Manual source addition is only needed for models added other ways.</p>"},{"location":"user-guide/models/adding-sources/#adding-sources-interactively","title":"Adding sources interactively","text":"<p>The easiest way to add sources is interactively:</p> <pre><code>cg model add-source\n</code></pre> <p>ComfyGit guides you through all models without sources.</p> <p>Example session:</p> <pre><code>\ud83d\udce6 Add Model Sources\n\nFound 3 model(s) without download sources\n\n[1/3] realistic_vision_v5.safetensors\n  Hash: f6e5d4c3b2a1...\n  Path: checkpoints/realistic_vision_v5.safetensors\n  Status: \u2713 Available locally\n\n  URL (or 's' to skip, 'q' to quit): https://civitai.com/api/download/models/128078\n\n  \u2713 Added source\n\n[2/3] anime_style_lora.safetensors\n  Hash: 9876543210ab...\n  Path: loras/anime_style_lora.safetensors\n  Status: \u2713 Available locally\n\n  URL (or 's' to skip, 'q' to quit): s\n\n  \u2192 Skipped\n\n[3/3] detail_enhancer.safetensors\n  Hash: abcdef123456...\n  Path: loras/detail_enhancer.safetensors\n  Status: \u2713 Available locally\n\n  URL (or 's' to skip, 'q' to quit): q\n\n\u2297 Cancelled\n\n\u2705 Complete: 1/3 source(s) added\n\nYour environment is now more shareable!\n  Run 'cg export' to bundle and distribute\n</code></pre>"},{"location":"user-guide/models/adding-sources/#interactive-commands","title":"Interactive commands","text":"<p>During interactive mode:</p> <ul> <li>Enter URL - Paste download URL and press Enter</li> <li>s - Skip this model</li> <li>q - Quit and exit</li> </ul>"},{"location":"user-guide/models/adding-sources/#finding-download-urls","title":"Finding download URLs","text":"<p>Where to get URLs for interactive mode:</p> <p>CivitAI:</p> <ol> <li>Visit model page (e.g., <code>civitai.com/models/4201/realistic-vision</code>)</li> <li>Click \"Download\" button</li> <li>Right-click and copy link address</li> <li>URL format: <code>https://civitai.com/api/download/models/XXXXX</code></li> </ol> <p>HuggingFace:</p> <ol> <li>Visit model repository</li> <li>Click on file (e.g., <code>sd_xl_base_1.0.safetensors</code>)</li> <li>Right-click \"download\" link</li> <li>URL format: <code>https://huggingface.co/USER/REPO/resolve/main/file.safetensors</code></li> </ol> <p>Direct URLs:</p> <p>Any direct download link works.</p>"},{"location":"user-guide/models/adding-sources/#adding-sources-directly","title":"Adding sources directly","text":"<p>Add a source to a specific model without interaction:</p> <pre><code>cg model add-source &lt;model-identifier&gt; &lt;url&gt;\n</code></pre> <p>Examples:</p> <pre><code># By exact filename\ncg model add-source realistic_vision_v5.safetensors https://civitai.com/api/download/models/128078\n\n# By hash prefix\ncg model add-source f6e5d4c3 https://civitai.com/api/download/models/128078\n\n# By full hash\ncg model add-source f6e5d4c3b2a1e9876543210abcdef123456789 https://civitai.com/api/download/models/128078\n</code></pre> <p>Output:</p> <pre><code>\u2713 Added source to realistic_vision_v5.safetensors\n  https://civitai.com/api/download/models/128078\n</code></pre>"},{"location":"user-guide/models/adding-sources/#when-to-use-direct-mode","title":"When to use direct mode","text":"<p>Direct mode is useful for:</p> <ul> <li>Scripting - Batch adding sources</li> <li>Automation - CI/CD pipelines</li> <li>Single model - Quick one-off source addition</li> <li>Known identifiers - When you already know the hash/filename</li> </ul>"},{"location":"user-guide/models/adding-sources/#source-types","title":"Source types","text":"<p>ComfyGit tracks the type of each source:</p>"},{"location":"user-guide/models/adding-sources/#civitai-sources","title":"CivitAI sources","text":"<pre><code>cg model add-source model.safetensors https://civitai.com/api/download/models/128078\n</code></pre> <p>Detected as <code>civitai</code> type. Used for:</p> <ul> <li>Community models</li> <li>LoRAs and checkpoints</li> <li>Trained on specific styles/characters</li> </ul>"},{"location":"user-guide/models/adding-sources/#huggingface-sources","title":"HuggingFace sources","text":"<pre><code>cg model add-source model.safetensors https://huggingface.co/stabilityai/sdxl/resolve/main/model.safetensors\n</code></pre> <p>Detected as <code>huggingface</code> type. Used for:</p> <ul> <li>Official models (Stability AI, etc.)</li> <li>Research models</li> <li>Open source releases</li> </ul>"},{"location":"user-guide/models/adding-sources/#custom-sources","title":"Custom sources","text":"<pre><code>cg model add-source model.safetensors https://example.com/models/model.safetensors\n</code></pre> <p>Detected as <code>custom</code> type. Used for:</p> <ul> <li>Private model hosting</li> <li>Self-hosted mirrors</li> <li>Organization-internal repositories</li> </ul>"},{"location":"user-guide/models/adding-sources/#multiple-sources-per-model","title":"Multiple sources per model","text":"<p>Models can have multiple download sources for redundancy:</p> <pre><code># Add primary source\ncg model add-source sd_xl_base_1.0.safetensors https://huggingface.co/.../sd_xl_base_1.0.safetensors\n\n# Add backup source\ncg model add-source sd_xl_base_1.0.safetensors https://civitai.com/api/download/models/128078\n</code></pre> <p>View all sources:</p> <pre><code>cg model index show sd_xl_base_1.0.safetensors\n</code></pre> <pre><code>  Sources (2):\n    \u2022 HuggingFace\n      URL: https://huggingface.co/.../sd_xl_base_1.0.safetensors\n      Added: 2025-01-10 09:15:00\n    \u2022 CivitAI\n      URL: https://civitai.com/api/download/models/128078\n      Added: 2025-01-12 16:42:31\n</code></pre> <p>Benefits of multiple sources:</p> <ul> <li>Redundancy - If one source goes down, use another</li> <li>Flexibility - Choose fastest source per user</li> <li>Availability - Some users prefer CivitAI, others HuggingFace</li> </ul> <p>Source priority</p> <p>When importing environments, ComfyGit tries sources in the order they were added. Add most reliable source first.</p>"},{"location":"user-guide/models/adding-sources/#integration-with-exportimport","title":"Integration with export/import","text":""},{"location":"user-guide/models/adding-sources/#export-validation","title":"Export validation","text":"<p>When exporting an environment:</p> <pre><code>cg export\n</code></pre> <p>ComfyGit checks if all models have sources:</p> <pre><code>\ud83d\udce6 Exporting environment: my-project\n\n\u26a0\ufe0f  Export validation:\n\n3 model(s) have no source URLs.\n\n  \u2022 realistic_vision_v5.safetensors\n    Used by: portrait_workflow, character_workflow\n  \u2022 anime_style_lora.safetensors\n    Used by: anime_workflow\n  \u2022 detail_enhancer.safetensors\n    Used by: portrait_workflow\n\n\u26a0\ufe0f  Recipients won't be able to download these models automatically.\n   Add sources: cg model add-source\n\nContinue export? (y/N):\n</code></pre> <p>Options:</p> <ul> <li>y - Export anyway (models without sources won't be downloadable)</li> <li>N - Cancel and add sources first</li> </ul>"},{"location":"user-guide/models/adding-sources/#adding-sources-before-export","title":"Adding sources before export","text":"<p>Add sources to all models:</p> <pre><code># Interactive mode\ncg model add-source\n\n# Or direct mode for each model\ncg model add-source model1.safetensors &lt;url&gt;\ncg model add-source model2.safetensors &lt;url&gt;\n\n# Then export\ncg export\n</code></pre>"},{"location":"user-guide/models/adding-sources/#import-behavior","title":"Import behavior","text":"<p>When importing an environment:</p> <pre><code>cg import environment.tar.gz\n</code></pre> <p>ComfyGit offers model download strategy:</p> <pre><code>Model download strategy:\n  1. all      - Download all models with sources\n  2. required - Download only required models\n  3. skip     - Skip all downloads (can resolve later)\nChoice (1-3) [1]:\n</code></pre> <p>Strategies:</p> <ul> <li>all - Downloads every model that has a source URL</li> <li>required - Downloads only models marked as \"required\" importance</li> <li>skip - Doesn't download anything (models become unresolved)</li> </ul> <p>Models without sources cannot be downloaded automatically - user must download manually.</p>"},{"location":"user-guide/models/adding-sources/#model-importance-and-sources","title":"Model importance and sources","text":"<p>Model importance affects download behavior during import:</p>"},{"location":"user-guide/models/adding-sources/#default-importance-by-category","title":"Default importance by category","text":"<p>ComfyGit assigns default importance based on model category:</p> Category Default Importance Import Behavior checkpoints flexible Downloaded with \"all\" strategy vae flexible Downloaded with \"all\" strategy loras flexible Downloaded with \"all\" strategy controlnet required Downloaded with \"required\" or \"all\" clip_vision required Downloaded with \"required\" or \"all\" embeddings flexible Downloaded with \"all\" strategy upscale_models flexible Downloaded with \"all\" strategy style_models flexible Downloaded with \"all\" strategy"},{"location":"user-guide/models/adding-sources/#per-workflow-importance","title":"Per-workflow importance","text":"<p>Users can override importance per workflow:</p> <pre><code>cg workflow model importance my_workflow model.safetensors required\n</code></pre> <p>This makes <code>model.safetensors</code> required for <code>my_workflow</code> even if its category defaults to \"flexible\".</p> <p>See Workflow Model Importance for details.</p>"},{"location":"user-guide/models/adding-sources/#common-patterns","title":"Common patterns","text":""},{"location":"user-guide/models/adding-sources/#adding-sources-before-sharing","title":"Adding sources before sharing","text":"<p>Prepare environment for export:</p> <pre><code># 1. Check which models need sources\ncg model add-source  # Lists models without sources\n\n# 2. Add sources interactively\n# (Paste URLs for each model)\n\n# 3. Verify all models have sources\ncg export  # Should not show source warnings\n\n# 4. Export and share\ncg export\n</code></pre>"},{"location":"user-guide/models/adding-sources/#batch-adding-sources","title":"Batch adding sources","text":"<p>Add sources to multiple models:</p> <pre><code># Create a mapping file\ncat &gt; model_sources.txt &lt;&lt; EOF\nrealistic_vision_v5.safetensors https://civitai.com/api/download/models/128078\nanime_style_lora.safetensors https://civitai.com/api/download/models/128079\ndetail_enhancer.safetensors https://civitai.com/api/download/models/128080\nEOF\n\n# Add all sources\nwhile read filename url; do\n  cg model add-source \"$filename\" \"$url\"\ndone &lt; model_sources.txt\n</code></pre>"},{"location":"user-guide/models/adding-sources/#adding-backup-sources","title":"Adding backup sources","text":"<p>Register fallback URLs:</p> <pre><code># Add primary source\ncg model add-source sd_xl_base_1.0.safetensors https://huggingface.co/.../sd_xl_base_1.0.safetensors\n\n# Add backup CivitAI mirror\ncg model add-source sd_xl_base_1.0.safetensors https://civitai.com/api/download/models/128078\n\n# Add private backup\ncg model add-source sd_xl_base_1.0.safetensors https://internal-server.company.com/models/sd_xl_base_1.0.safetensors\n</code></pre>"},{"location":"user-guide/models/adding-sources/#organization-model-repositories","title":"Organization model repositories","text":"<p>For teams with internal model repositories:</p> <pre><code># Add sources pointing to internal server\ncg model add-source company_lora.safetensors https://models.company.com/loras/company_lora.safetensors\ncg model add-source company_checkpoint.safetensors https://models.company.com/checkpoints/company_checkpoint.safetensors\n\n# Team members can import and download from internal sources\ncg import team_environment.tar.gz\n</code></pre>"},{"location":"user-guide/models/adding-sources/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/models/adding-sources/#model-not-found","title":"\"Model not found\"","text":"<p>Problem: Direct mode can't find model</p> <pre><code>\u2717 Model not found: model_name\n</code></pre> <p>Solutions:</p> <pre><code># Check exact filename\ncg model index list | grep model_name\n\n# Use exact filename or hash\ncg model index show model_name\ncg model add-source exact_filename.safetensors &lt;url&gt;\n\n# Or use interactive mode\ncg model add-source\n</code></pre>"},{"location":"user-guide/models/adding-sources/#multiple-models-match","title":"\"Multiple models match\"","text":"<p>Problem: Filename is ambiguous</p> <pre><code>\u2717 Multiple models match 'anime':\n  \u2022 anime_v2.safetensors (f6e5d4c3...)\n  \u2022 anime_style_lora.safetensors (98765432...)\n  \u2022 anime_character.safetensors (abcdef12...)\n\nUse full hash: cg model add-source &lt;hash&gt; &lt;url&gt;\n</code></pre> <p>Solution:</p> <p>Use full hash instead of filename:</p> <pre><code>cg model add-source f6e5d4c3b2a1e9876543210abcdef123456789 &lt;url&gt;\n</code></pre>"},{"location":"user-guide/models/adding-sources/#url-already-exists","title":"\"URL already exists\"","text":"<p>Problem: Source already registered</p> <pre><code>\u2717 URL already exists for realistic_vision_v5.safetensors\n</code></pre> <p>Solution:</p> <p>This is fine - source is already tracked. No action needed.</p> <p>To verify:</p> <pre><code>cg model index show realistic_vision_v5.safetensors\n</code></pre>"},{"location":"user-guide/models/adding-sources/#interactive-mode-shows-no-models","title":"Interactive mode shows no models","text":"<p>Problem: Interactive mode says no models need sources</p> <pre><code>\u2713 All models have download sources!\n</code></pre> <p>Meaning:</p> <p>All models in your index already have at least one source URL registered. This is the desired state.</p> <p>To verify:</p> <pre><code># Check a few models\ncg model index show model1.safetensors\ncg model index show model2.safetensors\n</code></pre>"},{"location":"user-guide/models/adding-sources/#models-without-sources-still-in-export-warning","title":"Models without sources still in export warning","text":"<p>Problem: Added sources but export still warns</p> <p>Solution:</p> <p>Make sure you added sources to all models mentioned in the warning:</p> <pre><code># Run export again\ncg export\n\n# Note which models are listed\n\n# Add sources for each\ncg model add-source model1.safetensors &lt;url&gt;\ncg model add-source model2.safetensors &lt;url&gt;\n\n# Try export again\ncg export\n</code></pre>"},{"location":"user-guide/models/adding-sources/#invalid-url-format","title":"Invalid URL format","text":"<p>Problem: URL doesn't work</p> <p>Solutions:</p> <pre><code># Ensure URL is direct download link, not webpage\n# Wrong: https://civitai.com/models/4201/realistic-vision\n# Right: https://civitai.com/api/download/models/128078\n\n# For CivitAI, use API URLs\ncg model add-source model.safetensors https://civitai.com/api/download/models/XXXXX\n\n# For HuggingFace, use resolve URLs\ncg model add-source model.safetensors https://huggingface.co/USER/REPO/resolve/main/file.safetensors\n</code></pre>"},{"location":"user-guide/models/adding-sources/#advanced-usage","title":"Advanced usage","text":""},{"location":"user-guide/models/adding-sources/#viewing-all-models-with-sources","title":"Viewing all models with sources","text":"<p>List models and check for sources:</p> <pre><code># Show all models\ncg model index list\n\n# Check each for sources\ncg model index show model1.safetensors\ncg model index show model2.safetensors\n</code></pre> <p>Models with sources show:</p> <pre><code>  Sources (X):\n    \u2022 Type\n      URL: ...\n</code></pre> <p>Models without sources show:</p> <pre><code>  Sources: None\n    Add with: cg model add-source abc1234\n</code></pre>"},{"location":"user-guide/models/adding-sources/#exporting-source-list","title":"Exporting source list","text":"<p>Create a backup of all model sources:</p> <pre><code># List all models\ncg model index list &gt; models.txt\n\n# For each model, export sources\nfor model in $(cat models.txt | grep \".safetensors\" | awk '{print $1}'); do\n  echo \"Model: $model\"\n  cg model index show \"$model\" | grep -A 10 \"Sources\"\n  echo \"---\"\ndone &gt; model_sources.txt\n</code></pre>"},{"location":"user-guide/models/adding-sources/#verifying-sources-work","title":"Verifying sources work","text":"<p>Test that URLs are accessible:</p> <pre><code># Get source URL\ncg model index show model.safetensors | grep \"URL:\"\n\n# Test with wget or curl\nwget --spider &lt;url&gt;\ncurl -I &lt;url&gt;\n</code></pre> <p>If URL returns 200 OK, source is valid.</p>"},{"location":"user-guide/models/adding-sources/#managing-source-metadata","title":"Managing source metadata","text":"<p>Sources include metadata from API responses (CivitAI, HuggingFace):</p> <pre><code>cg model index show model.safetensors\n</code></pre> <pre><code>  Sources (1):\n    \u2022 CivitAI\n      URL: https://civitai.com/api/download/models/128078\n      model_name: Realistic Vision V5.0\n      creator: SG_161222\n      Added: 2025-01-10 09:15:00\n</code></pre> <p>This metadata helps identify model versions and creators.</p>"},{"location":"user-guide/models/adding-sources/#future-enhancements","title":"Future enhancements","text":"<p>Currently, ComfyGit only has <code>cg model add-source</code>. Future versions may add:</p> <ul> <li><code>cg model list-sources</code> - List all models and their sources</li> <li><code>cg model remove-source</code> - Remove a source URL</li> <li><code>cg model update-source</code> - Update a source URL</li> </ul> <p>For now, use:</p> <ul> <li><code>cg model index show &lt;model&gt;</code> to view sources</li> <li><code>cg model add-source</code> to add sources</li> <li>Manual database editing to remove sources (advanced)</li> </ul>"},{"location":"user-guide/models/adding-sources/#next-steps","title":"Next steps","text":"<ul> <li> <p> Model Index</p> <p>Understand how the model index works</p> </li> <li> <p> Downloading Models</p> <p>Download models from URLs with automatic source registration</p> </li> <li> <p> Export/Import</p> <p>Share environments with automatic model downloads</p> </li> </ul>"},{"location":"user-guide/models/downloading-models/","title":"Downloading Models","text":"<p>Download models from CivitAI, HuggingFace, and direct URLs with automatic indexing and source tracking.</p>"},{"location":"user-guide/models/downloading-models/#overview","title":"Overview","text":"<p>ComfyGit can download models from multiple sources:</p> <ul> <li>CivitAI - Community model sharing platform</li> <li>HuggingFace - AI model repository</li> <li>Direct URLs - Any direct download link</li> </ul> <p>All downloads are:</p> <ul> <li>Automatically indexed - Added to model database immediately</li> <li>Hash-verified - BLAKE3 computed during download</li> <li>Source-tracked - URL saved for future reference</li> <li>Atomic - Downloads to <code>.tmp</code> file, renamed on success (prevents corruption)</li> </ul>"},{"location":"user-guide/models/downloading-models/#basic-download","title":"Basic download","text":"<p>Download a model from any URL:</p> <pre><code>cg model download https://civitai.com/api/download/models/128078\n</code></pre> <p>What happens:</p> <ol> <li>Source detection - Identifies CivitAI, HuggingFace, or custom URL</li> <li>Path suggestion - Suggests appropriate category subdirectory</li> <li>Interactive confirmation - Shows suggested path, allows changes</li> <li>Streaming download - Downloads with progress display</li> <li>Hash computation - BLAKE3 computed inline during download</li> <li>Automatic indexing - Model added to database</li> <li>Source registration - URL saved for re-downloads</li> </ol> <p>Example session:</p> <pre><code>\ud83d\udce5 Downloading from: https://civitai.com/api/download/models/128078\n   Model will be saved to: checkpoints/realistic_vision_v5.safetensors\n\n   [Y] Continue  [m] Change path  [c] Cancel\nChoice [Y]/m/c: y\n\n\ud83d\udce5 Downloading to: checkpoints/realistic_vision_v5.safetensors\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 4.27 GB / 4.27 GB [100%] 12.3 MB/s\n\n\u2713 Download complete: realistic_vision_v5.safetensors\n  Size: 4.27 GB\n  Hash: f6e5d4c3b2a1e9876543210abcdef123456789\n  Path: checkpoints/realistic_vision_v5.safetensors\n  Source: CivitAI\n</code></pre>"},{"location":"user-guide/models/downloading-models/#download-sources","title":"Download sources","text":""},{"location":"user-guide/models/downloading-models/#civitai","title":"CivitAI","text":"<p>CivitAI is the largest ComfyUI model community. Download models by:</p> <p>API download URL:</p> <pre><code>cg model download https://civitai.com/api/download/models/128078\n</code></pre> <p>Direct model page URL:</p> <pre><code># ComfyGit extracts the API URL automatically\ncg model download https://civitai.com/models/4201/realistic-vision-v51\n</code></pre> <p>CivitAI API keys</p> <p>Some models require authentication. Set your API key once:</p> <pre><code>cg config --civitai-key YOUR_API_KEY_HERE\n</code></pre> <p>Get your key from: https://civitai.com/user/account</p>"},{"location":"user-guide/models/downloading-models/#huggingface","title":"HuggingFace","text":"<p>HuggingFace hosts official and community models:</p> <pre><code># Full URL to specific file\ncg model download https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors\n\n# Shortened hf.co URL\ncg model download https://hf.co/stabilityai/sdxl-vae/resolve/main/sdxl_vae.safetensors\n</code></pre> <p>ComfyGit detects HuggingFace URLs and handles authentication if needed.</p>"},{"location":"user-guide/models/downloading-models/#direct-urls","title":"Direct URLs","text":"<p>Any direct download link works:</p> <pre><code># Direct .safetensors file\ncg model download https://example.com/models/my_model.safetensors\n\n# GitHub releases\ncg model download https://github.com/user/repo/releases/download/v1.0/model.safetensors\n</code></pre>"},{"location":"user-guide/models/downloading-models/#path-confirmation","title":"Path confirmation","text":""},{"location":"user-guide/models/downloading-models/#interactive-mode-default","title":"Interactive mode (default)","text":"<p>By default, ComfyGit shows the suggested path and asks for confirmation:</p> <pre><code>\ud83d\udce5 Downloading from: https://civitai.com/api/download/models/128078\n   Model will be saved to: checkpoints/realistic_vision_v5.safetensors\n\n   [Y] Continue  [m] Change path  [c] Cancel\nChoice [Y]/m/c:\n</code></pre> <p>Options:</p> <ul> <li>Y or Enter - Continue with suggested path</li> <li>m - Change the path</li> <li>c - Cancel download</li> </ul> <p>Changing the path:</p> <pre><code>Choice [Y]/m/c: m\n\nEnter path (relative to models dir): loras/my_custom_lora.safetensors\n\n\ud83d\udce5 Downloading from: https://civitai.com/api/download/models/128078\n   Model will be saved to: loras/my_custom_lora.safetensors\n\n   [Y] Continue  [m] Change path  [c] Cancel\nChoice [Y]/m/c: y\n</code></pre>"},{"location":"user-guide/models/downloading-models/#specifying-exact-path","title":"Specifying exact path","text":"<p>Skip interaction by providing the full path:</p> <pre><code>cg model download https://example.com/model.safetensors --path checkpoints/my_model.safetensors\n</code></pre> <p>Path is relative to your models directory.</p>"},{"location":"user-guide/models/downloading-models/#specifying-category","title":"Specifying category","text":"<p>Auto-generate path in a specific category:</p> <pre><code>cg model download https://example.com/some_lora.safetensors --category loras\n</code></pre> <p>ComfyGit extracts the filename and places it in <code>loras/some_lora.safetensors</code>.</p> <p>Available categories:</p> <ul> <li><code>checkpoints</code> - Base models</li> <li><code>loras</code> - LoRA adapters</li> <li><code>vae</code> - VAE models</li> <li><code>controlnet</code> - ControlNet models</li> <li><code>upscale_models</code> - Upscalers</li> <li><code>embeddings</code> - Textual inversions</li> <li><code>clip_vision</code> - CLIP vision encoders</li> <li><code>style_models</code> - Style models</li> <li>Plus 13 more specialized categories</li> </ul>"},{"location":"user-guide/models/downloading-models/#non-interactive-downloads","title":"Non-interactive downloads","text":"<p>Skip all prompts with <code>--yes</code>:</p> <pre><code>cg model download https://example.com/model.safetensors --yes\n</code></pre> <p>Uses the auto-suggested path without confirmation. Useful for:</p> <ul> <li>Scripting batch downloads</li> <li>CI/CD pipelines</li> <li>Automated environment setup</li> </ul>"},{"location":"user-guide/models/downloading-models/#path-suggestion-logic","title":"Path suggestion logic","text":"<p>ComfyGit suggests paths based on:</p> <ol> <li>Filename analysis - Looks for category keywords in filename</li> <li>Source metadata - Uses CivitAI/HuggingFace model type</li> <li>File extension - Maps <code>.safetensors</code>, <code>.ckpt</code>, <code>.pt</code>, etc.</li> <li>Default category - Falls back to <code>checkpoints/</code> for unknown types</li> </ol> <p>Examples:</p> <pre><code>URL: civitai.com/.../anime_lora_v2.safetensors\n\u2192 Suggested: loras/anime_lora_v2.safetensors\n\nURL: huggingface.co/.../sdxl_vae.safetensors\n\u2192 Suggested: vae/sdxl_vae.safetensors\n\nURL: example.com/my_model.safetensors\n\u2192 Suggested: checkpoints/my_model.safetensors (default)\n</code></pre>"},{"location":"user-guide/models/downloading-models/#download-progress","title":"Download progress","text":"<p>During download, ComfyGit shows:</p> <pre><code>\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 4.27 GB / 4.27 GB [100%] 12.3 MB/s\n</code></pre> <ul> <li>Progress bar - Visual completion indicator</li> <li>Downloaded / Total - Current and total size</li> <li>Percentage - Completion percentage</li> <li>Speed - Current download speed</li> </ul> <p>For large models (&gt;5 GB), this helps track progress.</p>"},{"location":"user-guide/models/downloading-models/#after-download-completes","title":"After download completes","text":""},{"location":"user-guide/models/downloading-models/#download-statistics","title":"Download statistics","text":"<p>ComfyGit shows detailed stats after successful download:</p> <pre><code>\u2713 Download complete: realistic_vision_v5.safetensors\n  Size: 4.27 GB\n  Hash: f6e5d4c3b2a1e9876543210abcdef123456789\n  Path: checkpoints/realistic_vision_v5.safetensors\n  Source: CivitAI\n</code></pre> <p>Fields:</p> <ul> <li>Filename - Model filename on disk</li> <li>Size - File size in human-readable format</li> <li>Hash - BLAKE3 hash (short form)</li> <li>Path - Relative path in models directory</li> <li>Source - Detected source type</li> </ul>"},{"location":"user-guide/models/downloading-models/#automatic-indexing","title":"Automatic indexing","text":"<p>The model is immediately available in:</p> <pre><code># Find it in the index\ncg model index find realistic_vision\n\n# See detailed info\ncg model index show realistic_vision_v5.safetensors\n\n# Use it in workflows right away\n# (ComfyUI will see it in checkpoints/ folder)\n</code></pre>"},{"location":"user-guide/models/downloading-models/#source-tracking","title":"Source tracking","text":"<p>The download URL is saved as a source:</p> <pre><code>cg model index show realistic_vision_v5.safetensors\n</code></pre> <pre><code>  Sources (1):\n    \u2022 CivitAI\n      URL: https://civitai.com/api/download/models/128078\n      Added: 2025-01-15 14:32:18\n</code></pre> <p>This enables:</p> <ul> <li>Re-downloading if file is deleted</li> <li>Sharing environments with download URLs</li> <li>Updating models from source</li> </ul>"},{"location":"user-guide/models/downloading-models/#civitai-authentication","title":"CivitAI authentication","text":""},{"location":"user-guide/models/downloading-models/#when-authentication-is-needed","title":"When authentication is needed","text":"<p>Some CivitAI models require an API key:</p> <ul> <li>NSFW/mature content models</li> <li>Creator-gated models</li> <li>Early access models</li> </ul> <p>Without a key, you'll see:</p> <pre><code>\u2717 Download failed: 401 Unauthorized\n\n\u26a0\ufe0f  CivitAI Authentication Required\n\nThis model requires a CivitAI API key.\n\n1. Get your API key:\n   \u2192 Visit: https://civitai.com/user/account\n   \u2192 Copy your API key\n\n2. Configure ComfyGit:\n   \u2192 Run: cg config --civitai-key YOUR_KEY_HERE\n\n3. Retry download:\n   \u2192 Run: cg model download &lt;url&gt;\n</code></pre>"},{"location":"user-guide/models/downloading-models/#setting-your-api-key","title":"Setting your API key","text":"<p>Configure authentication once per workspace:</p> <pre><code>cg config --civitai-key YOUR_API_KEY_HERE\n</code></pre> <p>Example:</p> <pre><code>cg config --civitai-key a1b2c3d4e5f67890abcdef1234567890\n</code></pre> <pre><code>\u2713 CivitAI API key saved\n</code></pre> <p>Your key is stored securely in <code>.metadata/workspace.json</code> and used for all future CivitAI downloads.</p>"},{"location":"user-guide/models/downloading-models/#viewing-configured-key","title":"Viewing configured key","text":"<p>Check if key is set:</p> <pre><code>cg config --show\n</code></pre> <pre><code>ComfyGit Configuration:\n\n  Workspace Path:  /home/user/comfygit\n  CivitAI API Key: \u2022\u2022\u2022\u2022\u2022\u2022\u2022\u20227890\n  Registry Cache:  Enabled\n</code></pre> <p>The key is masked showing only the last 4 characters.</p>"},{"location":"user-guide/models/downloading-models/#clearing-your-key","title":"Clearing your key","text":"<p>Remove stored API key:</p> <pre><code>cg config --civitai-key \"\"\n</code></pre> <pre><code>\u2713 CivitAI API key cleared\n</code></pre>"},{"location":"user-guide/models/downloading-models/#common-patterns","title":"Common patterns","text":""},{"location":"user-guide/models/downloading-models/#downloading-multiple-models","title":"Downloading multiple models","text":"<p>Download several models in sequence:</p> <pre><code># LoRAs\ncg model download https://civitai.com/.../lora1.safetensors --yes\ncg model download https://civitai.com/.../lora2.safetensors --yes\ncg model download https://civitai.com/.../lora3.safetensors --yes\n\n# Checkpoints\ncg model download https://huggingface.co/.../sdxl.safetensors --yes\ncg model download https://huggingface.co/.../sd15.safetensors --yes\n</code></pre> <p>Use <code>--yes</code> to skip confirmation for each download.</p>"},{"location":"user-guide/models/downloading-models/#downloading-to-specific-subdirectories","title":"Downloading to specific subdirectories","text":"<p>Organize models with custom paths:</p> <pre><code># Character LoRAs\ncg model download https://civitai.com/.../character.safetensors --path loras/characters/character.safetensors\n\n# Style LoRAs\ncg model download https://civitai.com/.../anime_style.safetensors --path loras/styles/anime_style.safetensors\n\n# Project-specific models\ncg model download https://example.com/project_model.safetensors --path checkpoints/client_projects/model.safetensors\n</code></pre> <p>Subdirectories are created automatically.</p>"},{"location":"user-guide/models/downloading-models/#re-downloading-a-model","title":"Re-downloading a model","text":"<p>If you deleted a model with tracked source:</p> <pre><code># Find the model (even if deleted)\ncg model add-source\n\n# Shows models without sources, skip to re-download\n# Or download directly if you have the URL\ncg model download https://civitai.com/api/download/models/128078 --yes\n</code></pre>"},{"location":"user-guide/models/downloading-models/#downloading-from-workflow-requirements","title":"Downloading from workflow requirements","text":"<p>When a workflow needs a model:</p> <pre><code># Resolve workflow to see missing models\ncg workflow resolve my_workflow\n\n# Copy download URL from output\ncg model download &lt;url&gt; --yes\n</code></pre>"},{"location":"user-guide/models/downloading-models/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/models/downloading-models/#401-unauthorized-from-civitai","title":"\"401 Unauthorized\" from CivitAI","text":"<p>Problem: Model requires authentication</p> <p>Solution:</p> <pre><code># Set your API key\ncg config --civitai-key YOUR_KEY_HERE\n\n# Retry download\ncg model download &lt;url&gt;\n</code></pre> <p>Get API key from: https://civitai.com/user/account</p>"},{"location":"user-guide/models/downloading-models/#403-forbidden-errors","title":"\"403 Forbidden\" errors","text":"<p>Problem: Model is private, deleted, or access-restricted</p> <p>Possible causes:</p> <ul> <li>Model removed by creator</li> <li>DMCA takedown</li> <li>Creator restricted access</li> <li>Invalid download URL</li> </ul> <p>Solution:</p> <p>Find an alternative model or contact model creator.</p>"},{"location":"user-guide/models/downloading-models/#404-not-found","title":"\"404 Not Found\"","text":"<p>Problem: URL is incorrect or model doesn't exist</p> <p>Solutions:</p> <pre><code># Verify URL is correct\n# Check browser - can you access it?\n\n# For CivitAI, ensure using API URL:\n# https://civitai.com/api/download/models/123456\n# NOT: https://civitai.com/models/4201/model-name\n</code></pre>"},{"location":"user-guide/models/downloading-models/#download-hangs-or-is-very-slow","title":"Download hangs or is very slow","text":"<p>Problem: Slow connection or server throttling</p> <p>Solutions:</p> <ul> <li>Wait - large models (5+ GB) take time</li> <li>Check internet speed</li> <li>Try again later if server is overloaded</li> <li>Use <code>Ctrl+C</code> to cancel and retry</li> </ul>"},{"location":"user-guide/models/downloading-models/#disk-space-errors","title":"\"Disk space\" errors","text":"<p>Problem: Not enough space for download</p> <pre><code>\u2717 Download failed: No space left on device\n</code></pre> <p>Solutions:</p> <pre><code># Check available space\ndf -h ~\n\n# Free up space\nrm -rf ~/comfygit/workspace/models/old_models/\n\n# Or change models directory to larger disk\ncg model index dir /mnt/large_drive/models\n</code></pre>"},{"location":"user-guide/models/downloading-models/#file-already-exists","title":"File already exists","text":"<p>Problem: Model with same filename already exists</p> <pre><code>\u2717 File already exists: checkpoints/model.safetensors\n</code></pre> <p>Solutions:</p> <pre><code># Download to different name\ncg model download &lt;url&gt; --path checkpoints/model_v2.safetensors\n\n# Or delete old file first\nrm ~/comfygit/workspace/models/checkpoints/model.safetensors\ncg model download &lt;url&gt;\n</code></pre>"},{"location":"user-guide/models/downloading-models/#invalid-url-errors","title":"\"Invalid URL\" errors","text":"<p>Problem: URL format not recognized</p> <p>Solutions:</p> <pre><code># Ensure URL is direct download link\n# Not a webpage showing the download button\n\n# For CivitAI, use API URLs:\ncg model download https://civitai.com/api/download/models/128078\n\n# For HuggingFace, use resolve URLs:\ncg model download https://huggingface.co/USER/REPO/resolve/main/file.safetensors\n</code></pre>"},{"location":"user-guide/models/downloading-models/#hash-mismatch-warnings","title":"Hash mismatch warnings","text":"<p>Problem: Downloaded file hash doesn't match expected (rare)</p> <p>This indicates:</p> <ul> <li>Corrupted download</li> <li>Modified file on server</li> <li>Network issue</li> </ul> <p>Solution:</p> <pre><code># Delete corrupted file\nrm ~/comfygit/workspace/models/path/to/model.safetensors\n\n# Re-download\ncg model download &lt;url&gt;\n</code></pre>"},{"location":"user-guide/models/downloading-models/#cannot-write-to-models-directory","title":"Cannot write to models directory","text":"<p>Problem: Permission denied</p> <pre><code>\u2717 Download failed: Permission denied\n</code></pre> <p>Solutions:</p> <pre><code># Check directory permissions\nls -la ~/comfygit/workspace/models/\n\n# Fix permissions\nchmod -R u+w ~/comfygit/workspace/models/\n\n# Or use different directory\ncg model index dir ~/my_models\ncg model download &lt;url&gt;\n</code></pre>"},{"location":"user-guide/models/downloading-models/#advanced-usage","title":"Advanced usage","text":""},{"location":"user-guide/models/downloading-models/#downloading-to-temporary-location-first","title":"Downloading to temporary location first","text":"<p>Download elsewhere, then move to models directory:</p> <pre><code># Download to Downloads folder\ncd ~/Downloads\nwget https://example.com/model.safetensors\n\n# Move to models directory\nmv model.safetensors ~/comfygit/workspace/models/checkpoints/\n\n# Sync index\ncg model index sync\n</code></pre>"},{"location":"user-guide/models/downloading-models/#verifying-downloads-with-external-tools","title":"Verifying downloads with external tools","text":"<p>Verify hash independently:</p> <pre><code># Download model\ncg model download &lt;url&gt; --yes\n\n# Get ComfyGit's computed hash\ncg model index show model.safetensors\n\n# Compare with external tool\nb3sum ~/comfygit/workspace/models/checkpoints/model.safetensors\n</code></pre>"},{"location":"user-guide/models/downloading-models/#batch-downloads-from-file","title":"Batch downloads from file","text":"<p>Create a list of URLs and download all:</p> <pre><code># urls.txt\nhttps://civitai.com/api/download/models/128078\nhttps://civitai.com/api/download/models/128079\nhttps://civitai.com/api/download/models/128080\n</code></pre> <pre><code># Download all\nwhile read url; do\n  cg model download \"$url\" --yes\ndone &lt; urls.txt\n</code></pre>"},{"location":"user-guide/models/downloading-models/#next-steps","title":"Next steps","text":"<ul> <li> <p> Model Index</p> <p>Understand how models are indexed and organized</p> </li> <li> <p> Managing Models</p> <p>Search, organize, and maintain your model collection</p> </li> <li> <p> Adding Sources</p> <p>Register download URLs for sharing and re-downloads</p> </li> </ul>"},{"location":"user-guide/models/managing-models/","title":"Managing Models","text":"<p>Search, organize, and maintain your model collection across all environments.</p>"},{"location":"user-guide/models/managing-models/#overview","title":"Overview","text":"<p>ComfyGit provides powerful tools for managing models:</p> <ul> <li>Search - Find models instantly by name or hash</li> <li>Browse - Paginated views of your entire collection</li> <li>Inspect - Detailed information about any model</li> <li>Sync - Keep index up-to-date with filesystem changes</li> <li>Organize - Understand categories and structure</li> <li>Share - Global model directory used by all environments</li> </ul>"},{"location":"user-guide/models/managing-models/#viewing-your-model-collection","title":"Viewing your model collection","text":""},{"location":"user-guide/models/managing-models/#list-all-models","title":"List all models","text":"<p>See everything in your collection:</p> <pre><code>cg model index list\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 All indexed models (145 unique, 150 files):\n\n   sd_xl_base_1.0.safetensors\n   Size: 6.46 GB\n   Hash: a1b2c3d4e5f6...\n   Path: checkpoints/sd_xl_base_1.0.safetensors\n\n   anime_v2.safetensors\n   Size: 4.27 GB\n   Hash: f6e5d4c3b2a1...\n   Path: checkpoints/anime_v2.safetensors\n\n   realistic_vision.safetensors\n   Size: 5.13 GB\n   Hash: 9876543210ab...\n   Path: checkpoints/realistic_vision.safetensors\n\n   perfectEyes_lora.safetensors\n   Size: 144 MB\n   Hash: abcdef123456...\n   Path: loras/perfectEyes_lora.safetensors\n\n   detail_tweaker.safetensors\n   Size: 144 MB\n   Hash: 123456abcdef...\n   Path: loras/detail_tweaker.safetensors\n\n[Page 1 of 29] [n]ext [p]rev [q]uit\n</code></pre> <p>Navigation:</p> <ul> <li>Press <code>n</code> or Enter - Next page</li> <li>Press <code>p</code> - Previous page</li> <li>Press <code>q</code> - Quit</li> </ul> <p>The list shows 5 models per page for easy browsing.</p>"},{"location":"user-guide/models/managing-models/#browse-by-category","title":"Browse by category","text":"<p>Models are automatically organized by category based on their directory:</p> <pre><code># List all models, filtered by category\ncg model index list | grep \"Path: checkpoints/\"\ncg model index list | grep \"Path: loras/\"\ncg model index list | grep \"Path: vae/\"\n</code></pre> <p>Category structure</p> <p>ComfyGit automatically detects 20+ model categories from directory structure. See Model Index for the complete list.</p>"},{"location":"user-guide/models/managing-models/#searching-for-models","title":"Searching for models","text":""},{"location":"user-guide/models/managing-models/#search-by-filename","title":"Search by filename","text":"<p>Find models with matching filenames:</p> <pre><code>cg model index find \"anime\"\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udd0d Found 2 unique model(s) (3 locations) matching 'anime':\n\n   anime_v2.safetensors\n   Size: 4.27 GB\n   Hash: f6e5d4c3b2a1e9876543210abcdef123456789\n   Locations (2):\n     \u2022 /home/user/comfygit/workspace/models/checkpoints/anime_v2.safetensors\n     \u2022 /home/user/backup/checkpoints/anime_v2.safetensors\n\n   anime_style_lora.safetensors\n   Size: 144 MB\n   Hash: 9876543210abcdef123456789abcdef123456789\n   Location: /home/user/comfygit/workspace/models/loras/anime_style_lora.safetensors\n</code></pre> <p>Search is case-insensitive and matches anywhere in filename:</p> <pre><code>cg model index find \"realistic\"    # Matches realistic_vision.safetensors\ncg model index find \"REALISTIC\"    # Same result\ncg model index find \"vision\"       # Also matches realistic_vision.safetensors\n</code></pre>"},{"location":"user-guide/models/managing-models/#search-by-hash","title":"Search by hash","text":"<p>Find models by hash prefix:</p> <pre><code>cg model index find a1b2c3\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udd0d Found 1 model(s) matching 'a1b2c3':\n\n   sd_xl_base_1.0.safetensors\n   Size: 6.46 GB\n   Hash: a1b2c3d4e5f67890abcdef1234567890abcdef12\n   Location: /home/user/comfygit/workspace/models/checkpoints/sd_xl_base_1.0.safetensors\n</code></pre> <p>Hash searches match from the beginning:</p> <pre><code>cg model index find a1b2      # Matches a1b2c3d4...\ncg model index find a1b2c3d4  # More specific\n</code></pre>"},{"location":"user-guide/models/managing-models/#understanding-search-results","title":"Understanding search results","text":"<p>Unique models vs locations:</p> <pre><code>\ud83d\udd0d Found 2 unique model(s) (3 locations) matching 'anime':\n</code></pre> <ul> <li>2 unique models - Two different files (different hashes)</li> <li>3 locations - Total files on disk (one model exists in 2 places)</li> </ul> <p>Multiple locations for same model:</p> <pre><code>   anime_v2.safetensors\n   Size: 4.27 GB\n   Hash: f6e5d4c3b2a1e9876543210abcdef123456789\n   Locations (2):\n     \u2022 /home/user/comfygit/workspace/models/checkpoints/anime_v2.safetensors\n     \u2022 /home/user/backup/checkpoints/anime_v2.safetensors\n</code></pre> <p>Both locations contain the exact same file (same hash).</p>"},{"location":"user-guide/models/managing-models/#detailed-model-information","title":"Detailed model information","text":"<p>Get complete details about any model:</p> <pre><code>cg model index show sd_xl_base_1.0.safetensors\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 Model Details: sd_xl_base_1.0.safetensors\n\n  Hash:           a1b2c3d4e5f67890abcdef1234567890abcdef12\n  Blake3:         a1b2c3d4e5f67890abcdef1234567890abcdef12\n  SHA256:         Not computed\n  Size:           6.46 GB\n  Category:       checkpoints\n  Last Seen:      2025-01-15 14:32:18\n\n  Locations (2):\n    \u2022 /home/user/comfygit/workspace/models/checkpoints/sd_xl_base_1.0.safetensors\n      Modified: 2025-01-10 09:15:43\n    \u2022 /mnt/backup/models/checkpoints/sd_xl_base_1.0.safetensors\n      Modified: 2025-01-10 09:20:12\n\n  Sources (2):\n    \u2022 HuggingFace\n      URL: https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors\n      Added: 2025-01-10 09:15:00\n    \u2022 CivitAI\n      URL: https://civitai.com/api/download/models/128078\n      Added: 2025-01-12 16:42:31\n</code></pre>"},{"location":"user-guide/models/managing-models/#understanding-model-details","title":"Understanding model details","text":"<p>Hashes:</p> <ul> <li>Hash - Short hash (42 chars) for display</li> <li>Blake3 - Hash from file sampling (~200ms computation)</li> <li>SHA256 - Full file hash (only computed if collision detected)</li> </ul> <p>Size:</p> <p>Human-readable file size (GB, MB, KB).</p> <p>Category:</p> <p>Auto-detected from directory path. See Model Index for category list.</p> <p>Last Seen:</p> <p>Timestamp when model was last scanned. If a file is moved or deleted, this shows when it was last known to exist.</p> <p>Locations:</p> <p>All places this exact file exists (by hash). Each location shows:</p> <ul> <li>Full absolute path</li> <li>Last modified timestamp</li> </ul> <p>Sources:</p> <p>Registered download URLs. Each source shows:</p> <ul> <li>Source type (CivitAI, HuggingFace, custom)</li> <li>Full download URL</li> <li>When source was added</li> </ul>"},{"location":"user-guide/models/managing-models/#keeping-the-index-synced","title":"Keeping the index synced","text":""},{"location":"user-guide/models/managing-models/#when-to-sync","title":"When to sync","text":"<p>Run <code>cg model index sync</code> when you:</p> <ul> <li>Download models outside ComfyGit (browser downloads)</li> <li>Copy models from other machines</li> <li>Manually delete or move model files</li> <li>Import models from another ComfyUI installation</li> <li>Notice models missing from workflows</li> </ul>"},{"location":"user-guide/models/managing-models/#running-a-sync","title":"Running a sync","text":"<p>Update the index to match your filesystem:</p> <pre><code>cg model index sync\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udcc1 Syncing models directory: /home/user/comfygit/workspace/models\n\nScanning directory...\n  Scanned 152 files in 28.4s\n  Found 3 new models\n  Removed 1 deleted model\n  147 models unchanged\n\n\u2713 Sync complete\n  Total models: 148 unique, 152 files\n  Total size: 124.7 GB\n</code></pre> <p>What gets updated:</p> <ul> <li>New models - Files added since last sync</li> <li>Deleted models - Removed from index if files no longer exist</li> <li>Unchanged models - Verified still present</li> </ul>"},{"location":"user-guide/models/managing-models/#sync-performance","title":"Sync performance","text":"<p>Sync time depends on:</p> <ul> <li>Number of files (~200ms per new file)</li> <li>Disk speed (SSD vs HDD)</li> <li>File sizes (larger = slower sampling)</li> </ul> <p>Typical times:</p> <ul> <li>50 models - ~10 seconds</li> <li>150 models - ~30 seconds</li> <li>500 models - ~2 minutes</li> </ul> <p>Unchanged files are fast</p> <p>ComfyGit uses modification time (mtime) caching. Files that haven't changed since last sync are skipped, making repeated syncs very fast.</p>"},{"location":"user-guide/models/managing-models/#understanding-global-vs-environment-models","title":"Understanding global vs environment models","text":""},{"location":"user-guide/models/managing-models/#global-models-directory","title":"Global models directory","text":"<p>ComfyGit uses a single global models directory shared by all environments:</p> <pre><code>~/comfygit/workspace/models/\n  \u251c\u2500\u2500 checkpoints/\n  \u251c\u2500\u2500 loras/\n  \u251c\u2500\u2500 vae/\n  \u2514\u2500\u2500 ...\n</code></pre> <p>Benefits:</p> <ul> <li>Disk savings - One copy shared across all environments</li> <li>Consistency - All environments see same models</li> <li>Easy management - One place to organize models</li> </ul>"},{"location":"user-guide/models/managing-models/#environment-symlinks","title":"Environment symlinks","text":"<p>Each environment's <code>ComfyUI/models/</code> directory is a symlink to the global directory:</p> <pre><code># Environment directory structure\n~/comfygit/environments/my-env/ComfyUI/\n  \u251c\u2500\u2500 main.py\n  \u251c\u2500\u2500 models/  \u2192 ~/comfygit/workspace/models/  (symlink)\n  \u2514\u2500\u2500 custom_nodes/\n</code></pre> <p>ComfyUI follows the symlink and sees all models as if they were local.</p>"},{"location":"user-guide/models/managing-models/#verifying-symlinks","title":"Verifying symlinks","text":"<p>Check if symlinks are correct:</p> <pre><code># List environment directory\nls -la ~/comfygit/environments/my-env/ComfyUI/\n\n# You should see:\n# lrwxrwxrwx models -&gt; /home/user/comfygit/workspace/models\n</code></pre> <p>If the symlink is broken or missing, repair it:</p> <pre><code>cg -e my-env repair\n</code></pre>"},{"location":"user-guide/models/managing-models/#organizing-your-models","title":"Organizing your models","text":""},{"location":"user-guide/models/managing-models/#recommended-directory-structure","title":"Recommended directory structure","text":"<p>Organize models by category and purpose:</p> <pre><code>models/\n  \u251c\u2500\u2500 checkpoints/\n  \u2502   \u251c\u2500\u2500 realistic/\n  \u2502   \u2502   \u251c\u2500\u2500 realistic_vision_v5.safetensors\n  \u2502   \u2502   \u2514\u2500\u2500 deliberate_v2.safetensors\n  \u2502   \u251c\u2500\u2500 anime/\n  \u2502   \u2502   \u251c\u2500\u2500 anime_v2.safetensors\n  \u2502   \u2502   \u2514\u2500\u2500 anything_v5.safetensors\n  \u2502   \u2514\u2500\u2500 sdxl/\n  \u2502       \u2514\u2500\u2500 sd_xl_base_1.0.safetensors\n  \u251c\u2500\u2500 loras/\n  \u2502   \u251c\u2500\u2500 characters/\n  \u2502   \u251c\u2500\u2500 styles/\n  \u2502   \u2514\u2500\u2500 effects/\n  \u251c\u2500\u2500 vae/\n  \u2514\u2500\u2500 controlnet/\n</code></pre> <p>ComfyGit will automatically index all subdirectories within each category.</p>"},{"location":"user-guide/models/managing-models/#moving-models-between-categories","title":"Moving models between categories","text":"<p>If you put a model in the wrong category:</p> <pre><code># Move the file\nmv ~/comfygit/workspace/models/checkpoints/lora.safetensors \\\n   ~/comfygit/workspace/models/loras/lora.safetensors\n\n# Update the index\ncg model index sync\n</code></pre> <p>The model's category will update automatically.</p>"},{"location":"user-guide/models/managing-models/#cleaning-up-duplicates","title":"Cleaning up duplicates","text":"<p>Find and remove duplicate models to save space:</p> <pre><code># List all duplicates\ncg model index list --duplicates\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 Duplicate models (12 models, 28 files):\n\n   sd_xl_base_1.0.safetensors\n   Size: 6.46 GB\n   Hash: a1b2c3d4e5f6...\n   Locations (3):\n     \u2022 /home/user/comfygit/workspace/models/checkpoints/sd_xl_base_1.0.safetensors\n     \u2022 /home/user/backup/models/checkpoints/sd_xl_base_1.0.safetensors\n     \u2022 /mnt/external/old_comfyui/models/checkpoints/sd_xl_base_1.0.safetensors\n</code></pre> <p>Get details about a specific duplicate:</p> <pre><code>cg model index show sd_xl_base_1.0.safetensors\n</code></pre> <p>Remove unnecessary copies:</p> <pre><code># Keep the one in workspace, delete backups\nrm /home/user/backup/models/checkpoints/sd_xl_base_1.0.safetensors\nrm /mnt/external/old_comfyui/models/checkpoints/sd_xl_base_1.0.safetensors\n\n# Update index\ncg model index sync\n</code></pre>"},{"location":"user-guide/models/managing-models/#removing-models","title":"Removing models","text":""},{"location":"user-guide/models/managing-models/#organic-removal-via-workflows","title":"Organic removal via workflows","text":"<p>ComfyGit does not have a direct delete command. Models are removed organically:</p> <ol> <li>Remove from workflows - Delete the model-loading node in ComfyUI</li> <li>Resolve or commit - Run <code>cg workflow resolve</code> or <code>cg commit</code></li> <li>Automatic cleanup - Model reference removed from pyproject.toml</li> <li>File remains - Physical file stays in models directory</li> </ol> <p>Why this design?</p> <p>Prevents accidental deletion of expensive-to-redownload models. Files are only tracked when actively used.</p>"},{"location":"user-guide/models/managing-models/#manual-file-deletion","title":"Manual file deletion","text":"<p>To actually delete model files:</p> <pre><code># Delete the file manually\nrm ~/comfygit/workspace/models/checkpoints/unused_model.safetensors\n\n# Update the index\ncg model index sync\n</code></pre> <p>The model will be removed from the index.</p> <p>Deleting files</p> <p>Make absolutely sure you don't need the model before deleting. Re-downloading large models (5+ GB) takes time and bandwidth.</p>"},{"location":"user-guide/models/managing-models/#identifying-unused-models","title":"Identifying unused models","text":"<p>Find models not referenced by any workflow:</p> <pre><code># Check each environment\ncg -e my-env status\n\n# Look for models with no workflow references\ncg model index show model_name.safetensors\n</code></pre> <p>If a model has sources registered, you can safely delete it (can re-download later).</p>"},{"location":"user-guide/models/managing-models/#model-statistics-and-health","title":"Model statistics and health","text":""},{"location":"user-guide/models/managing-models/#index-status","title":"Index status","text":"<p>Check overall index health:</p> <pre><code>cg model index status\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udcca Model Index Status:\n\n   Models Directory: \u2713 /home/user/comfygit/workspace/models\n   Total Models: 148 unique models\n   Total Files: 152 files indexed\n   Duplicates: 4 duplicate files detected\n</code></pre> <p>Interpreting the output:</p> <ul> <li>Models Directory - \u2713 means directory exists and is accessible</li> <li>Total Models - Number of unique files (by hash)</li> <li>Total Files - Total file count (includes duplicates)</li> <li>Duplicates - Files that exist in multiple locations</li> </ul>"},{"location":"user-guide/models/managing-models/#finding-duplicates","title":"Finding duplicates","text":"<p>If <code>Total Files &gt; Total Models</code>, you have duplicates:</p> <pre><code>   Total Models: 148 unique models\n   Total Files: 152 files indexed\n   Duplicates: 4 duplicate files detected\n</code></pre> <p>Find which models are duplicated:</p> <pre><code># Show only duplicate models\ncg model index list --duplicates\n</code></pre> <p>This will display only models that exist in multiple locations, making it easy to identify duplicates for cleanup.</p>"},{"location":"user-guide/models/managing-models/#common-workflows","title":"Common workflows","text":""},{"location":"user-guide/models/managing-models/#importing-models-from-another-comfyui","title":"Importing models from another ComfyUI","text":"<p>Copy models from existing ComfyUI installation:</p> <pre><code># Option 1: Point to existing directory\ncg model index dir ~/old_comfyui/models\n\n# Option 2: Copy then scan\ncp -r ~/old_comfyui/models/* ~/comfygit/workspace/models/\ncg model index sync\n</code></pre>"},{"location":"user-guide/models/managing-models/#sharing-models-between-workspaces","title":"Sharing models between workspaces","text":"<p>If you have multiple workspaces:</p> <pre><code># Workspace 1 uses global location\ncd ~/comfygit/workspace1\ncg model index dir /mnt/shared/comfyui_models\n\n# Workspace 2 uses same location\ncd ~/comfygit/workspace2\ncg model index dir /mnt/shared/comfyui_models\n</code></pre> <p>Both workspaces share the same model collection.</p>"},{"location":"user-guide/models/managing-models/#backing-up-your-models","title":"Backing up your models","text":"<p>Create backups of your model collection:</p> <pre><code># Full backup\nrsync -av ~/comfygit/workspace/models/ /mnt/backup/models/\n\n# Backup only checkpoints\nrsync -av ~/comfygit/workspace/models/checkpoints/ /mnt/backup/checkpoints/\n</code></pre> <p>After backup, sync to register backup locations:</p> <pre><code>cg model index sync\n</code></pre>"},{"location":"user-guide/models/managing-models/#verifying-workflow-requirements","title":"Verifying workflow requirements","text":"<p>Check if a workflow's models are available:</p> <pre><code># Resolve workflow\ncg -e my-env workflow resolve my_workflow\n\n# Look for \"unresolved\" models\n# Then search for them\ncg model index find missing_model\n</code></pre> <p>If found: workflow will work If not found: download the model</p>"},{"location":"user-guide/models/managing-models/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/models/managing-models/#models-not-appearing-in-comfyui","title":"Models not appearing in ComfyUI","text":"<p>Problem: Downloaded a model but ComfyUI doesn't show it</p> <p>Solutions:</p> <pre><code># 1. Verify model is indexed\ncg model index find model_name\n\n# 2. Check symlink is correct\nls -la ~/comfygit/environments/my-env/ComfyUI/models\n\n# 3. Repair environment if symlink broken\ncg -e my-env repair\n\n# 4. Restart ComfyUI\ncg -e my-env run\n</code></pre>"},{"location":"user-guide/models/managing-models/#no-models-directory-configured","title":"\"No models directory configured\"","text":"<p>Problem: Commands fail with this error</p> <p>Solution:</p> <pre><code># Set models directory first\ncg model index dir ~/comfygit/workspace/models\n\n# Then retry command\ncg model index list\n</code></pre>"},{"location":"user-guide/models/managing-models/#duplicate-models-consuming-space","title":"Duplicate models consuming space","text":"<p>Problem: Same model exists in multiple places</p> <p>Solution:</p> <pre><code># Find the duplicate\ncg model index show model.safetensors\n\n# Shows all locations - delete unwanted copies\nrm /unwanted/location/model.safetensors\n\n# Update index\ncg model index sync\n</code></pre>"},{"location":"user-guide/models/managing-models/#models-in-wrong-category","title":"Models in wrong category","text":"<p>Problem: Model shows wrong category in index</p> <p>Solution:</p> <pre><code># Move file to correct category folder\nmv ~/comfygit/workspace/models/checkpoints/lora.safetensors \\\n   ~/comfygit/workspace/models/loras/lora.safetensors\n\n# Sync to update category\ncg model index sync\n</code></pre>"},{"location":"user-guide/models/managing-models/#sync-shows-deleted-models-as-present","title":"Sync shows deleted models as present","text":"<p>Problem: Deleted files still appear in index</p> <p>Solution:</p> <pre><code># Run sync to clean up\ncg model index sync\n\n# Verify removed\ncg model index find deleted_model\n# Should show: No models found matching...\n</code></pre>"},{"location":"user-guide/models/managing-models/#cannot-find-model-by-filename","title":"Cannot find model by filename","text":"<p>Problem: Search returns no results for known file</p> <p>Solutions:</p> <pre><code># Check exact filename\nls ~/comfygit/workspace/models/checkpoints/ | grep -i model_name\n\n# Sync if recently added\ncg model index sync\n\n# Try hash search if you know partial hash\ncg model index find a1b2c3\n</code></pre>"},{"location":"user-guide/models/managing-models/#symlink-points-to-wrong-directory","title":"Symlink points to wrong directory","text":"<p>Problem: Environment models/ points to old location</p> <p>Solution:</p> <pre><code># Remove old symlink\nrm ~/comfygit/environments/my-env/ComfyUI/models\n\n# Set correct directory (recreates symlinks)\ncg model index dir /correct/path/to/models\n\n# Or repair environment\ncg -e my-env repair\n</code></pre>"},{"location":"user-guide/models/managing-models/#index-shows-very-old-last-seen-date","title":"Index shows very old \"Last Seen\" date","text":"<p>Problem: Model shows old timestamp</p> <p>Cause: File hasn't been scanned recently (possibly in backup location)</p> <p>Solution:</p> <p>This is normal if:</p> <ul> <li>Model is in a backup directory</li> <li>File hasn't changed in months</li> <li>Model was imported from old installation</li> </ul> <p>Not a problem unless file is actually missing.</p>"},{"location":"user-guide/models/managing-models/#advanced-management","title":"Advanced management","text":""},{"location":"user-guide/models/managing-models/#using-external-tools","title":"Using external tools","text":"<p>ComfyGit is compatible with external file managers:</p> <pre><code># Use any tool to organize\nranger ~/comfygit/workspace/models/\nthunar ~/comfygit/workspace/models/\n# etc.\n\n# Sync after changes\ncg model index sync\n</code></pre>"},{"location":"user-guide/models/managing-models/#scripting-model-operations","title":"Scripting model operations","text":"<p>Automate model management:</p> <pre><code>#!/bin/bash\n# Find all LoRAs over 500MB\ncg model index list | \\\n  grep \"Path: loras/\" | \\\n  grep \"Size: [0-9]\\{3,\\} MB\" | \\\n  awk '{print $2}'\n</code></pre>"},{"location":"user-guide/models/managing-models/#monitoring-model-usage","title":"Monitoring model usage","text":"<p>Track which models workflows actually use:</p> <pre><code># Check all workflows\ncg -e my-env workflow list\n\n# Resolve each to see model requirements\ncg -e my-env workflow resolve workflow_name\n</code></pre> <p>Cross-reference with your index to find unused models.</p>"},{"location":"user-guide/models/managing-models/#next-steps","title":"Next steps","text":"<ul> <li> <p> Model Index</p> <p>Deep dive into how indexing works</p> </li> <li> <p> Downloading Models</p> <p>Get models from CivitAI, HuggingFace, and more</p> </li> <li> <p> Adding Sources</p> <p>Register download URLs for sharing environments</p> </li> </ul>"},{"location":"user-guide/models/model-index/","title":"Model Index","text":"<p>Learn how ComfyGit indexes your models for fast lookup, deduplication, and cross-environment sharing.</p>"},{"location":"user-guide/models/model-index/#overview","title":"Overview","text":"<p>ComfyGit maintains a global model index that tracks all models across your workspace:</p> <ul> <li>Fast lookup - Find models by filename or hash in milliseconds</li> <li>Deduplication - Detect duplicate models across directories</li> <li>Cross-environment sharing - One model collection shared by all environments</li> <li>Source tracking - Remember where models came from for re-downloads</li> <li>Automatic categorization - Organize models by type (checkpoints, loras, etc.)</li> </ul>"},{"location":"user-guide/models/model-index/#how-the-index-works","title":"How the index works","text":"<p>The model index is a SQLite database that stores:</p> <ul> <li>Model identity - BLAKE3 hash computed from file sampling (~200ms per file)</li> <li>Locations - Where each model file exists on disk</li> <li>Sources - Download URLs for re-acquiring models</li> <li>Metadata - Size, category, last-seen timestamp</li> </ul> <p>Why sampling instead of full file hashing?</p> <p>ComfyGit uses a smart sampling strategy that reads 3 small chunks (start, middle, end) from each file instead of reading the entire file. This provides:</p> <ul> <li>200ms indexing per file vs 30-60 seconds for full hash</li> <li>Collision detection - Falls back to full hash if duplicates detected</li> <li>Good enough uniqueness - Sufficient for model deduplication</li> </ul> <p>Index location</p> <p>The model index is stored at <code>~/comfygit/workspace/.metadata/models.db</code> and is shared across all environments in your workspace.</p>"},{"location":"user-guide/models/model-index/#setting-your-models-directory","title":"Setting your models directory","text":"<p>ComfyGit needs to know where your models are stored. Set this once per workspace:</p> <pre><code>cg model index dir ~/ComfyUI/models\n</code></pre> <p>What happens:</p> <ol> <li>Validates directory - Checks path exists and is a directory</li> <li>Updates workspace config - Saves directory path to configuration</li> <li>Initial scan - Scans all model files and builds index</li> <li>Updates symlinks - All environment <code>ComfyUI/models/</code> directories now point here</li> </ol> <p>Example output:</p> <pre><code>\ud83d\udcc1 Setting global models directory: /home/user/ComfyUI/models\n\nScanning directory...\n  Scanned 150 files in 30.2s\n  Found 145 models\n  5 duplicates detected\n\n\u2713 Models directory set successfully: /home/user/ComfyUI/models\n  Found 145 models (12.3 GB)\n  Use 'cg model index sync' to rescan when models change\n</code></pre>"},{"location":"user-guide/models/model-index/#using-an-existing-comfyui-models-directory","title":"Using an existing ComfyUI models directory","text":"<p>If you already have models from a ComfyUI installation:</p> <pre><code>cg model index dir ~/ComfyUI/models\n</code></pre> <p>ComfyGit will index all existing models immediately. Your environments can use them right away through symlinks.</p>"},{"location":"user-guide/models/model-index/#starting-with-an-empty-directory","title":"Starting with an empty directory","text":"<p>If you're starting fresh:</p> <pre><code># ComfyGit creates this during init\ncg model index dir ~/comfygit/workspace/models\n</code></pre> <p>Download models later with <code>cg model download</code> - they'll be automatically indexed.</p>"},{"location":"user-guide/models/model-index/#viewing-indexed-models","title":"Viewing indexed models","text":""},{"location":"user-guide/models/model-index/#list-all-models","title":"List all models","text":"<p>See all models in your index:</p> <pre><code>cg model index list\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 All indexed models (145 unique, 150 files):\n\n   sd_xl_base_1.0.safetensors\n   Size: 6.46 GB\n   Hash: a1b2c3d4e5f6...\n   Path: checkpoints/sd_xl_base_1.0.safetensors\n\n   anime_v2.safetensors\n   Size: 4.27 GB\n   Hash: f6e5d4c3b2a1...\n   Path: checkpoints/anime_v2.safetensors\n\n   realistic_vision.safetensors\n   Size: 5.13 GB\n   Hash: 9876543210ab...\n   Path: checkpoints/realistic_vision.safetensors\n\n   perfectEyes_lora.safetensors\n   Size: 144 MB\n   Hash: abcdef123456...\n   Path: loras/perfectEyes_lora.safetensors\n\n   detail_tweaker.safetensors\n   Size: 144 MB\n   Hash: 123456abcdef...\n   Path: loras/detail_tweaker.safetensors\n\n[Page 1 of 29] [n]ext [p]rev [q]uit\n</code></pre> <p>The list is paginated (5 models per page) for easy browsing.</p>"},{"location":"user-guide/models/model-index/#search-for-specific-models","title":"Search for specific models","text":"<p>Find models by filename or hash:</p> <pre><code># Search by filename\ncg model index find \"anime\"\n\n# Search by hash prefix\ncg model index find a1b2c3\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udd0d Found 2 unique model(s) (3 locations) matching 'anime':\n\n   anime_v2.safetensors\n   Size: 4.27 GB\n   Hash: f6e5d4c3b2a1e9876543210abcdef123456789\n   Locations (2):\n     \u2022 /home/user/ComfyUI/models/checkpoints/anime_v2.safetensors\n     \u2022 /home/user/backup/anime_v2.safetensors\n\n   anime_style_lora.safetensors\n   Size: 144 MB\n   Hash: 9876543210abcdef123456789abcdef123456789\n   Location: /home/user/ComfyUI/models/loras/anime_style_lora.safetensors\n\n[Page 1 of 1]\n</code></pre> <p>Hash searches are exact</p> <p>Hash searches match from the beginning of the hash. <code>a1b2</code> matches <code>a1b2c3d4...</code> but not <code>xyz1a1b2...</code>.</p>"},{"location":"user-guide/models/model-index/#view-detailed-model-information","title":"View detailed model information","text":"<p>Get complete details about a specific model:</p> <pre><code># By hash prefix\ncg model index show a1b2c3\n\n# By exact filename\ncg model index show sd_xl_base_1.0.safetensors\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 Model Details: sd_xl_base_1.0.safetensors\n\n  Hash:           a1b2c3d4e5f67890abcdef1234567890abcdef12\n  Blake3:         a1b2c3d4e5f67890abcdef1234567890abcdef12\n  SHA256:         Not computed\n  Size:           6.46 GB\n  Category:       checkpoints\n  Last Seen:      2025-01-15 14:32:18\n\n  Locations (2):\n    \u2022 /home/user/ComfyUI/models/checkpoints/sd_xl_base_1.0.safetensors\n      Modified: 2025-01-10 09:15:43\n    \u2022 /mnt/backup/models/checkpoints/sd_xl_base_1.0.safetensors\n      Modified: 2025-01-10 09:20:12\n\n  Sources (2):\n    \u2022 HuggingFace\n      URL: https://huggingface.co/stabilityai/stable-diffusion-xl-base-1.0/resolve/main/sd_xl_base_1.0.safetensors\n      Added: 2025-01-10 09:15:00\n    \u2022 CivitAI\n      URL: https://civitai.com/api/download/models/128078\n      Added: 2025-01-12 16:42:31\n</code></pre> <p>Understanding the output:</p> <ul> <li>Hash - Short hash (42 chars) for display and searches</li> <li>Blake3 - Full BLAKE3 hash from sampling</li> <li>SHA256 - Full file hash (only computed if collision detected)</li> <li>Locations - All places this file exists with modification times</li> <li>Sources - Download URLs registered for this model</li> </ul>"},{"location":"user-guide/models/model-index/#syncing-the-index","title":"Syncing the index","text":"<p>When you add, remove, or move model files manually, update the index:</p> <pre><code>cg model index sync\n</code></pre> <p>What happens:</p> <ol> <li>Scans directory - Walks through entire models directory</li> <li>Computes hashes - Samples new files for BLAKE3 hashes</li> <li>Updates database - Adds new models, removes deleted ones</li> <li>Reports changes - Shows what was added, removed, or moved</li> </ol> <p>Example output:</p> <pre><code>\ud83d\udcc1 Syncing models directory: /home/user/ComfyUI/models\n\nScanning directory...\n  Scanned 152 files in 28.4s\n  Found 3 new models\n  Removed 1 deleted model\n  147 models unchanged\n\n\u2713 Sync complete\n  Total models: 148 unique, 152 files\n  Total size: 124.7 GB\n</code></pre>"},{"location":"user-guide/models/model-index/#when-to-sync","title":"When to sync","text":"<p>Run <code>cg model index sync</code> when you:</p> <ul> <li>Download models directly from web browsers</li> <li>Copy models from other machines</li> <li>Manually delete or move model files</li> <li>Import models from other ComfyUI installations</li> <li>Notice models missing from workflows</li> </ul> <p>Automatic syncing</p> <p>ComfyGit automatically indexes models when you use <code>cg model download</code>. Manual syncing is only needed for files added outside ComfyGit.</p>"},{"location":"user-guide/models/model-index/#index-status-and-health","title":"Index status and health","text":"<p>Check your index statistics:</p> <pre><code>cg model index status\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udcca Model Index Status:\n\n   Models Directory: \u2713 /home/user/ComfyUI/models\n   Total Models: 148 unique models\n   Total Files: 152 files indexed\n   Duplicates: 4 duplicate files detected\n</code></pre> <p>Understanding duplicates:</p> <p>If total files &gt; unique models, you have duplicates (same file in multiple locations). This is normal if you:</p> <ul> <li>Keep backups in multiple directories</li> <li>Have the same model in different category folders</li> <li>Migrated from another ComfyUI installation</li> </ul> <p>Duplicates are harmless but waste disk space.</p>"},{"location":"user-guide/models/model-index/#model-categories","title":"Model categories","text":"<p>ComfyGit automatically categorizes models based on their directory path:</p> Category Directory Examples checkpoints checkpoints/ Base models (SD 1.5, SDXL, Flux) loras loras/ LoRA adapters for style/character vae vae/ Variational Auto-Encoders controlnet controlnet/ ControlNet models clip_vision clip_vision/ CLIP vision encoders embeddings embeddings/ Textual inversions upscale_models upscale_models/ ESRGAN, RealESRGAN upscalers style_models style_models/ Style transfer models unet unet/ Custom UNet models clip clip/ CLIP text encoders text_encoders text_encoders/ T5, CLIP text encoders configs configs/ YAML configuration files <p>Plus 8 more specialized categories for gligen, photomaker, diffusion_models, etc.</p> <p>Category detection:</p> <p>ComfyGit determines category from the relative path:</p> <pre><code>checkpoints/sd_xl_base_1.0.safetensors \u2192 checkpoints\nloras/style/anime_v2.safetensors       \u2192 loras\nvae/sdxl_vae.safetensors               \u2192 vae\n</code></pre> <p>Categories are used for:</p> <ul> <li>Organizing search results</li> <li>Suggesting download paths</li> <li>Setting default model importance in workflows</li> <li>Filtering and queries</li> </ul>"},{"location":"user-guide/models/model-index/#understanding-model-identity","title":"Understanding model identity","text":""},{"location":"user-guide/models/model-index/#hash-based-identity","title":"Hash-based identity","text":"<p>Models are identified by their content hash, not filename:</p> <pre><code># These are the SAME model (same hash):\ncheckpoints/sd_xl_base_1.0.safetensors\nbackup/sdxl_base.safetensors\n</code></pre> <p>ComfyGit tracks them as one model with two locations.</p>"},{"location":"user-guide/models/model-index/#multiple-locations","title":"Multiple locations","text":"<p>A single model can exist in multiple places:</p> <pre><code>cg model index show sd_xl_base_1.0.safetensors\n</code></pre> <pre><code>  Locations (3):\n    \u2022 /home/user/ComfyUI/models/checkpoints/sd_xl_base_1.0.safetensors\n    \u2022 /mnt/backup/models/checkpoints/sd_xl_base_1.0.safetensors\n    \u2022 /mnt/external/ComfyUI_old/models/checkpoints/sdxl_base.safetensors\n</code></pre> <p>All three are tracked as locations of the same model.</p>"},{"location":"user-guide/models/model-index/#short-hash-vs-full-hash","title":"Short hash vs full hash","text":"<ul> <li>Short hash (16 chars) - Used for display: <code>a1b2c3d4e5f67890</code></li> <li>Full hash (42 chars) - Used internally: <code>a1b2c3d4e5f67890abcdef1234567890abcdef12</code></li> </ul> <p>Search accepts either:</p> <pre><code>cg model index find a1b2      # Matches short hash prefix\ncg model index find a1b2c3d4  # More specific short hash\n</code></pre>"},{"location":"user-guide/models/model-index/#changing-models-directory","title":"Changing models directory","text":"<p>Switch to a different models directory:</p> <pre><code>cg model index dir /mnt/external/models\n</code></pre> <p>What happens:</p> <ol> <li>Clears old index - Removes entries for old directory</li> <li>Scans new directory - Indexes all models in new location</li> <li>Updates symlinks - All environment <code>models/</code> directories point to new location</li> <li>Preserves sources - Download URLs are NOT lost when switching directories</li> </ol> <p>Environments will use new directory</p> <p>All environments immediately use the new models directory. Make sure it contains the models your workflows need, or re-download them.</p>"},{"location":"user-guide/models/model-index/#switching-back","title":"Switching back","text":"<p>You can switch back to the previous directory anytime:</p> <pre><code>cg model index dir ~/ComfyUI/models\n</code></pre> <p>Model metadata (sources, download intents) is preserved in the database, so switching is safe.</p>"},{"location":"user-guide/models/model-index/#common-patterns","title":"Common patterns","text":""},{"location":"user-guide/models/model-index/#finding-duplicates","title":"Finding duplicates","text":"<p>List all duplicates to save disk space:</p> <pre><code>cg model index list --duplicates\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 Duplicate models (12 models, 28 files):\n\n   sd_xl_base_1.0.safetensors\n   Size: 6.46 GB\n   Hash: a1b2c3d4e5f6...\n   Locations (3):\n     \u2022 /home/user/ComfyUI/models/checkpoints/sd_xl_base_1.0.safetensors\n     \u2022 /home/user/backup/models/checkpoints/sd_xl_base_1.0.safetensors\n     \u2022 /mnt/external/models/sdxl_base.safetensors\n</code></pre> <p>Models with multiple locations are duplicates. The <code>--duplicates</code> flag filters the list to show only models that exist in more than one location.</p> <p>Find specific duplicate patterns:</p> <pre><code># Find triplicates or more\ncg model index list --duplicates | grep \"Locations ([3-9]\"\n\n# Search for anime model duplicates\ncg model index list --duplicates | grep -i \"anime\"\n</code></pre>"},{"location":"user-guide/models/model-index/#checking-model-availability","title":"Checking model availability","text":"<p>Verify a workflow's model exists:</p> <pre><code>cg model index find \"sd_xl_base_1.0.safetensors\"\n</code></pre> <p>If no results, the model is not indexed (missing or not scanned yet).</p>"},{"location":"user-guide/models/model-index/#indexing-a-new-models-directory","title":"Indexing a new models directory","text":"<p>After copying models from another machine:</p> <pre><code>cg model index dir /path/to/copied/models\n</code></pre> <p>ComfyGit will index everything in one scan.</p>"},{"location":"user-guide/models/model-index/#verifying-index-is-up-to-date","title":"Verifying index is up to date","text":"<p>Check when the index was last synced:</p> <pre><code>cg model index status\n</code></pre> <p>If you've added models since the last sync:</p> <pre><code>cg model index sync\n</code></pre>"},{"location":"user-guide/models/model-index/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/models/model-index/#models-not-showing-up","title":"Models not showing up","text":"<p>Problem: Downloaded a model but it's not in the index</p> <p>Solutions:</p> <pre><code># Verify models directory is set\ncg model index status\n\n# Run a manual sync\ncg model index sync\n\n# Check if file is in the directory\nls ~/ComfyUI/models/checkpoints/\n</code></pre>"},{"location":"user-guide/models/model-index/#index-shows-deleted-models","title":"Index shows deleted models","text":"<p>Problem: Deleted model files but they still appear in index</p> <p>Solution:</p> <pre><code>cg model index sync\n</code></pre> <p>Sync removes entries for files that no longer exist.</p>"},{"location":"user-guide/models/model-index/#multiple-models-found-matching","title":"\"Multiple models found matching...\"","text":"<p>Problem: Search returns multiple results</p> <p>Solution:</p> <p>Use more specific identifier:</p> <pre><code># Too ambiguous\ncg model index show anime\n\n# More specific - use longer hash\ncg model index show a1b2c3d4e5f6\n\n# Most specific - full hash or exact filename\ncg model index show anime_v2.safetensors\n</code></pre>"},{"location":"user-guide/models/model-index/#models-directory-doesnt-exist","title":"Models directory doesn't exist","text":"<p>Problem: Set directory but path is invalid</p> <pre><code>\u2717 Directory does not exist: /path/to/models\n</code></pre> <p>Solutions:</p> <pre><code># Check path spelling\nls /path/to/models\n\n# Create directory first\nmkdir -p ~/ComfyUI/models\n\n# Then set it\ncg model index dir ~/ComfyUI/models\n</code></pre>"},{"location":"user-guide/models/model-index/#slow-indexing","title":"Slow indexing","text":"<p>Problem: Index scan takes a very long time</p> <p>Cause: Large model collection (&gt;500 files) or slow disk</p> <p>Solutions:</p> <ul> <li>Be patient - first scan is slowest (~200ms per file)</li> <li>Subsequent syncs are faster (only new files scanned)</li> <li>Use SSD instead of HDD for models directory</li> <li>Exclude non-model files from models directory</li> </ul>"},{"location":"user-guide/models/model-index/#no-models-directory-configured","title":"\"No models directory configured\"","text":"<p>Problem: Trying to list/sync without setting directory</p> <pre><code>\u2717 No models directory configured\n   Run 'cg model index dir &lt;path&gt;' to set your models directory\n</code></pre> <p>Solution:</p> <pre><code># Set models directory first\ncg model index dir ~/ComfyUI/models\n\n# Then list/sync works\ncg model index list\n</code></pre>"},{"location":"user-guide/models/model-index/#hash-collision-detected","title":"Hash collision detected","text":"<p>Problem: Two different files have the same sampled hash (extremely rare)</p> <p>ComfyGit automatically:</p> <ol> <li>Computes full file hash for both files</li> <li>Distinguishes them by full hash</li> <li>Logs the collision for debugging</li> </ol> <p>This is handled transparently - no action needed.</p>"},{"location":"user-guide/models/model-index/#next-steps","title":"Next steps","text":"<ul> <li> <p> Downloading Models</p> <p>Download models from CivitAI, HuggingFace, and direct URLs</p> </li> <li> <p> Managing Models</p> <p>Search, organize, and maintain your model collection</p> </li> <li> <p> Adding Sources</p> <p>Register download URLs for re-downloads and sharing</p> </li> </ul>"},{"location":"user-guide/python-dependencies/constraints/","title":"Dependency Constraints","text":"<p>Override and control package versions globally across your environment using UV constraint dependencies.</p>"},{"location":"user-guide/python-dependencies/constraints/#overview","title":"Overview","text":"<p>Constraints are global version restrictions that override what versions UV can choose when resolving dependencies:</p> <ul> <li>Pin specific versions - Lock PyTorch, NumPy, or other critical packages</li> <li>Prevent updates - Keep packages within a major version range</li> <li>Resolve conflicts - Force compatible versions when nodes disagree</li> <li>Establish baselines - Set version requirements before adding nodes</li> </ul> <p>Constraints are stored in <code>[tool.uv.constraint-dependencies]</code> in your <code>.cec/pyproject.toml</code> and apply to all dependencies in the environment.</p> <p>Constraints vs regular dependencies</p> <ul> <li>Regular dependencies (<code>cg py add</code>) - Packages you explicitly need installed</li> <li>Constraints (<code>cg constraint add</code>) - Version restrictions without installation</li> </ul> <p>Constraints don't install packages\u2014they control what versions can be installed by other dependencies.</p>"},{"location":"user-guide/python-dependencies/constraints/#before-you-begin","title":"Before you begin","text":"<p>Make sure you have:</p> <ul> <li>An active environment \u2014 <code>cg use &lt;name&gt;</code> or use <code>-e &lt;name&gt;</code> flag</li> <li>Understanding of version specifiers (<code>==</code>, <code>&gt;=</code>, <code>&lt;</code>, etc.)</li> </ul>"},{"location":"user-guide/python-dependencies/constraints/#understanding-constraints","title":"Understanding constraints","text":""},{"location":"user-guide/python-dependencies/constraints/#what-are-constraints","title":"What are constraints?","text":"<p>Think of constraints as meta-dependencies\u2014they don't install packages themselves, but they restrict what versions UV can choose when resolving other dependencies.</p> <p>Example scenario:</p> <pre><code># Without constraints\ncg node add node-a  # Installs torch==2.0.0\ncg node add node-b  # Error! Requires torch&gt;=2.1.0\n\n# With constraints\ncg constraint add \"torch==2.1.0\"  # Set version requirement\ncg node add node-a  # Uses torch==2.1.0 (constraint overrides node's requirement)\ncg node add node-b  # Uses torch==2.1.0 (satisfied)\n</code></pre> <p>The constraint forces both nodes to use PyTorch 2.1.0, even though <code>node-a</code> requested 2.0.0.</p>"},{"location":"user-guide/python-dependencies/constraints/#how-constraints-work","title":"How constraints work","text":"<p>When UV resolves dependencies:</p> <ol> <li>Reads constraints from <code>[tool.uv.constraint-dependencies]</code></li> <li>Applies restrictions to all package resolution</li> <li>Rejects incompatible versions even if requested by dependencies</li> <li>Succeeds only if all constraints can be satisfied simultaneously</li> </ol> <p>In pyproject.toml:</p> <pre><code>[tool.uv.constraint-dependencies]\ntorch = \"==2.1.0\"\nnumpy = \"&gt;=1.24.0\"\npillow = \"&gt;=9.0.0,&lt;10.0.0\"\n</code></pre> <p>These constraints apply to: - Packages added with <code>cg py add</code> - Dependencies from custom nodes (<code>cg node add</code>) - Transitive dependencies (dependencies of dependencies)</p>"},{"location":"user-guide/python-dependencies/constraints/#adding-constraints","title":"Adding constraints","text":"<p>Add version restrictions to your environment:</p> <pre><code>cg constraint add \"torch==2.1.0\"\n</code></pre> <p>What happens:</p> <ol> <li>Updates pyproject.toml - Adds to <code>[tool.uv.constraint-dependencies]</code></li> <li>No immediate installation - Constraints don't install packages</li> <li>Applied on next resolution - Takes effect when you add/update packages</li> </ol> <p>Example output:</p> <pre><code>\ud83d\udce6 Adding constraints: torch==2.1.0\n\n\u2713 Added 1 constraint(s) to pyproject.toml\n\nRun 'cg -e my-env constraint list' to view all constraints\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#adding-multiple-constraints","title":"Adding multiple constraints","text":"<p>Add several constraints at once:</p> <pre><code>cg constraint add \"torch==2.1.0\" \"numpy&gt;=1.24.0\" \"pillow&lt;10.0\"\n</code></pre> <p>All constraints are added together.</p>"},{"location":"user-guide/python-dependencies/constraints/#common-constraint-patterns","title":"Common constraint patterns","text":""},{"location":"user-guide/python-dependencies/constraints/#pin-to-exact-version","title":"Pin to exact version","text":"<p>Lock a package to a specific version:</p> <pre><code>cg constraint add \"torch==2.1.0\"\n</code></pre> <p>Result: <code>torch = \"==2.1.0\"</code></p> <p>Use when: You need reproducibility or a specific feature version.</p>"},{"location":"user-guide/python-dependencies/constraints/#minimum-version-requirement","title":"Minimum version requirement","text":"<p>Ensure at least a certain version:</p> <pre><code>cg constraint add \"numpy&gt;=1.24.0\"\n</code></pre> <p>Result: <code>numpy = \"&gt;=1.24.0\"</code></p> <p>Use when: You need modern features or bug fixes.</p>"},{"location":"user-guide/python-dependencies/constraints/#major-version-cap","title":"Major version cap","text":"<p>Allow minor/patch updates but prevent major version changes:</p> <pre><code>cg constraint add \"pillow&gt;=9.0.0,&lt;10.0.0\"\n</code></pre> <p>Result: <code>pillow = \"&gt;=9.0.0,&lt;10.0.0\"</code></p> <p>Use when: You want updates but need API stability.</p>"},{"location":"user-guide/python-dependencies/constraints/#minor-version-cap","title":"Minor version cap","text":"<p>Lock to a specific minor version series:</p> <pre><code>cg constraint add \"transformers&gt;=4.30.0,&lt;4.31.0\"\n</code></pre> <p>Result: <code>transformers = \"&gt;=4.30.0,&lt;4.31.0\"</code></p> <p>Use when: You need patch updates but want to avoid feature changes.</p>"},{"location":"user-guide/python-dependencies/constraints/#pytorch-with-cuda-version","title":"PyTorch with CUDA version","text":"<p>Pin PyTorch to a specific CUDA build:</p> <pre><code>cg constraint add \"torch==2.1.0+cu121\"\n</code></pre> <p>Result: <code>torch = \"==2.1.0+cu121\"</code></p> <p>Use when: You need a specific CUDA version for GPU compatibility.</p> <p>Quoting version specifiers</p> <p>Always quote constraints with special characters: <pre><code>cg constraint add \"numpy&gt;=1.24\"  # \u2713 Correct\ncg constraint add numpy&gt;=1.24    # \u2717 Shell interprets &gt;\n</code></pre></p>"},{"location":"user-guide/python-dependencies/constraints/#updating-existing-constraints","title":"Updating existing constraints","text":"<p>Adding a constraint for an existing package updates it:</p> <pre><code># First time\ncg constraint add \"torch==2.0.0\"\n\n# Update to newer version\ncg constraint add \"torch==2.1.0\"\n</code></pre> <p>The second command replaces the first constraint. No duplicates are created.</p>"},{"location":"user-guide/python-dependencies/constraints/#listing-constraints","title":"Listing constraints","text":"<p>View all active constraints in your environment:</p> <pre><code>cg constraint list\n</code></pre> <p>Example output:</p> <pre><code>Constraint dependencies in 'my-project':\n  \u2022 torch==2.1.0+cu121\n  \u2022 numpy&gt;=1.24.0\n  \u2022 pillow&gt;=9.0.0,&lt;10.0.0\n  \u2022 opencv-python&gt;=4.8.0\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#when-no-constraints-exist","title":"When no constraints exist","text":"<pre><code>cg constraint list\n</code></pre> <p>Output:</p> <pre><code>No constraint dependencies configured\n</code></pre> <p>This is normal\u2014most environments start without constraints and add them as needed.</p>"},{"location":"user-guide/python-dependencies/constraints/#removing-constraints","title":"Removing constraints","text":"<p>Remove version restrictions you no longer need:</p> <pre><code>cg constraint remove torch\n</code></pre> <p>What happens:</p> <ol> <li>Removes from pyproject.toml - Deletes from <code>[tool.uv.constraint-dependencies]</code></li> <li>Package stays installed - Doesn't uninstall the package</li> <li>Next resolution is unconstrained - Future updates can choose any version</li> </ol> <p>Example output:</p> <pre><code>\ud83d\uddd1 Removing constraints: torch\n\n\u2713 Removed 1 constraint(s) from pyproject.toml\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#removing-multiple-constraints","title":"Removing multiple constraints","text":"<p>Remove several constraints at once:</p> <pre><code>cg constraint remove torch numpy pillow\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#removing-non-existent-constraints","title":"Removing non-existent constraints","text":"<p>ComfyGit safely handles constraints that don't exist:</p> <pre><code>cg constraint remove nonexistent\n</code></pre> <p>Output:</p> <pre><code>\ud83d\uddd1 Removing constraints: nonexistent\n   Warning: constraint 'nonexistent' not found\n\n\u2713 Removed 0 constraint(s) from pyproject.toml\n</code></pre> <p>No error\u2014the operation is idempotent.</p>"},{"location":"user-guide/python-dependencies/constraints/#common-use-cases","title":"Common use cases","text":""},{"location":"user-guide/python-dependencies/constraints/#resolving-node-conflicts","title":"Resolving node conflicts","text":"<p>Two nodes require incompatible package versions:</p> <pre><code># Check what's conflicting\ncg node add node-b\n\n# uv shows the conflict in its native output format\n\n# Add constraint to force compatible version\ncg constraint add \"torch==2.1.0\"\n\n# Now both nodes can install\ncg node add node-b --yes\n</code></pre> <p>See Resolving Node Conflicts for detailed conflict resolution strategies.</p>"},{"location":"user-guide/python-dependencies/constraints/#establishing-a-compatibility-baseline","title":"Establishing a compatibility baseline","text":"<p>Set constraints before adding nodes to prevent conflicts:</p> <pre><code># Set your environment's foundation\ncg constraint add \"torch==2.1.0+cu121\"\ncg constraint add \"numpy&gt;=1.24.0,&lt;2.0.0\"\ncg constraint add \"pillow&gt;=9.0.0,&lt;10.0.0\"\n\n# Now add nodes\u2014they'll all use compatible versions\ncg node add comfyui-impact-pack\ncg node add comfyui-controlnet-aux\ncg node add comfyui-animatediff\n</code></pre> <p>This prevents conflicts by establishing version requirements upfront.</p>"},{"location":"user-guide/python-dependencies/constraints/#locking-pytorch-backend","title":"Locking PyTorch backend","text":"<p>Pin PyTorch to a specific CUDA version for your GPU:</p> <pre><code># CUDA 12.1\ncg constraint add \"torch==2.1.0+cu121\"\ncg constraint add \"torchvision==0.16.0+cu121\"\ncg constraint add \"torchaudio==2.1.0+cu121\"\n\n# Or CUDA 11.8\ncg constraint add \"torch==2.1.0+cu118\"\ncg constraint add \"torchvision==0.16.0+cu118\"\ncg constraint add \"torchaudio==2.1.0+cu118\"\n\n# Or CPU-only\ncg constraint add \"torch==2.1.0+cpu\"\ncg constraint add \"torchvision==0.16.0+cpu\"\ncg constraint add \"torchaudio==2.1.0+cpu\"\n</code></pre> <p>Ensures all nodes use the same PyTorch backend.</p>"},{"location":"user-guide/python-dependencies/constraints/#preventing-unwanted-upgrades","title":"Preventing unwanted upgrades","text":"<p>Keep packages stable while allowing patch updates:</p> <pre><code># Lock to transformers 4.30.x\ncg constraint add \"transformers&gt;=4.30.0,&lt;4.31.0\"\n\n# Lock to diffusers 0.21.x\ncg constraint add \"diffusers&gt;=0.21.0,&lt;0.22.0\"\n</code></pre> <p>Useful when newer versions have breaking changes or regressions.</p>"},{"location":"user-guide/python-dependencies/constraints/#forcing-modern-package-versions","title":"Forcing modern package versions","text":"<p>Ensure all dependencies use recent versions:</p> <pre><code># Require Python 3.10+ features\ncg constraint add \"numpy&gt;=1.24.0\"\ncg constraint add \"scipy&gt;=1.11.0\"\ncg constraint add \"pillow&gt;=10.0.0\"\n</code></pre> <p>Prevents nodes from dragging in old dependencies.</p>"},{"location":"user-guide/python-dependencies/constraints/#working-with-local-package-indexes","title":"Working with local package indexes","text":"<p>Combine with custom indexes for air-gapped environments:</p> <pre><code># Add constraint for package from custom index\ncg constraint add \"internal-package&gt;=1.0.0\"\n\n# The constraint applies when installing from custom index\ncg py add internal-package\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#advanced-patterns","title":"Advanced patterns","text":""},{"location":"user-guide/python-dependencies/constraints/#constraints-from-file","title":"Constraints from file","text":"<p>Create a constraints file for reusable baselines:</p> <p>constraints.txt:</p> <pre><code>torch==2.1.0+cu121\ntorchvision==0.16.0+cu121\ntorchaudio==2.1.0+cu121\nnumpy&gt;=1.24.0,&lt;2.0.0\npillow&gt;=9.0.0,&lt;10.0.0\nopencv-python&gt;=4.8.0\ntransformers&gt;=4.30.0,&lt;5.0.0\ndiffusers&gt;=0.21.0,&lt;1.0.0\n</code></pre> <p>Apply all constraints:</p> <pre><code># Read file and add each constraint\nwhile IFS= read -r constraint; do\n  [[ \"$constraint\" =~ ^#.*$ || -z \"$constraint\" ]] &amp;&amp; continue\n  cg constraint add \"$constraint\"\ndone &lt; constraints.txt\n</code></pre> <p>Or add manually:</p> <pre><code>cg constraint add \\\n  \"torch==2.1.0+cu121\" \\\n  \"numpy&gt;=1.24.0,&lt;2.0.0\" \\\n  \"pillow&gt;=9.0.0,&lt;10.0.0\"\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#environment-specific-constraints","title":"Environment-specific constraints","text":"<p>Different environments with different GPU capabilities:</p> <pre><code># Development machine (CUDA 12.1)\ncg -e dev-env constraint add \"torch==2.1.0+cu121\"\n\n# Production server (CUDA 11.8)\ncg -e prod-env constraint add \"torch==2.1.0+cu118\"\n\n# CPU-only testing\ncg -e test-env constraint add \"torch==2.1.0+cpu\"\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#temporary-constraints-for-testing","title":"Temporary constraints for testing","text":"<p>Test if a version works before committing:</p> <pre><code># Add constraint\ncg constraint add \"experimental-pkg==0.1.0-beta\"\n\n# Test installation\ncg node add test-node\n\n# If it doesn't work, remove constraint\ncg constraint remove experimental-pkg\n\n# Try different version\ncg constraint add \"experimental-pkg==0.0.9\"\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#constraints-with-node-installation","title":"Constraints with node installation","text":"<p>Apply constraint only for specific node installation:</p> <pre><code># Add constraint before node\ncg constraint add \"torch&gt;=2.1.0\"\ncg node add cuda-heavy-node\n\n# Remove constraint after (if not needed globally)\ncg constraint remove torch\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/python-dependencies/constraints/#constraint-blocks-all-installations","title":"Constraint blocks all installations","text":"<p>Error:</p> <pre><code>\u2717 Failed to add node\n   No version of 'torch' satisfies constraint torch==2.0.0\n   and requirement torch&gt;=2.1.0 (from node-b)\n</code></pre> <p>Cause: Constraint is too restrictive for a dependency.</p> <p>Solution:</p> <ol> <li> <p>Check constraint: <pre><code>cg constraint list\n</code></pre></p> </li> <li> <p>Remove or relax constraint: <pre><code>cg constraint remove torch\n# Or relax to range:\ncg constraint add \"torch&gt;=2.0.0,&lt;3.0.0\"\n</code></pre></p> </li> <li> <p>Retry installation: <pre><code>cg node add node-b\n</code></pre></p> </li> </ol>"},{"location":"user-guide/python-dependencies/constraints/#package-still-uses-old-version","title":"Package still uses old version","text":"<p>Scenario: You added a constraint but package version didn't change.</p> <p>Cause: Constraints don't trigger reinstallation\u2014they only affect future resolutions.</p> <p>Solution:</p> <p>Force re-resolution with repair:</p> <pre><code># View current state\ncg status\n\n# Apply constraints by syncing environment\ncg repair --yes\n</code></pre> <p>This will sync packages to satisfy the new constraints.</p>"},{"location":"user-guide/python-dependencies/constraints/#conflicting-constraints","title":"Conflicting constraints","text":"<p>Error:</p> <pre><code>\u2717 Failed to resolve dependencies\n   torch==2.0.0 conflicts with torch==2.1.0\n</code></pre> <p>Cause: You have multiple constraints for the same package with incompatible versions.</p> <p>Solution:</p> <ol> <li> <p>List constraints: <pre><code>cg constraint list\n</code></pre></p> </li> <li> <p>Identify duplicates or conflicts (shouldn't happen normally, but check)</p> </li> <li> <p>Remove and re-add with correct version: <pre><code>cg constraint remove torch\ncg constraint add \"torch==2.1.0\"\n</code></pre></p> </li> </ol>"},{"location":"user-guide/python-dependencies/constraints/#constraint-not-taking-effect","title":"Constraint not taking effect","text":"<p>Scenario: Added constraint but node still installs different version.</p> <p>Cause: Constraint syntax might be incorrect or package name mismatch.</p> <p>Solution:</p> <ol> <li> <p>Verify constraint was added: <pre><code>cg constraint list\n</code></pre></p> </li> <li> <p>Check package name spelling: <pre><code># Wrong:\ncg constraint add \"pytorch==2.1.0\"\n\n# Correct:\ncg constraint add \"torch==2.1.0\"\n</code></pre></p> </li> <li> <p>Check version specifier syntax: <pre><code># Valid:\ncg constraint add \"numpy&gt;=1.24.0\"     # \u2713\ncg constraint add \"pillow&gt;=9.0,&lt;10.0\"  # \u2713\n\n# Invalid:\ncg constraint add \"numpy&gt;1.24\"        # Missing .0\ncg constraint add \"pillow=&gt;9.0\"       # Wrong operator\n</code></pre></p> </li> </ol>"},{"location":"user-guide/python-dependencies/constraints/#repair-fails-after-adding-constraint","title":"Repair fails after adding constraint","text":"<p>Error:</p> <pre><code>\u2717 Failed to repair environment\n   Could not resolve dependencies\n</code></pre> <p>Cause: Constraint is incompatible with existing dependencies.</p> <p>Solution:</p> <ol> <li> <p>Check what's installed: <pre><code>cg py list --all\n</code></pre></p> </li> <li> <p>Remove conflicting constraint: <pre><code>cg constraint remove problematic-package\n</code></pre></p> </li> <li> <p>Try repair again: <pre><code>cg repair --yes\n</code></pre></p> </li> <li> <p>If still fails, check node conflicts: <pre><code>cg status\n</code></pre></p> </li> </ol> <p>See Node Conflicts for detailed resolution steps.</p>"},{"location":"user-guide/python-dependencies/constraints/#how-it-works","title":"How it works","text":""},{"location":"user-guide/python-dependencies/constraints/#behind-the-scenes","title":"Behind the scenes","text":"<p>When you run <code>cg constraint add</code>:</p> <ol> <li>Reads pyproject.toml - Loads current configuration</li> <li>Updates or adds constraint - Modifies <code>[tool.uv.constraint-dependencies]</code></li> <li>Writes to disk - Saves changes to <code>.cec/pyproject.toml</code></li> <li>Tracks in git - Changes ready to commit</li> </ol> <p>Example pyproject.toml:</p> <pre><code>[tool.uv.constraint-dependencies]\ntorch = \"==2.1.0+cu121\"\nnumpy = \"&gt;=1.24.0,&lt;2.0.0\"\npillow = \"&gt;=9.0.0,&lt;10.0.0\"\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#constraints-vs-dependencies","title":"Constraints vs dependencies","text":"<p>Dependencies (<code>[project.dependencies]</code>): - Install packages in your environment - Show up in <code>cg py list</code> - Required for your code to run - Added with <code>cg py add</code></p> <p>Constraints (<code>[tool.uv.constraint-dependencies]</code>): - Restrict versions during resolution - Don't install anything themselves - Applied to all dependencies - Added with <code>cg constraint add</code></p> <p>Example showing both:</p> <pre><code>[project.dependencies]\n# These packages ARE installed\nrequests = \"&gt;=2.28.0\"\n\n[tool.uv.constraint-dependencies]\n# These are version restrictions applied during resolution\nurllib3 = \"&gt;=1.26.0,&lt;2.0.0\"  # Constrains requests' dependency\n</code></pre> <p>Even though you didn't explicitly add <code>urllib3</code> as a dependency, the constraint affects what version <code>requests</code> can use for its <code>urllib3</code> dependency.</p>"},{"location":"user-guide/python-dependencies/constraints/#uv-resolution-with-constraints","title":"UV resolution with constraints","text":"<p>UV's resolution algorithm:</p> <ol> <li>Collects requirements from:</li> <li><code>[project.dependencies]</code></li> <li>Node groups (<code>[project.optional-dependencies]</code>)</li> <li> <p>Transitive dependencies</p> </li> <li> <p>Applies constraints from <code>[tool.uv.constraint-dependencies]</code></p> </li> <li> <p>Finds compatible versions that satisfy all requirements + constraints</p> </li> <li> <p>Fails if impossible to satisfy everything simultaneously</p> </li> </ol> <p>Example:</p> <pre><code>[project.dependencies]\nnode-a-dep = \"*\"  # Wants torch&gt;=2.0.0\n\n[project.optional-dependencies]\n\"node/node-b\" = [\"torch&gt;=2.1.0\"]\n\n[tool.uv.constraint-dependencies]\ntorch = \"==2.1.0\"\n</code></pre> <p>Resolution: - <code>node-a-dep</code> wants <code>torch&gt;=2.0.0</code> \u2192 <code>2.1.0</code> satisfies - <code>node-b</code> wants <code>torch&gt;=2.1.0</code> \u2192 <code>2.1.0</code> satisfies - Constraint forces <code>torch==2.1.0</code> \u2192 Final version: <code>2.1.0</code> \u2713</p>"},{"location":"user-guide/python-dependencies/constraints/#relationship-to-repair","title":"Relationship to repair","text":"<p>The <code>cg repair</code> command re-syncs your environment to match <code>pyproject.toml</code>:</p> <pre><code># Add constraint\ncg constraint add \"torch==2.1.0\"\n\n# Constraint is in pyproject.toml but not applied yet\n\n# Apply constraint by repairing\ncg repair --yes\n</code></pre> <p>This triggers UV to re-resolve with the new constraint and install the correct versions.</p>"},{"location":"user-guide/python-dependencies/constraints/#best-practices","title":"Best practices","text":""},{"location":"user-guide/python-dependencies/constraints/#start-broad-narrow-as-needed","title":"Start broad, narrow as needed","text":"<p>Begin with minimal constraints:</p> <pre><code># Start with no constraints\ncg node add node-a node-b node-c\n\n# Only add constraints when conflicts arise\n# (ComfyGit will tell you if there's a conflict)\n</code></pre> <p>Add constraints reactively rather than preemptively.</p>"},{"location":"user-guide/python-dependencies/constraints/#use-version-ranges-over-exact-pins","title":"Use version ranges over exact pins","text":"<p>Prefer ranges for flexibility:</p> <pre><code># More flexible (allows patch updates)\ncg constraint add \"numpy&gt;=1.24.0,&lt;2.0.0\"\n\n# Less flexible (locked to exact version)\ncg constraint add \"numpy==1.24.3\"\n</code></pre> <p>Use exact pins only when necessary (PyTorch CUDA versions, known bugs).</p>"},{"location":"user-guide/python-dependencies/constraints/#document-your-constraints","title":"Document your constraints","text":"<p>Add comments to your pyproject.toml explaining why:</p> <pre><code>[tool.uv.constraint-dependencies]\n# Pin PyTorch for CUDA 12.1 compatibility with RTX 4090\ntorch = \"==2.1.0+cu121\"\n\n# Prevent numpy 2.0 due to breaking changes in node-x\nnumpy = \"&gt;=1.24.0,&lt;2.0.0\"\n\n# Lock pillow to v9 due to regression in v10 loading certain formats\npillow = \"&gt;=9.5.0,&lt;10.0.0\"\n</code></pre> <p>Helps future you understand the reasoning.</p>"},{"location":"user-guide/python-dependencies/constraints/#keep-constraints-in-version-control","title":"Keep constraints in version control","text":"<p>Commit constraint changes with descriptive messages:</p> <pre><code># Add constraint\ncg constraint add \"torch==2.1.0+cu121\"\n\n# Commit with context\ncg commit -m \"Pin PyTorch to 2.1.0+cu121 for CUDA 12.1 support\"\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#review-constraints-periodically","title":"Review constraints periodically","text":"<p>Constraints can become outdated:</p> <pre><code># List all constraints\ncg constraint list\n\n# Remove ones that are no longer needed\ncg constraint remove old-package\n\n# Update versions to more recent ranges\ncg constraint add \"numpy&gt;=1.26.0,&lt;2.0.0\"\n</code></pre>"},{"location":"user-guide/python-dependencies/constraints/#test-after-changing-constraints","title":"Test after changing constraints","text":"<p>Verify environment still works:</p> <pre><code># Change constraint\ncg constraint add \"torch==2.2.0\"\n\n# Apply changes\ncg repair --yes\n\n# Test ComfyUI starts\ncg run\n</code></pre> <p>Catch issues early before committing.</p>"},{"location":"user-guide/python-dependencies/constraints/#next-steps","title":"Next steps","text":"<ul> <li>Py Commands - Manage Python dependencies</li> <li>Node Conflicts - Resolve conflicts between custom nodes</li> <li>Version Control - Commit and track constraint changes</li> <li>Environment Repair - Apply constraints with repair</li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/","title":"Managing Python Dependencies","text":"<p>Add, remove, and manage Python packages in your ComfyUI environment using UV-powered dependency management.</p>"},{"location":"user-guide/python-dependencies/py-commands/#overview","title":"Overview","text":"<p>The <code>py</code> commands give you direct control over Python packages in your environment:</p> <ul> <li>py add - Install Python packages (requests, numpy, pillow, etc.)</li> <li>py remove - Uninstall packages you no longer need</li> <li>py list - View installed dependencies</li> <li>py uv - Direct UV access for advanced operations</li> </ul> <p>All changes are tracked in <code>.cec/pyproject.toml</code> and committed with your environment for reproducibility.</p> <p>Python packages vs custom nodes</p> <ul> <li><code>cg py add</code> - For general Python libraries (requests, opencv-python, numpy)</li> <li><code>cg node add</code> - For ComfyUI custom nodes (automatically installs their Python dependencies)</li> </ul> <p>Most of the time you'll use <code>node add</code>. Use <code>py add</code> when you need Python packages that aren't part of a custom node.</p>"},{"location":"user-guide/python-dependencies/py-commands/#before-you-begin","title":"Before you begin","text":"<p>Make sure you have:</p> <ul> <li>An active environment \u2014 <code>cg use &lt;name&gt;</code> or use <code>-e &lt;name&gt;</code> flag</li> <li>Internet connection for downloading packages from PyPI</li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/#adding-packages","title":"Adding packages","text":"<p>Add Python packages to your environment:</p> <pre><code>cg py add requests\n</code></pre> <p>What happens:</p> <ol> <li>UV resolution - Checks if package exists and resolves dependencies</li> <li>Updates pyproject.toml - Adds to <code>[project.dependencies]</code></li> <li>Installs package - Downloads and installs in environment's <code>.venv</code></li> <li>Tracks in git - Changes are ready to commit</li> </ol> <p>Example output:</p> <pre><code>\ud83d\udce6 Adding 1 package(s)...\n\n\u2713 Added 1 package(s) to dependencies\n\nRun 'cg -e my-env status' to review changes\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#adding-multiple-packages","title":"Adding multiple packages","text":"<p>Add several packages at once:</p> <pre><code>cg py add requests pillow tqdm\n</code></pre> <p>All packages are resolved together, ensuring compatibility.</p>"},{"location":"user-guide/python-dependencies/py-commands/#adding-with-version-constraints","title":"Adding with version constraints","text":"<p>Specify version requirements:</p> <pre><code># Minimum version\ncg py add \"numpy&gt;=1.24.0\"\n\n# Version range\ncg py add \"torch&gt;=2.0.0,&lt;2.5.0\"\n\n# Exact version\ncg py add \"pillow==10.0.0\"\n</code></pre> <p>Quote version constraints</p> <p>Always quote package specifications with special characters (&gt;,&lt;,=) to prevent shell interpretation: <pre><code>cg py add \"numpy&gt;=1.24\"  # \u2713 Correct\ncg py add numpy&gt;=1.24    # \u2717 Shell error\n</code></pre></p>"},{"location":"user-guide/python-dependencies/py-commands/#adding-from-requirementstxt","title":"Adding from requirements.txt","text":"<p>Install packages from a requirements file:</p> <pre><code>cg py add -r requirements.txt\n</code></pre> <p>Example requirements.txt:</p> <pre><code>requests&gt;=2.28.0\npillow&gt;=10.0.0\ntqdm&gt;=4.65.0\nnumpy&gt;=1.24.0,&lt;2.0.0\n</code></pre> <p>What happens:</p> <ul> <li>Reads all packages from the file</li> <li>Adds them to <code>[project.dependencies]</code></li> <li>Resolves and installs as a batch</li> </ul> <p>Requirements file location</p> <p>The file path is relative to your current directory, not the environment: <pre><code># If requirements.txt is in current directory\ncg py add -r requirements.txt\n\n# If it's somewhere else\ncg py add -r /path/to/requirements.txt\n</code></pre></p>"},{"location":"user-guide/python-dependencies/py-commands/#upgrading-packages","title":"Upgrading packages","text":"<p>Upgrade existing packages to their latest compatible versions:</p> <pre><code>cg py add requests --upgrade\n</code></pre> <p>This updates <code>requests</code> to the latest version that satisfies your constraints.</p> <p>Upgrade from requirements file:</p> <pre><code>cg py add -r requirements.txt --upgrade\n</code></pre> <p>Upgrades all packages listed in the file.</p>"},{"location":"user-guide/python-dependencies/py-commands/#removing-packages","title":"Removing packages","text":"<p>Remove packages you no longer need:</p> <pre><code>cg py remove requests\n</code></pre> <p>What happens:</p> <ol> <li>Removes from pyproject.toml - Deletes from <code>[project.dependencies]</code></li> <li>Uninstalls package - Removes from <code>.venv</code></li> <li>Updates lockfile - Re-resolves remaining dependencies</li> </ol> <p>Example output:</p> <pre><code>\ud83d\uddd1 Removing 1 package(s)...\n\n\u2713 Removed 1 package(s) from dependencies\n\nRun 'cg -e my-env status' to review changes\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#removing-multiple-packages","title":"Removing multiple packages","text":"<p>Remove several packages at once:</p> <pre><code>cg py remove requests pillow tqdm\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#removing-non-existent-packages","title":"Removing non-existent packages","text":"<p>ComfyGit safely handles packages that don't exist:</p> <pre><code>cg py remove nonexistent-package\n</code></pre> <p>Output:</p> <pre><code>\ud83d\uddd1 Removing 1 package(s)...\n\n\u2139\ufe0f  Package 'nonexistent-package' is not in dependencies (already removed or never added)\n</code></pre> <p>No error \u2014 the operation is idempotent.</p>"},{"location":"user-guide/python-dependencies/py-commands/#mixed-removal","title":"Mixed removal","text":"<p>When removing multiple packages where some exist and some don't:</p> <pre><code>cg py remove requests nonexistent pillow\n</code></pre> <p>Output:</p> <pre><code>\ud83d\uddd1 Removing 3 package(s)...\n\n\u2713 Removed 2 package(s) from dependencies\n\n\u2139\ufe0f  Skipped 1 package(s) not in dependencies:\n  \u2022 nonexistent\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#listing-dependencies","title":"Listing dependencies","text":"<p>View all Python packages in your environment:</p> <pre><code>cg py list\n</code></pre> <p>Example output:</p> <pre><code>Dependencies (5):\n  \u2022 requests&gt;=2.28.0\n  \u2022 pillow&gt;=10.0.0\n  \u2022 tqdm&gt;=4.65.0\n  \u2022 numpy&gt;=1.24.0,&lt;2.0.0\n  \u2022 opencv-python&gt;=4.8.0\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#understanding-the-output","title":"Understanding the output","text":"<ul> <li>Shows packages from <code>[project.dependencies]</code> in pyproject.toml</li> <li>Includes version constraints as specified</li> <li>Does not show transitive dependencies (packages installed as dependencies of your packages)</li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/#viewing-all-dependencies","title":"Viewing all dependencies","text":"<p>Include custom node dependency groups:</p> <pre><code>cg py list --all\n</code></pre> <p>Example output:</p> <pre><code>Dependencies (3):\n  \u2022 requests&gt;=2.28.0\n  \u2022 pillow&gt;=10.0.0\n  \u2022 tqdm&gt;=4.65.0\n\nnode/comfyui-impact-pack (4):\n  \u2022 ultralytics&gt;=8.0.0\n  \u2022 onnxruntime&gt;=1.15.0\n  \u2022 opencv-python&gt;=4.8.0\n  \u2022 segment-anything&gt;=1.0\n\nnode/comfyui-controlnet-aux (6):\n  \u2022 mediapipe&gt;=0.10.0\n  \u2022 timm&gt;=0.9.0\n  \u2022 transformers&gt;=4.30.0\n  \u2022 diffusers&gt;=0.21.0\n  \u2022 einops&gt;=0.7.0\n  \u2022 scipy&gt;=1.11.0\n</code></pre> <p>This shows:</p> <ul> <li>Base dependencies - Added with <code>cg py add</code></li> <li>Node groups - Dependencies from each custom node</li> </ul> <p>Node dependencies are isolated</p> <p>Custom nodes get their own dependency groups like <code>node/comfyui-impact-pack</code>. This allows:</p> <ul> <li>Conflict detection - UV reports if two nodes need incompatible versions</li> <li>Clean removal - Removing a node removes its unique dependencies</li> <li>Transparency - See exactly what each node requires</li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/#advanced-usage","title":"Advanced usage","text":""},{"location":"user-guide/python-dependencies/py-commands/#power-user-flags","title":"Power-user flags","text":"<p>ComfyGit exposes advanced UV features for power users:</p>"},{"location":"user-guide/python-dependencies/py-commands/#adding-to-dependency-groups","title":"Adding to dependency groups","text":"<p>Add packages to optional dependency groups:</p> <pre><code>cg py add sageattention --group optional-cuda\n</code></pre> <p>In pyproject.toml:</p> <pre><code>[project.optional-dependencies]\noptional-cuda = [\n    \"sageattention\"\n]\n</code></pre> <p>Use case: Organize packages by feature (cuda-specific, dev tools, optional extras).</p>"},{"location":"user-guide/python-dependencies/py-commands/#adding-development-dependencies","title":"Adding development dependencies","text":"<p>Mark packages as development-only:</p> <pre><code>cg py add pytest black ruff --dev\n</code></pre> <p>In pyproject.toml:</p> <pre><code>[dependency-groups]\ndev = [\n    \"pytest\",\n    \"black\",\n    \"ruff\"\n]\n</code></pre> <p>Use case: Testing, linting, and development tools that aren't needed for production.</p>"},{"location":"user-guide/python-dependencies/py-commands/#editable-installs","title":"Editable installs","text":"<p>Install local packages in development mode:</p> <pre><code>cg py add /path/to/my-package --editable\n</code></pre> <p>This creates a symbolic link, so changes to the package source are immediately available without reinstalling.</p> <p>Use case: Developing a Python package that your custom node depends on.</p>"},{"location":"user-guide/python-dependencies/py-commands/#version-specifier-styles","title":"Version specifier styles","text":"<p>Control how UV writes version constraints:</p> <pre><code># Lower bound only (default)\ncg py add numpy --bounds lower\n# Result: numpy&gt;=1.24.0\n\n# Pin major version\ncg py add numpy --bounds major\n# Result: numpy&gt;=1.24.0,&lt;2.0.0\n\n# Pin minor version\ncg py add numpy --bounds minor\n# Result: numpy&gt;=1.24.0,&lt;1.25.0\n\n# Exact version\ncg py add numpy --bounds exact\n# Result: numpy==1.24.0\n</code></pre> <p>Use case: Control how strict your version constraints are for reproducibility vs flexibility.</p>"},{"location":"user-guide/python-dependencies/py-commands/#direct-uv-access","title":"Direct UV access","text":"<p>For advanced operations not covered by <code>py add/remove/list</code>, use the UV passthrough:</p> <pre><code>cg py uv &lt;uv-command&gt; [args...]\n</code></pre> <p>This runs UV commands with proper environment context (working directory, environment variables).</p> <p>Examples:</p> <pre><code># Lock dependencies without syncing\ncg py uv lock\n\n# Sync from lockfile without updating\ncg py uv sync --frozen\n\n# Add to specific group with UV-specific flags\ncg py uv add --group optional-cuda sageattention --no-sync\n\n# Show UV help\ncg py uv --help\n</code></pre> <p>Advanced users only</p> <p><code>cg py uv</code> gives you direct access to UV. This is powerful but can break things if misused:</p> <ul> <li>No validation - ComfyGit doesn't check your commands</li> <li>Can corrupt state - Incorrect commands can break your environment</li> <li>Exit codes propagated - UV errors will exit with error codes</li> </ul> <p>Use <code>py add/remove/list</code> unless you specifically need UV features.</p>"},{"location":"user-guide/python-dependencies/py-commands/#common-patterns","title":"Common patterns","text":""},{"location":"user-guide/python-dependencies/py-commands/#adding-packages-for-a-workflow","title":"Adding packages for a workflow","text":"<p>You download a workflow that needs specific Python packages:</p> <pre><code># Add packages the workflow needs\ncg py add mediapipe timm transformers\n\n# Verify they're installed\ncg py list\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#setting-up-a-development-environment","title":"Setting up a development environment","text":"<p>You're developing custom nodes and need dev tools:</p> <pre><code># Add dev dependencies\ncg py add pytest black ruff mypy --dev\n\n# View all dependencies including dev\ncg py list --all\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#migrating-from-requirementstxt","title":"Migrating from requirements.txt","text":"<p>You have an existing ComfyUI setup with <code>requirements.txt</code>:</p> <pre><code># Import all packages\ncg py add -r requirements.txt\n\n# Remove old file (now tracked in pyproject.toml)\nrm requirements.txt\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#fixing-version-conflicts","title":"Fixing version conflicts","text":"<p>Two custom nodes conflict on package versions:</p> <pre><code># Check what's installed\ncg py list --all\n\n# See the conflict\n# node/comfyui-foo requires torch&gt;=2.0,&lt;2.1\n# node/comfyui-bar requires torch&gt;=2.1\n\n# Force a specific version with constraints\ncg constraint add \"torch==2.1.0\"\n\n# Repair to apply\ncg repair --yes\n</code></pre> <p>See Constraints for more on dependency constraints.</p>"},{"location":"user-guide/python-dependencies/py-commands/#upgrading-all-packages","title":"Upgrading all packages","text":"<p>Update all packages to latest compatible versions:</p> <pre><code># Export current dependencies\ncg py list &gt; /tmp/deps.txt\n\n# Upgrade all\ncg py add -r /tmp/deps.txt --upgrade\n</code></pre>"},{"location":"user-guide/python-dependencies/py-commands/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/python-dependencies/py-commands/#package-not-found","title":"Package not found","text":"<p>Error:</p> <pre><code>\u2717 Failed to add packages\n   No such package: nonexistent-pkg\n</code></pre> <p>Solution:</p> <ul> <li>Verify package name on PyPI</li> <li>Check for typos (e.g., <code>opencv-python</code> not <code>opencv</code>)</li> <li>Ensure you have internet connection</li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/#dependency-conflict","title":"Dependency conflict","text":"<p>Error:</p> <pre><code>\u2717 Failed to add packages\n   torch==2.0.0 conflicts with torch&gt;=2.1.0 (required by existing-node)\n</code></pre> <p>Solution:</p> <ol> <li> <p>Check which packages require conflicting versions:    <pre><code>cg py list --all | grep torch\n</code></pre></p> </li> <li> <p>Use constraints to force a compatible version:    <pre><code>cg constraint add \"torch==2.1.0\"\n</code></pre></p> </li> <li> <p>Or remove conflicting node:    <pre><code>cg node remove existing-node\n</code></pre></p> </li> </ol> <p>See Resolving Node Conflicts for detailed conflict resolution.</p>"},{"location":"user-guide/python-dependencies/py-commands/#cant-remove-package","title":"Can't remove package","text":"<p>Error:</p> <pre><code>\u2717 Failed to remove packages\n   Package 'numpy' is required by: opencv-python, pillow\n</code></pre> <p>Solution:</p> <p>This means other packages depend on it. You have two options:</p> <ol> <li> <p>Remove dependent packages first: <pre><code>cg py remove opencv-python pillow\ncg py remove numpy\n</code></pre></p> </li> <li> <p>Force removal (not recommended - may break things):    <pre><code>cg py uv remove numpy --no-sync\n</code></pre></p> </li> </ol>"},{"location":"user-guide/python-dependencies/py-commands/#requirements-file-not-found","title":"Requirements file not found","text":"<p>Error:</p> <pre><code>\u2717 Error: Requirements file not found: requirements.txt\n</code></pre> <p>Solution:</p> <ul> <li>Check file path is correct (relative to current directory)</li> <li>Use absolute path if needed:   <pre><code>cg py add -r /absolute/path/to/requirements.txt\n</code></pre></li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/#changes-not-taking-effect","title":"Changes not taking effect","text":"<p>After adding packages, ComfyUI doesn't see them:</p> <p>Solution:</p> <ol> <li> <p>Verify environment is active:    <pre><code>cg list\n</code></pre></p> </li> <li> <p>Check packages are installed:    <pre><code>cg py list\n</code></pre></p> </li> <li> <p>Restart ComfyUI:    <pre><code>cg run\n</code></pre></p> </li> <li> <p>If still broken, repair environment:    <pre><code>cg repair --yes\n</code></pre></p> </li> </ol>"},{"location":"user-guide/python-dependencies/py-commands/#how-it-works","title":"How it works","text":""},{"location":"user-guide/python-dependencies/py-commands/#behind-the-scenes","title":"Behind the scenes","text":"<p>When you run <code>cg py add</code>:</p> <ol> <li>UV resolution - UV checks PyPI, resolves dependencies, detects conflicts</li> <li>Updates pyproject.toml - Adds package to <code>[project.dependencies]</code></li> <li>Updates lockfile - Regenerates <code>uv.lock</code> with exact versions</li> <li>Installs packages - Downloads wheels and installs in <code>.venv</code></li> </ol>"},{"location":"user-guide/python-dependencies/py-commands/#relationship-to-custom-nodes","title":"Relationship to custom nodes","text":"<p>Custom nodes have their own dependency groups:</p> <pre><code>[project.dependencies]\n# Your packages (via cg py add)\nrequests = \"&gt;=2.28.0\"\n\n[project.optional-dependencies]\n# Custom node packages (via cg node add)\n\"node/comfyui-impact-pack\" = [\n    \"ultralytics&gt;=8.0.0\",\n    \"onnxruntime&gt;=1.15.0\"\n]\n</code></pre> <p>When you install a custom node with <code>cg node add</code>, its Python dependencies are automatically added to the node's group. You rarely need to manually manage node dependencies.</p>"},{"location":"user-guide/python-dependencies/py-commands/#version-tracking","title":"Version tracking","text":"<p>All changes are tracked in <code>.cec/</code>:</p> <pre><code># View changes\ncg status\n\n# Commit changes\ncg commit -m \"Added image processing dependencies\"\n\n# Changes now versioned with your environment\n</code></pre> <p>This means your Python dependencies are:</p> <ul> <li>Git-tracked - Full history of changes</li> <li>Reproducible - Others can recreate your environment</li> <li>Shareable - Push to remote, others can pull</li> </ul>"},{"location":"user-guide/python-dependencies/py-commands/#next-steps","title":"Next steps","text":"<ul> <li>Constraints - Override dependency versions with constraints</li> <li>Node Conflicts - Resolve dependency conflicts between nodes</li> <li>Version Control - Commit and track changes over time</li> <li>Export &amp; Import - Share environments with full dependencies</li> </ul>"},{"location":"user-guide/workflows/workflow-model-importance/","title":"Workflow Model Importance","text":"<p>Control which models are required, flexible, or optional for your workflows.</p>"},{"location":"user-guide/workflows/workflow-model-importance/#overview","title":"Overview","text":"<p>ComfyGit lets you mark models in workflows as:</p> <ul> <li>Required - Must be present to run the workflow</li> <li>Flexible - Can substitute with similar models</li> <li>Optional - Nice to have but not critical</li> </ul> <p>This helps when sharing workflows or importing environments on machines with different model collections.</p>"},{"location":"user-guide/workflows/workflow-model-importance/#why-model-importance","title":"Why model importance?","text":"<p>When you share a workflow that uses 10 different models, not everyone may have all of them. By marking models appropriately:</p> <ul> <li>Recipients know what's critical vs. nice-to-have</li> <li>ComfyGit can warn about missing required models</li> <li>Imports can succeed even without optional models</li> <li>Team collaboration improves with clear expectations</li> </ul>"},{"location":"user-guide/workflows/workflow-model-importance/#setting-model-importance","title":"Setting model importance","text":""},{"location":"user-guide/workflows/workflow-model-importance/#interactive-mode-recommended","title":"Interactive mode (recommended)","text":"<pre><code>cg workflow model importance\n</code></pre> <p>Walks you through:</p> <ol> <li>Select workflow - Choose from tracked workflows</li> <li>Select model - Pick model to configure</li> <li>Set importance - Choose required/flexible/optional</li> </ol> <p>Example session:</p> <pre><code>Select workflow:\n  1. portrait-generation.json\n  2. anime-style.json\n  3. sdxl-upscale.json\n\nChoice: 1\n\nModels in portrait-generation.json:\n  1. sd_xl_base_1.0.safetensors (no importance set)\n  2. perfectEyesXL.safetensors (no importance set)\n  3. DetailedEyes.safetensors (no importance set)\n\nSelect model: 1\n\nSet importance for sd_xl_base_1.0.safetensors:\n  1. required\n  2. flexible\n  3. optional\n\nChoice: 1\n\n\u2713 Set sd_xl_base_1.0.safetensors to required\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#non-interactive-mode","title":"Non-interactive mode","text":"<p>Specify everything on the command line:</p> <pre><code>cg workflow model importance portrait-generation sd_xl_base_1.0.safetensors required\n</code></pre> <p>Arguments:</p> <ol> <li>Workflow name (without .json)</li> <li>Model identifier (filename or hash)</li> <li>Importance level (required/flexible/optional)</li> </ol>"},{"location":"user-guide/workflows/workflow-model-importance/#importance-levels-explained","title":"Importance levels explained","text":""},{"location":"user-guide/workflows/workflow-model-importance/#required","title":"Required","text":"<p>Use when:</p> <ul> <li>Workflow won't run without this model</li> <li>Model is core to the workflow's purpose</li> <li>No reasonable substitutes exist</li> </ul> <p>Example: Base SDXL checkpoint for SDXL workflow</p> <pre><code>cg workflow model importance my-workflow sd_xl_base_1.0.safetensors required\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#flexible","title":"Flexible","text":"<p>Use when:</p> <ul> <li>Model can be swapped with alternatives</li> <li>Any checkpoint in the same category works</li> <li>Style/quality varies but workflow still runs</li> </ul> <p>Example: Style LoRA that can be replaced</p> <pre><code>cg workflow model importance my-workflow anime-style-lora.safetensors flexible\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#optional","title":"Optional","text":"<p>Use when:</p> <ul> <li>Model enhances output but isn't necessary</li> <li>Workflow has fallback without it</li> <li>Nice-to-have refinement</li> </ul> <p>Example: Eye detail LoRA for portraits</p> <pre><code>cg workflow model importance my-workflow detail-eyes.safetensors optional\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#viewing-model-importance","title":"Viewing model importance","text":"<p>Use <code>cg status</code> to see workflow model status:</p> <pre><code>cg status\n</code></pre> <p>Output shows models by importance:</p> <pre><code>\ud83d\udccb Workflows:\n  \u26a0\ufe0f  portrait-generation.json (synced)\n      2 models with importance set, 1 missing optional model\n</code></pre> <p>For detailed view:</p> <pre><code>cg workflow resolve portrait-generation.json --auto\n</code></pre> <p>Shows model resolution with importance indicators.</p>"},{"location":"user-guide/workflows/workflow-model-importance/#how-comfygit-uses-importance","title":"How ComfyGit uses importance","text":""},{"location":"user-guide/workflows/workflow-model-importance/#during-cg-commit","title":"During <code>cg commit</code>","text":"<ul> <li>Required models missing \u2192 Commit blocked (unless <code>--allow-issues</code>)</li> <li>Flexible models missing \u2192 Warning shown, commit allowed</li> <li>Optional models missing \u2192 No warning</li> </ul>"},{"location":"user-guide/workflows/workflow-model-importance/#during-cg-import","title":"During <code>cg import</code>","text":"<ul> <li>Required models missing \u2192 Download attempted or error shown</li> <li>Flexible models missing \u2192 Warning, suggests alternatives</li> <li>Optional models missing \u2192 Silently skipped</li> </ul>"},{"location":"user-guide/workflows/workflow-model-importance/#during-cg-repair","title":"During <code>cg repair</code>","text":"<p>With <code>--models</code> flag:</p> <pre><code># Download all models (default)\ncg repair --models all\n\n# Download only required models\ncg repair --models required\n\n# Skip model downloads entirely\ncg repair --models skip\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#during-cg-workflow-resolve","title":"During <code>cg workflow resolve</code>","text":"<p>Shows importance in model resolution output:</p> <pre><code>Models:\n  \u2713 sd_xl_base_1.0.safetensors (required) - found\n  \u26a0\ufe0f  anime-style.safetensors (flexible) - missing, suggest alternatives\n  \u2022 detail-eyes.safetensors (optional) - missing, can proceed\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#batch-setting-importance","title":"Batch setting importance","text":"<p>For workflows with many models, you can script importance:</p> <pre><code># Set all checkpoints as required\nfor model in sd_xl_base_1.0 sd15_base; do\n  cg workflow model importance my-workflow \"$model.safetensors\" required\ndone\n\n# Set all LoRAs as flexible\nfor lora in style1 style2 style3; do\n  cg workflow model importance my-workflow \"$lora.safetensors\" flexible\ndone\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#best-practices","title":"Best practices","text":"<p>Recommended</p> <ul> <li>Mark base checkpoints as required - They're essential</li> <li>Mark style LoRAs as flexible - Users can substitute</li> <li>Mark refinement models as optional - Nice but not critical</li> <li>Document in commit messages - \"Set model importance for sharing\"</li> </ul> <p>Avoid</p> <ul> <li>Marking everything required - Makes imports fragile</li> <li>No importance set - ComfyGit assumes required by default</li> <li>Inconsistent across workflows - Confuses recipients</li> </ul>"},{"location":"user-guide/workflows/workflow-model-importance/#common-patterns","title":"Common patterns","text":""},{"location":"user-guide/workflows/workflow-model-importance/#portrait-workflow","title":"Portrait workflow","text":"<pre><code># Base checkpoint - required\ncg workflow model importance portrait sd_xl_base_1.0.safetensors required\n\n# Style LoRA - flexible\ncg workflow model importance portrait portrait-style.safetensors flexible\n\n# Eye detail - optional\ncg workflow model importance portrait perfect-eyes.safetensors optional\n\n# Skin detail - optional\ncg workflow model importance portrait skin-detail.safetensors optional\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#anime-workflow","title":"Anime workflow","text":"<pre><code># Anime checkpoint - required\ncg workflow model importance anime anime-xl.safetensors required\n\n# Character LoRA - flexible\ncg workflow model importance anime character-style.safetensors flexible\n\n# Background LoRA - optional\ncg workflow model importance anime detailed-bg.safetensors optional\n</code></pre>"},{"location":"user-guide/workflows/workflow-model-importance/#clearing-importance","title":"Clearing importance","text":"<p>To remove importance setting (revert to default):</p> <p>Edit <code>.cec/pyproject.toml</code> manually and remove the importance annotation, or set it again to change the value.</p> <p>Future enhancement</p> <p>A <code>cg workflow model clear-importance</code> command may be added for easier management.</p>"},{"location":"user-guide/workflows/workflow-model-importance/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/workflows/workflow-model-importance/#model-not-found-in-workflow","title":"\"Model not found in workflow\"","text":"<p>Problem: Model identifier doesn't match workflow</p> <p>Solution: Use exact filename or hash from <code>cg status</code> output</p>"},{"location":"user-guide/workflows/workflow-model-importance/#changes-not-reflected-in-status","title":"Changes not reflected in status","text":"<p>Problem: Set importance but status doesn't show it</p> <p>Solution: Commit changes first: <pre><code>cg commit -m \"Set model importance\"\n</code></pre></p>"},{"location":"user-guide/workflows/workflow-model-importance/#import-still-fails-with-optional-models","title":"Import still fails with optional models","text":"<p>Problem: Import fails even though models are optional</p> <p>Solution: Check if required models are missing - those will block imports</p>"},{"location":"user-guide/workflows/workflow-model-importance/#next-steps","title":"Next steps","text":"<ul> <li>Workflow resolution (Coming soon) - How model matching works</li> <li>Export/Import (Coming soon) - Share workflows with importance set</li> <li>Model management (Coming soon) - Finding and organizing models</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/","title":"Workflow Resolution","text":"<p>Automatically resolve workflow dependencies: custom nodes and models from workflow JSON.</p>"},{"location":"user-guide/workflows/workflow-resolution/#overview","title":"Overview","text":"<p>ComfyGit analyzes workflow JSON files to determine what custom nodes and models are needed, then resolves them automatically through:</p> <ul> <li>Node resolution - Maps node types to installable packages</li> <li>Model resolution - Matches model references to your indexed models</li> <li>Interactive fixing - Prompts for ambiguous or missing dependencies</li> <li>Automatic downloads - Downloads models when sources are available</li> </ul> <p>Resolution happens in two phases:</p> <ol> <li>Analysis - Parse workflow JSON, extract dependencies</li> <li>Resolution - Match nodes to packages, models to files</li> </ol> <p>Both phases are cached for performance.</p>"},{"location":"user-guide/workflows/workflow-resolution/#automatic-resolution","title":"Automatic resolution","text":"<p>Workflows are automatically resolved during <code>cg commit</code>:</p> <pre><code>cg commit -m \"Add new workflow\"\n</code></pre> <p>What happens:</p> <ol> <li>Workflow detection - Finds new/modified workflows</li> <li>Dependency extraction - Parses nodes and model references</li> <li>Resolution - Matches nodes and models automatically</li> <li>Path sync - Updates model paths in workflow JSON</li> <li>Commit - Saves resolved state to <code>.cec/pyproject.toml</code></li> </ol> <p>If resolution encounters ambiguous or missing dependencies, commit is blocked:</p> <pre><code>\u2717 Cannot commit with unresolved issues\n\nWorkflow 'portrait-gen' has unresolved dependencies:\n  \u2022 2 ambiguous nodes\n  \u2022 1 missing model\n\nRun: cg workflow resolve portrait-gen\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#manual-resolution","title":"Manual resolution","text":"<p>Resolve a specific workflow manually:</p> <pre><code>cg workflow resolve my-workflow\n</code></pre> <p>Interactive mode (default):</p> <pre><code>\ud83d\udd27 Resolving dependencies...\n\n\u26a0\ufe0f  Node not found in registry: CR_AspectRatioSD15\n\ud83d\udd0d Searching for: CR_AspectRatioSD15\n\nResults:\n  1. comfyui_controlnet_aux (rank #12)\n     Contains: 12 nodes including aspect ratio tools\n\n  2. rgthree-comfy (rank #3)\n     Contains: 45 nodes including aspect ratio utilities\n\n  [1] Select  [r] Refine search  [m] Manual ID  [o] Optional  [s] Skip\nChoice [1]/r/m/o/s: 1\n\n\u2713 Resolved CR_AspectRatioSD15 \u2192 comfyui_controlnet_aux\n\n\u26a0\ufe0f  Model not found: anime-style-xl.safetensors\n\ud83d\udd0d Searching model index...\n\nNo exact match found.\n\nSimilar models:\n  1. anime-xl-v2.safetensors (confidence: 0.89)\n  2. anime-style-lora.safetensors (confidence: 0.76)\n\n  [1] Select  [d] Download URL  [o] Optional  [s] Skip\nChoice [1]/d/o/s: d\n\nEnter download URL: https://civitai.com/api/download/models/123456\nEnter target path [loras/anime-style-xl.safetensors]:\n\n\u2713 Download intent saved\n\n\ud83d\udce6 Found 1 missing node pack:\n  \u2022 comfyui_controlnet_aux\n\nInstall missing nodes? (Y/n): y\n\n\u2b07\ufe0f  Installing nodes...\n\u2713 Installed comfyui_controlnet_aux\n\n\ud83d\udce5 Downloading models...\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 2.15 GB / 2.15 GB [100%]\n\n\u2713 Resolution complete\n  \u2022 1 node resolved and installed\n  \u2022 1 model downloaded\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#auto-mode","title":"Auto mode","text":"<p>Skip all prompts and auto-select best matches:</p> <pre><code>cg workflow resolve my-workflow --auto\n</code></pre> <p>Uses scoring system to pick best candidates:</p> <ul> <li>Exact matches - Selects automatically</li> <li>Fuzzy matches - Picks highest confidence (&gt;0.8)</li> <li>No match - Leaves unresolved</li> <li>Ambiguous - Picks highest-ranked package from registry</li> </ul> <p>Good for:</p> <ul> <li>Known workflows from trusted sources</li> <li>Batch processing multiple workflows</li> <li>CI/CD environments</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#resolution-phases","title":"Resolution phases","text":""},{"location":"user-guide/workflows/workflow-resolution/#phase-1-node-resolution","title":"Phase 1: Node resolution","text":"<p>Analyzes each node in the workflow:</p> <p>Builtin nodes:</p> <pre><code>{\"id\": \"3\", \"type\": \"KSampler\", \"widgets_values\": [123, \"fixed\", 20, 8]}\n</code></pre> <p>Recognized as ComfyUI builtin \u2192 No package needed</p> <p>Custom nodes:</p> <pre><code>{\"id\": \"5\", \"type\": \"CR_AspectRatioSD15\", \"widgets_values\": [\"1:1\"]}\n</code></pre> <p>Resolution steps:</p> <ol> <li>Check pyproject - Previous resolution or manual mapping?</li> <li>Check registry - Exact node type match in ComfyUI registry</li> <li>Fuzzy search - Embedding-based similarity search</li> <li>Interactive prompt - Ask user if ambiguous</li> </ol> <p>Resolution states:</p> <ul> <li>Resolved - Found package, added to <code>pyproject.toml</code></li> <li>Ambiguous - Multiple candidates found</li> <li>Unresolved - Not found anywhere</li> <li>Optional - User marked as non-essential</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#phase-2-model-resolution","title":"Phase 2: Model resolution","text":"<p>Extracts model references from node widgets:</p> <p>Builtin loaders (exact widget detection):</p> <pre><code>{\"type\": \"CheckpointLoaderSimple\", \"widgets_values\": [\"sd_xl_base_1.0.safetensors\"]}\n</code></pre> <p>Widget index 0 contains checkpoint path (from model config).</p> <p>Custom nodes (pattern matching):</p> <pre><code>{\"type\": \"CustomLoraLoader\", \"widgets_values\": [\"some-lora.safetensors\", 0.8]}\n</code></pre> <p>Scans all widgets for <code>.safetensors</code>, <code>.ckpt</code>, <code>.pt</code> extensions.</p> <p>Resolution strategies:</p> <ol> <li>Exact hash match - Model filename \u2192 BLAKE3 hash in index</li> <li>Filename search - Case-insensitive filename lookup</li> <li>Previous resolution - Check pyproject for prior download intent</li> <li>Fuzzy search - Similarity matching with confidence scores</li> <li>Download intent - User provides URL for future download</li> <li>Optional - User marks as non-essential</li> </ol> <p>Resolution states:</p> <ul> <li>Resolved - Found in model index</li> <li>Download intent - URL saved, will download on next resolve</li> <li>Ambiguous - Multiple models with same/similar filename</li> <li>Unresolved - Not found, no download URL</li> <li>Optional - User marked as non-essential</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#resolution-control-flags","title":"Resolution control flags","text":""},{"location":"user-guide/workflows/workflow-resolution/#install-missing-nodes","title":"Install missing nodes","text":"<p>Automatic installation:</p> <pre><code>cg workflow resolve my-workflow --install\n</code></pre> <p>Skips prompt, automatically installs all resolved node packages.</p> <p>Skip installation:</p> <pre><code>cg workflow resolve my-workflow --no-install\n</code></pre> <p>Only updates pyproject.toml, doesn't install anything. Use when:</p> <ul> <li>Checking what's needed before installing</li> <li>Running in CI without actual installs</li> <li>Preparing environment for later installation</li> </ul> <p>Interactive (default):</p> <pre><code>cg workflow resolve my-workflow\n</code></pre> <p>Prompts after resolution:</p> <pre><code>\ud83d\udce6 Found 3 missing node packs:\n  \u2022 rgthree-comfy\n  \u2022 comfyui_controlnet_aux\n  \u2022 comfyui-impact-pack\n\nInstall missing nodes? (Y/n):\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#model-path-synchronization","title":"Model path synchronization","text":"<p>ComfyGit updates workflow JSON to match resolved model paths.</p> <p>Before resolution:</p> <pre><code>{\n  \"type\": \"CheckpointLoaderSimple\",\n  \"widgets_values\": [\"sd_xl_base_1.0.safetensors\"]\n}\n</code></pre> <p>After resolution:</p> <pre><code>{\n  \"type\": \"CheckpointLoaderSimple\",\n  \"widgets_values\": [\"sd_xl_base_1.0.safetensors\"]\n}\n</code></pre> <p>Path updated to match actual location in model index:</p> <ul> <li><code>checkpoints/SD XL/sd_xl_base_1.0.safetensors</code> (indexed path)</li> <li>\u2192 <code>sd_xl_base_1.0.safetensors</code> (workflow path, base directory stripped)</li> </ul> <p>Why this matters:</p> <ul> <li>ComfyUI frontend expects specific paths in JSON</li> <li>Custom nodes may use different base directories</li> <li>Path sync ensures workflows load correctly</li> </ul> <p>What gets synced:</p> <ul> <li>\u2705 Builtin nodes only - Safe, known widget structure</li> <li>\u274c Custom nodes skipped - Unknown widget layouts, preserved as-is</li> </ul> <p>When sync happens:</p> <ul> <li>During <code>cg workflow resolve</code> (after all resolutions)</li> <li>During <code>cg commit</code> (auto-resolution)</li> <li>Batch update to avoid cache invalidation issues</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#subgraph-support","title":"Subgraph support","text":"<p>ComfyGit fully supports ComfyUI subgraphs (v1.0.7+):</p> <p>What are subgraphs?</p> <p>Reusable workflow components introduced in ComfyUI v1.24.3. Group nodes into named subgraphs.</p> <p>How ComfyGit handles them:</p> <ol> <li>Flattening - Extracts nodes from subgraph definitions</li> <li>Scoped IDs - Preserves node identity (<code>uuid:3</code> for subgraph nodes)</li> <li>Filtering - Removes UUID reference nodes (subgraph placeholders)</li> <li>Lossless round-trip - Preserves all 14 subgraph fields</li> <li>Reconstruction - <code>to_json()</code> rebuilds original structure</li> </ol> <p>Example workflow with subgraph:</p> <pre><code>{\n  \"nodes\": [\n    {\"id\": 10, \"type\": \"0a58ac1f-...\", \"outputs\": [{\"type\": \"IMAGE\"}]}\n  ],\n  \"definitions\": {\n    \"subgraphs\": [{\n      \"id\": \"0a58ac1f-...\",\n      \"name\": \"Text2Img\",\n      \"nodes\": [\n        {\"id\": 3, \"type\": \"KSampler\"},\n        {\"id\": 10, \"type\": \"CheckpointLoaderSimple\"}\n      ]\n    }]\n  }\n}\n</code></pre> <p>Resolution extracts:</p> <ul> <li><code>KSampler</code> (builtin, from subgraph)</li> <li><code>CheckpointLoaderSimple</code> (builtin, from subgraph)</li> <li>Model reference from checkpoint loader</li> </ul> <p>Subgraph reference node filtered out:</p> <ul> <li><code>type: \"0a58ac1f-...\"</code> is a UUID, not a real node type</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#resolution-caching","title":"Resolution caching","text":"<p>ComfyGit aggressively caches resolution for performance.</p>"},{"location":"user-guide/workflows/workflow-resolution/#analysis-cache","title":"Analysis cache","text":"<p>Cached: Workflow dependency parsing (nodes + model references)</p> <p>Invalidated when:</p> <ul> <li>Workflow JSON content changes (BLAKE3 hash)</li> <li>ComfyUI version changes</li> <li>Normalized workflow differs (ignores pan/zoom, revision)</li> </ul> <p>Cache location: SQLite database (<code>comfygit_cache/workflows.db</code>)</p> <p>Speed improvement: 50-100x faster on cache hit</p>"},{"location":"user-guide/workflows/workflow-resolution/#resolution-cache","title":"Resolution cache","text":"<p>Cached: Node/model resolution results</p> <p>Context-aware invalidation:</p> <ul> <li>\u2705 Workflow content changed - Full invalidation</li> <li>\u2705 Pyproject modified - Only if relevant sections changed</li> <li>\u2705 Model index changed - Only if models in workflow affected</li> <li>\u274c Unrelated pyproject changes - Cache hit!</li> <li>\u274c Unrelated model index changes - Cache hit!</li> </ul> <p>Cache validation:</p> <ul> <li>Workflow content hash (BLAKE3)</li> <li>Pyproject mtime (fast-reject if unchanged)</li> <li>Resolution context hash (only workflow-relevant data):</li> <li>Custom node mappings for nodes in this workflow</li> <li>Declared packages for nodes this workflow uses</li> <li>Model entries from pyproject for this workflow</li> <li>Model index subset (only models this workflow references)</li> <li>ComfyGit version</li> </ul> <p>Manual cache invalidation:</p> <pre><code># Force re-resolve by modifying workflow\ntouch ~/comfygit/environments/my-env/ComfyUI/user/default/workflows/my-workflow.json\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#progressive-writes","title":"Progressive writes","text":"<p>Resolution saves changes immediately during interactive mode.</p> <p>Why this matters:</p> <ul> <li>Ctrl+C safe - Progress not lost</li> <li>Can resume after interruption</li> <li>No \"all-or-nothing\" resolution</li> </ul> <p>What gets written progressively:</p> <ol> <li>Node resolutions - Added to <code>[tool.comfygit.workflows.&lt;name&gt;.nodes]</code> immediately</li> <li>Custom node mappings - Added to <code>[tool.comfygit.workflows.&lt;name&gt;.custom_node_map]</code> immediately</li> <li>Model resolutions - Added to <code>[tool.comfygit.workflows.&lt;name&gt;.models]</code> immediately</li> <li>Download intents - Saved with pending download URL</li> <li>Global model table - Updated when models resolved</li> </ol> <p>Batch operations:</p> <ul> <li>Model path updates in workflow JSON (all at end)</li> <li>Prevents cache invalidation mid-resolution</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#download-intents","title":"Download intents","text":"<p>Models can be resolved with pending download URLs:</p> <p>During interactive resolution:</p> <pre><code>\u26a0\ufe0f  Model not found: new-model.safetensors\nEnter download URL: https://civitai.com/api/download/models/123456\nEnter target path [checkpoints/new-model.safetensors]:\n</code></pre> <p>Saved to pyproject:</p> <pre><code>[[tool.comfygit.workflows.my-workflow.models]]\nfilename = \"new-model.safetensors\"\ncategory = \"checkpoints\"\ncriticality = \"required\"\nstatus = \"unresolved\"\nsources = [\"https://civitai.com/api/download/models/123456\"]\nrelative_path = \"checkpoints/new-model.safetensors\"\nnodes = [{node_id = \"5\", node_type = \"CheckpointLoaderSimple\", widget_index = 0}]\n</code></pre> <p>Next resolution:</p> <pre><code>cg workflow resolve my-workflow\n</code></pre> <p>Detects download intent and downloads automatically:</p> <pre><code>\ud83d\udce5 Downloading models...\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588 2.15 GB / 2.15 GB [100%]\n\n\u2713 Downloaded new-model.safetensors\n</code></pre> <p>After download:</p> <ul> <li>Status changes to <code>resolved</code></li> <li>Hash computed and added</li> <li>Sources moved to global model table</li> <li>Model indexed</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#viewing-resolution-status","title":"Viewing resolution status","text":""},{"location":"user-guide/workflows/workflow-resolution/#quick-check","title":"Quick check","text":"<pre><code>cg workflow list\n</code></pre> <p>Shows sync state but not resolution details:</p> <pre><code>Workflows in 'my-env':\n\n\u2713 Synced (up to date):\n  \ud83d\udccb portrait-gen\n\n\u26a0 Modified (changed since last commit):\n  \ud83d\udcdd anime-style\n\n\ud83c\udd95 New (not committed yet):\n  \u2795 sdxl-upscale\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#detailed-status","title":"Detailed status","text":"<pre><code>cg status\n</code></pre> <p>Shows workflows with resolution issues inline:</p> <pre><code>\ud83d\udccb Workflows:\n  \u26a0\ufe0f  portrait-gen (synced)\n      2 unresolved nodes\n      1 missing model\n\n  \u2713 anime-style (modified)\n      All dependencies resolved\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#full-resolution-report","title":"Full resolution report","text":"<pre><code>cg workflow resolve my-workflow --auto\n</code></pre> <p>Even in <code>--auto</code> mode, shows what was resolved:</p> <pre><code>\u2713 Resolution complete\n  \u2022 3 nodes resolved\n  \u2022 2 models resolved (exact hash match)\n  \u2022 1 model with download intent\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#handling-unresolved-dependencies","title":"Handling unresolved dependencies","text":""},{"location":"user-guide/workflows/workflow-resolution/#unresolved-nodes","title":"Unresolved nodes","text":"<p>Option 1: Mark as optional</p> <p>If node isn't essential:</p> <pre><code>\u26a0\ufe0f  Node not found: OptionalUpscaler\n  [o] Mark as optional\nChoice: o\n</code></pre> <p>Saved to pyproject:</p> <pre><code>[tool.comfygit.workflows.my-workflow.custom_node_map]\nOptionalUpscaler = false  # false = optional\n</code></pre> <p>Option 2: Manual package ID</p> <p>If you know the correct package:</p> <pre><code>\u26a0\ufe0f  Node not found: MyCustomNode\n  [m] Manual package ID\nChoice: m\nEnter package ID: https://github.com/user/ComfyUI-CustomNodes\n</code></pre> <p>Option 3: Skip for now</p> <p>Leave unresolved, fix later:</p> <pre><code>  [s] Skip\nChoice: s\n</code></pre> <p>Commit will be blocked until resolved or marked optional.</p>"},{"location":"user-guide/workflows/workflow-resolution/#unresolved-models","title":"Unresolved models","text":"<p>Option 1: Provide download URL</p> <pre><code>\u26a0\ufe0f  Model not found: my-model.safetensors\n  [d] Enter download URL\nChoice: d\nEnter URL: https://civitai.com/api/download/models/123456\n</code></pre> <p>Creates download intent - model will download on next resolve.</p> <p>Option 2: Mark as optional</p> <pre><code>  [o] Mark as optional\nChoice: o\n</code></pre> <p>Workflow can run without it.</p> <p>Option 3: Skip</p> <pre><code>  [s] Skip\nChoice: s\n</code></pre> <p>Blocks commit until resolved.</p>"},{"location":"user-guide/workflows/workflow-resolution/#best-practices","title":"Best practices","text":"<p>Recommended</p> <ul> <li>Resolve before commit - Catch issues early</li> <li>Use --auto for trusted workflows - Faster for known-good workflows</li> <li>Mark optional nodes/models - Improves sharing compatibility</li> <li>Provide download URLs - Helps team members get exact models</li> <li>Let commit auto-resolve - Default workflow handles most cases</li> </ul> <p>Avoid</p> <ul> <li>Committing with --allow-issues - Unresolved deps will break on other machines</li> <li>Manual pyproject edits - Use commands for consistency</li> <li>Skipping model path sync - Workflows may not load correctly</li> <li>Ignoring ambiguous warnings - May resolve to wrong packages</li> </ul>"},{"location":"user-guide/workflows/workflow-resolution/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/workflows/workflow-resolution/#resolution-fails-with-cache-error","title":"Resolution fails with cache error","text":"<p>Problem: Workflow cache corrupted or stale</p> <p>Solution: Delete and recreate cache:</p> <pre><code>rm -rf ~/comfygit/cache/workflows.db\ncg workflow resolve my-workflow\n</code></pre> <p>Cache rebuilds automatically.</p>"},{"location":"user-guide/workflows/workflow-resolution/#node-resolved-to-wrong-package","title":"Node resolved to wrong package","text":"<p>Problem: Auto-resolution picked incorrect match</p> <p>Solution: Override with custom mapping:</p> <p>Edit <code>.cec/pyproject.toml</code>:</p> <pre><code>[tool.comfygit.workflows.my-workflow.custom_node_map]\nMyNodeType = \"correct-package-id\"\n</code></pre> <p>Or use manual resolution:</p> <pre><code>cg workflow resolve my-workflow\n# Choose [m] manual when prompted for MyNodeType\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#model-path-not-updating-in-workflow","title":"Model path not updating in workflow","text":"<p>Problem: Workflow JSON still has old path</p> <p>Solution: Ensure resolution completes successfully:</p> <ol> <li>Resolve workflow: <code>cg workflow resolve my-workflow</code></li> <li>Commit to save: <code>cg commit</code></li> </ol> <p>Path updates happen during resolution, only for builtin nodes.</p>"},{"location":"user-guide/workflows/workflow-resolution/#download-intent-not-executing","title":"Download intent not executing","text":"<p>Problem: Model has download URL but doesn't download</p> <p>Solution: Ensure status is \"unresolved\" with sources:</p> <pre><code># Check pyproject.toml\ncat .cec/pyproject.toml | grep -A 5 \"my-model\"\n</code></pre> <p>Should have:</p> <pre><code>status = \"unresolved\"\nsources = [\"https://...\"]\n</code></pre> <p>If missing, re-resolve:</p> <pre><code>cg workflow resolve my-workflow\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#commit-blocked-with-resolved-deps","title":"Commit blocked with resolved deps","text":"<p>Problem: All deps resolved but commit still blocked</p> <p>Solution: Check for path sync issues:</p> <pre><code>cg status\n</code></pre> <p>If shows path sync warning, resolve again:</p> <pre><code>cg workflow resolve my-workflow\n</code></pre>"},{"location":"user-guide/workflows/workflow-resolution/#next-steps","title":"Next steps","text":"<ul> <li>Workflow tracking - How workflows are discovered and managed</li> <li>Model importance - Mark models as required/flexible/optional</li> <li>Model index - Understanding the model database</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/","title":"Workflow Tracking","text":"<p>Automatic workflow discovery, sync tracking, and version control integration.</p>"},{"location":"user-guide/workflows/workflow-tracking/#overview","title":"Overview","text":"<p>ComfyGit automatically tracks all workflows in your environment:</p> <ul> <li>Zero configuration - Save workflows in ComfyUI, they're tracked automatically</li> <li>Sync states - New, modified, synced, or deleted</li> <li>Git integration - Workflows committed to <code>.cec</code> directory</li> <li>Change detection - BLAKE3 content hashing for precise tracking</li> <li>Subgraph support - Full ComfyUI v1.24.3+ compatibility</li> </ul> <p>No manual registration needed - just save workflows in ComfyUI and ComfyGit handles the rest.</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-discovery","title":"Workflow discovery","text":""},{"location":"user-guide/workflows/workflow-tracking/#where-workflows-live","title":"Where workflows live","text":"<p>ComfyUI directory:</p> <pre><code>~/comfygit/environments/my-env/ComfyUI/user/default/workflows/\n\u251c\u2500\u2500 portrait-generation.json\n\u251c\u2500\u2500 anime-style.json\n\u2514\u2500\u2500 sdxl-upscale.json\n</code></pre> <p>This is where ComfyUI saves workflows when you click \"Save\" in the frontend.</p> <p>ComfyGit tracking directory:</p> <pre><code>~/comfygit/environments/my-env/.cec/workflows/\n\u251c\u2500\u2500 portrait-generation.json\n\u251c\u2500\u2500 anime-style.json\n\u2514\u2500\u2500 sdxl-upscale.json\n</code></pre> <p>Committed copies stored in <code>.cec</code> for version control.</p>"},{"location":"user-guide/workflows/workflow-tracking/#automatic-detection","title":"Automatic detection","text":"<p>ComfyGit discovers workflows in real-time:</p> <pre><code># Save a new workflow in ComfyUI, then:\ncg workflow list\n</code></pre> <p>Output shows immediately:</p> <pre><code>Workflows in 'my-env':\n\n\ud83c\udd95 New (not committed yet):\n  \u2795 my-new-workflow\n</code></pre> <p>No explicit \"add workflow\" command needed.</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-sync-states","title":"Workflow sync states","text":"<p>ComfyGit tracks four sync states:</p>"},{"location":"user-guide/workflows/workflow-tracking/#new","title":"New","text":"<p>Workflow exists in ComfyUI but not in <code>.cec</code></p> <pre><code>cg workflow list\n</code></pre> <pre><code>\ud83c\udd95 New (not committed yet):\n  \u2795 my-new-workflow\n</code></pre> <p>What it means:</p> <ul> <li>You saved this workflow in ComfyUI</li> <li>Not yet committed to version control</li> <li>Will be copied to <code>.cec</code> on next <code>cg commit</code></li> </ul> <p>Next step:</p> <pre><code>cg commit -m \"Add my-new-workflow\"\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#modified","title":"Modified","text":"<p>Workflow exists in both places but content differs</p> <pre><code>cg workflow list\n</code></pre> <pre><code>\u26a0 Modified (changed since last commit):\n  \ud83d\udcdd portrait-generation\n</code></pre> <p>What it means:</p> <ul> <li>You edited the workflow in ComfyUI</li> <li>Committed copy in <code>.cec</code> is out of date</li> <li>Content hash differs (BLAKE3)</li> </ul> <p>Common causes:</p> <ul> <li>Changed node connections</li> <li>Modified widget values</li> <li>Added/removed nodes</li> <li>Adjusted model paths</li> </ul> <p>Next step:</p> <pre><code>cg commit -m \"Update portrait-generation workflow\"\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#synced","title":"Synced","text":"<p>Workflow identical in both places</p> <pre><code>cg workflow list\n</code></pre> <pre><code>\u2713 Synced (up to date):\n  \ud83d\udccb portrait-generation\n  \ud83d\udccb anime-style\n</code></pre> <p>What it means:</p> <ul> <li>ComfyUI version matches <code>.cec</code> version</li> <li>No uncommitted changes</li> <li>Safe to share or pull</li> </ul> <p>No action needed - Everything in sync.</p>"},{"location":"user-guide/workflows/workflow-tracking/#deleted","title":"Deleted","text":"<p>Workflow exists in <code>.cec</code> but not in ComfyUI</p> <pre><code>cg workflow list\n</code></pre> <pre><code>\ud83d\uddd1 Deleted (removed from ComfyUI):\n  \u2796 old-workflow\n</code></pre> <p>What it means:</p> <ul> <li>You deleted the workflow file from ComfyUI</li> <li>Committed copy still in <code>.cec</code></li> <li>Will be removed from <code>.cec</code> on next commit</li> </ul> <p>Next step:</p> <pre><code>cg commit -m \"Remove old-workflow\"\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-metadata","title":"Workflow metadata","text":"<p>Workflow metadata stored in <code>.cec/pyproject.toml</code>:</p> <pre><code>[tool.comfygit.workflows.portrait-generation]\nnodes = [\n    \"rgthree-comfy\",\n    \"comfyui_controlnet_aux\"\n]\n\n[tool.comfygit.workflows.portrait-generation.custom_node_map]\nCR_AspectRatioSD15 = \"comfyui_controlnet_aux\"\n\n[[tool.comfygit.workflows.portrait-generation.models]]\nhash = \"f6e5d4c3b2a1...\"\nfilename = \"sd_xl_base_1.0.safetensors\"\ncategory = \"checkpoints\"\ncriticality = \"flexible\"\nstatus = \"resolved\"\nnodes = [\n    {node_id = \"3\", node_type = \"CheckpointLoaderSimple\", widget_index = 0, widget_value = \"sd_xl_base_1.0.safetensors\"}\n]\n</code></pre> <p>Sections:</p> <ul> <li><code>nodes</code> - Required node packages (resolved from workflow)</li> <li><code>custom_node_map</code> - User-confirmed node type \u2192 package mappings</li> <li><code>models</code> - Model references with resolution details</li> </ul> <p>Updated automatically during:</p> <ul> <li><code>cg workflow resolve</code> - Interactive or auto resolution</li> <li><code>cg commit</code> - Auto-resolution before commit</li> <li><code>cg workflow model importance</code> - Criticality updates</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-structure","title":"Workflow structure","text":"<p>ComfyGit parses standard ComfyUI workflow JSON:</p>"},{"location":"user-guide/workflows/workflow-tracking/#basic-structure","title":"Basic structure","text":"<pre><code>{\n  \"id\": \"workflow-id\",\n  \"revision\": 5,\n  \"version\": 0.4,\n  \"nodes\": [\n    {\n      \"id\": 3,\n      \"type\": \"CheckpointLoaderSimple\",\n      \"widgets_values\": [\"sd_xl_base_1.0.safetensors\"]\n    },\n    {\n      \"id\": 5,\n      \"type\": \"KSampler\",\n      \"widgets_values\": [123456, \"fixed\", 20, 8.0]\n    }\n  ],\n  \"links\": [[1, 3, 0, 5, 0, \"MODEL\"]],\n  \"groups\": [],\n  \"config\": {},\n  \"extra\": {}\n}\n</code></pre> <p>What ComfyGit extracts:</p> <ul> <li>Node types - <code>CheckpointLoaderSimple</code>, <code>KSampler</code>, etc.</li> <li>Model references - Widget values containing model filenames</li> <li>Node connections - Links between nodes (preserved but not analyzed)</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#subgraph-structure-comfyui-v1243","title":"Subgraph structure (ComfyUI v1.24.3+)","text":"<p>Workflows can contain reusable subgraphs:</p> <pre><code>{\n  \"nodes\": [\n    {\n      \"id\": 10,\n      \"type\": \"0a58ac1f-cb15-4e01-aab3-26292addb965\",\n      \"outputs\": [{\"name\": \"IMAGE\", \"type\": \"IMAGE\"}]\n    }\n  ],\n  \"definitions\": {\n    \"subgraphs\": [\n      {\n        \"id\": \"0a58ac1f-cb15-4e01-aab3-26292addb965\",\n        \"name\": \"Text2Img\",\n        \"nodes\": [\n          {\"id\": 3, \"type\": \"KSampler\"},\n          {\"id\": 10, \"type\": \"CheckpointLoaderSimple\"}\n        ]\n      }\n    ]\n  }\n}\n</code></pre> <p>How ComfyGit handles subgraphs:</p> <ol> <li>Flattening - Extracts all nodes from subgraph definitions</li> <li>Scoped IDs - Preserves node identity (e.g., <code>uuid:3</code>)</li> <li>UUID filtering - Removes subgraph reference nodes (they're placeholders)</li> <li>Lossless serialization - Preserves all 14 subgraph fields</li> <li>Round-trip safety - Rebuilds exact original structure on save</li> </ol> <p>What you need to know:</p> <ul> <li>\u2705 Subgraphs fully supported since ComfyGit v1.0.7</li> <li>\u2705 Node/model resolution works inside subgraphs</li> <li>\u2705 Model paths updated correctly in subgraph nodes</li> <li>\u2705 No special commands needed - just works</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#listing-workflows","title":"Listing workflows","text":""},{"location":"user-guide/workflows/workflow-tracking/#basic-list","title":"Basic list","text":"<pre><code>cg workflow list\n</code></pre> <p>Shows all workflows grouped by sync state:</p> <pre><code>Workflows in 'my-env':\n\n\u2713 Synced (up to date):\n  \ud83d\udccb portrait-generation\n  \ud83d\udccb anime-style\n\n\u26a0 Modified (changed since last commit):\n  \ud83d\udcdd sdxl-upscale\n\n\ud83c\udd95 New (not committed yet):\n  \u2795 experimental-flow\n\nRun 'cg commit' to save current state\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#status-integration","title":"Status integration","text":"<p>Workflows appear in <code>cg status</code> with resolution details:</p> <pre><code>cg status\n</code></pre> <pre><code>Environment: my-env\n\n\ud83d\udccb Workflows:\n  \u26a0\ufe0f  portrait-generation (synced)\n      2 unresolved nodes\n      1 missing model\n      \u2192 Run: cg workflow resolve portrait-generation\n\n  \u2713 anime-style (modified)\n      All dependencies resolved\n\n  \ud83c\udd95 experimental-flow (new)\n      Not yet analyzed\n      \u2192 Commit to analyze dependencies\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-commit-flow","title":"Workflow commit flow","text":""},{"location":"user-guide/workflows/workflow-tracking/#standard-commit","title":"Standard commit","text":"<p>Committing automatically handles workflow updates:</p> <pre><code>cg commit -m \"Update workflows\"\n</code></pre> <p>What happens:</p> <ol> <li>Copy workflows - ComfyUI \u2192 <code>.cec</code> directory</li> <li>Auto-resolve all - Analyze and resolve dependencies</li> <li>Update metadata - Write resolutions to <code>pyproject.toml</code></li> <li>Path sync - Update model paths in workflow JSON</li> <li>Cleanup deleted - Remove deleted workflows from pyproject</li> <li>Cleanup orphans - Remove unused models from global table</li> <li>Git commit - Commit <code>.cec</code> directory changes</li> </ol> <p>Files committed:</p> <pre><code>.cec/workflows/my-workflow.json         # Workflow JSON\n.cec/pyproject.toml                      # Metadata + resolutions\n.cec/comfyui.json                        # ComfyUI version\n.cec/environment.json                    # Environment metadata\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#blocked-commits","title":"Blocked commits","text":"<p>Commit blocks if workflows have unresolved issues:</p> <pre><code>cg commit\n</code></pre> <pre><code>\u2717 Cannot commit with unresolved issues\n\nWorkflow 'portrait-generation':\n  \u2022 2 unresolved nodes: CR_AspectRatioSD15, CustomUpscaler\n  \u2022 1 missing model: anime-style-xl.safetensors\n\nFix with: cg workflow resolve portrait-generation\n\nOr force commit: cg commit --allow-issues\n</code></pre> <p>Why blocking?</p> <p>Unresolved workflows won't work on other machines:</p> <ul> <li>Missing nodes \u2192 workflow fails to load</li> <li>Missing models \u2192 generation fails</li> <li>No sources \u2192 can't download models</li> </ul> <p>Forcing commit (not recommended):</p> <pre><code>cg commit --allow-issues -m \"WIP workflow\"\n</code></pre> <p>Use only for work-in-progress or experimental workflows.</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-only-commits","title":"Workflow-only commits","text":"<p>No other changes? Commit is optimized:</p> <pre><code># Only workflows modified\ncg commit -m \"Add new workflow\"\n</code></pre> <p>Skips unnecessary git operations, only commits workflow changes.</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-change-detection","title":"Workflow change detection","text":"<p>ComfyGit uses content hashing to detect changes:</p>"},{"location":"user-guide/workflows/workflow-tracking/#normalization","title":"Normalization","text":"<p>Before hashing, workflows are normalized:</p> <p>Removed (volatile fields):</p> <ul> <li><code>extra.ds</code> - UI pan/zoom state</li> <li><code>frontend_version</code> - ComfyUI frontend version</li> <li><code>revision</code> - Auto-increment counter</li> <li>Random seeds when <code>randomize: true</code></li> </ul> <p>Why normalize?</p> <p>Prevents false positives:</p> <pre><code>// These are considered identical:\n{\"nodes\": [...], \"extra\": {\"ds\": {\"offset\": [100, 200]}}}\n{\"nodes\": [...], \"extra\": {\"ds\": {\"offset\": [150, 250]}}}\n</code></pre> <p>Panning/zooming doesn't create \"modified\" state.</p>"},{"location":"user-guide/workflows/workflow-tracking/#blake3-hashing","title":"BLAKE3 hashing","text":"<p>Fast cryptographic hash:</p> <ul> <li>10-50x faster than SHA256</li> <li>Detects even single character changes</li> <li>Prevents accidental overwrites</li> </ul> <p>Example:</p> <pre><code># Modify workflow in ComfyUI (change single widget value)\ncg workflow list\n</code></pre> <p>Immediately shows:</p> <pre><code>\u26a0 Modified (changed since last commit):\n  \ud83d\udcdd my-workflow\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-organization","title":"Workflow organization","text":""},{"location":"user-guide/workflows/workflow-tracking/#naming-conventions","title":"Naming conventions","text":"<p>ComfyUI saves workflows with the name you provide:</p> <pre><code>Save workflow as: portrait-generation\n\u2192 Creates: portrait-generation.json\n</code></pre> <p>Best practices:</p> <ul> <li>Use kebab-case: <code>anime-style-xl</code></li> <li>Be descriptive: <code>sdxl-portrait-upscale</code></li> <li>Avoid spaces: Use dashes instead</li> <li>Lowercase preferred: <code>my-workflow</code> not <code>My-Workflow</code></li> </ul> <p>Why it matters:</p> <ul> <li>CLI commands use workflow names: <code>cg workflow resolve my-workflow</code></li> <li>Names appear in <code>pyproject.toml</code> keys</li> <li>Git filenames should be portable</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-subdirectories","title":"Workflow subdirectories","text":"<p>ComfyUI doesn't support subdirectories in workflows folder:</p> <p>\u274c Not supported:</p> <pre><code>workflows/\n\u251c\u2500\u2500 portraits/\n\u2502   \u2514\u2500\u2500 my-workflow.json\n\u2514\u2500\u2500 anime/\n    \u2514\u2500\u2500 another-workflow.json\n</code></pre> <p>\u2705 Use naming instead:</p> <pre><code>workflows/\n\u251c\u2500\u2500 portrait-my-workflow.json\n\u251c\u2500\u2500 portrait-upscale.json\n\u251c\u2500\u2500 anime-style-v1.json\n\u2514\u2500\u2500 anime-style-v2.json\n</code></pre> <p>ComfyGit tracks all <code>.json</code> files in workflows directory (flat structure only).</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-lifecycle","title":"Workflow lifecycle","text":""},{"location":"user-guide/workflows/workflow-tracking/#creating-a-workflow","title":"Creating a workflow","text":"<ol> <li>Design in ComfyUI - Build your workflow</li> <li>Save - Click \"Save\" in ComfyUI, provide name</li> <li>Check status - <code>cg workflow list</code> (shows as \"new\")</li> <li>Resolve - <code>cg workflow resolve my-workflow</code> (optional, commit does this)</li> <li>Commit - <code>cg commit -m \"Add my-workflow\"</code></li> </ol>"},{"location":"user-guide/workflows/workflow-tracking/#updating-a-workflow","title":"Updating a workflow","text":"<ol> <li>Edit in ComfyUI - Modify nodes, connections, values</li> <li>Save - Save in ComfyUI (overwrites file)</li> <li>Check changes - <code>cg workflow list</code> (shows as \"modified\")</li> <li>Re-resolve if needed - <code>cg workflow resolve my-workflow</code></li> <li>Commit - <code>cg commit -m \"Update my-workflow\"</code></li> </ol>"},{"location":"user-guide/workflows/workflow-tracking/#sharing-a-workflow","title":"Sharing a workflow","text":"<ol> <li>Ensure resolved - <code>cg workflow resolve my-workflow</code></li> <li>Set model importance - <code>cg workflow model importance my-workflow</code></li> <li>Add model sources - <code>cg model add-source &lt;model&gt;</code> for each model</li> <li>Commit - <code>cg commit -m \"Prepare my-workflow for sharing\"</code></li> <li>Push - <code>cg push</code></li> </ol> <p>Or export:</p> <pre><code>cg export my-env-export.tar.gz\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#deleting-a-workflow","title":"Deleting a workflow","text":"<ol> <li>Delete file - Remove from ComfyUI workflows folder</li> <li>Check status - <code>cg workflow list</code> (shows as \"deleted\")</li> <li>Commit - <code>cg commit -m \"Remove old-workflow\"</code></li> </ol> <p>Metadata automatically cleaned up from <code>pyproject.toml</code>.</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-caching","title":"Workflow caching","text":"<p>ComfyGit caches workflow analysis for performance:</p>"},{"location":"user-guide/workflows/workflow-tracking/#cache-structure","title":"Cache structure","text":"<p>Location: <code>~/comfygit/cache/workflows.db</code> (SQLite)</p> <p>Cached data:</p> <ul> <li>Workflow dependencies (nodes + model references)</li> <li>Resolution results (node packages + model matches)</li> <li>Analysis timestamps</li> </ul> <p>Cache keys:</p> <ul> <li>Environment name</li> <li>Workflow name</li> <li>Content hash (BLAKE3)</li> <li>Resolution context hash</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#cache-invalidation","title":"Cache invalidation","text":"<p>Automatic invalidation:</p> <ul> <li>Workflow content changes (hash differs)</li> <li>Pyproject modified (if workflow-relevant sections change)</li> <li>Model index updated (if workflow's models affected)</li> <li>ComfyGit version changes</li> </ul> <p>Manual invalidation:</p> <pre><code># Force cache miss by touching workflow\ntouch ~/comfygit/environments/my-env/ComfyUI/user/default/workflows/my-workflow.json\n</code></pre> <p>Or delete cache entirely:</p> <pre><code>rm -rf ~/comfygit/cache/workflows.db\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#cache-benefits","title":"Cache benefits","text":"<p>Without cache:</p> <pre><code>time cg workflow resolve my-workflow\n# \u2192 2.5 seconds\n</code></pre> <p>With cache (hit):</p> <pre><code>time cg workflow resolve my-workflow\n# \u2192 0.05 seconds (50x faster)\n</code></pre> <p>Critical for:</p> <ul> <li>Large workflows (100+ nodes)</li> <li>Frequent commits</li> <li>Status checks</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-to-environment-binding","title":"Workflow-to-environment binding","text":"<p>Workflows are environment-specific:</p> <pre><code>~/comfygit/environments/\n\u251c\u2500\u2500 env-a/\n\u2502   \u251c\u2500\u2500 ComfyUI/user/default/workflows/\n\u2502   \u2502   \u2514\u2500\u2500 workflow-a.json\n\u2502   \u2514\u2500\u2500 .cec/\n\u2502       \u251c\u2500\u2500 workflows/workflow-a.json\n\u2502       \u2514\u2500\u2500 pyproject.toml (resolutions for env-a)\n\u2514\u2500\u2500 env-b/\n    \u251c\u2500\u2500 ComfyUI/user/default/workflows/\n    \u2502   \u2514\u2500\u2500 workflow-b.json\n    \u2514\u2500\u2500 .cec/\n        \u251c\u2500\u2500 workflows/workflow-b.json\n        \u2514\u2500\u2500 pyproject.toml (resolutions for env-b)\n</code></pre> <p>Why separate?</p> <p>Different environments may:</p> <ul> <li>Use different model paths</li> <li>Have different nodes installed</li> <li>Target different ComfyUI versions</li> <li>Have different model collections</li> </ul> <p>Sharing workflows across environments:</p> <p>Copy workflow JSON manually or use export/import:</p> <pre><code># Export from env-a\ncg -e env-a export env-a-export.tar.gz\n\n# Import to env-b\ncg import env-a-export.tar.gz --name env-b-copy\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#best-practices","title":"Best practices","text":"<p>Recommended</p> <ul> <li>Commit frequently - Don't accumulate many workflow changes</li> <li>Descriptive names - Use clear, specific workflow names</li> <li>Resolve before commit - Catch dependency issues early</li> <li>Test after load - Open workflow in ComfyUI to verify model paths</li> <li>Track work-in-progress - Even experimental workflows benefit from commits</li> </ul> <p>Avoid</p> <ul> <li>Manual .cec edits - Let ComfyGit manage <code>.cec/workflows/</code></li> <li>Spaces in names - Use dashes instead</li> <li>Committing broken workflows - Resolve dependencies first</li> <li>Ignoring \"modified\" state - Commit or discard changes explicitly</li> <li>Deleting .cec directory - This is your version control!</li> </ul>"},{"location":"user-guide/workflows/workflow-tracking/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/workflows/workflow-tracking/#workflow-shows-as-modified-but-i-havent-changed-it","title":"Workflow shows as modified but I haven't changed it","text":"<p>Problem: Workflow marked modified after opening in ComfyUI</p> <p>Possible causes:</p> <ol> <li>Model path changed - ComfyUI updated paths when loading</li> <li>Revision incremented - ComfyUI auto-increments revision on save</li> <li>Extra fields added - ComfyUI added frontend metadata</li> </ol> <p>Solution 1: Commit the changes</p> <pre><code>cg commit -m \"ComfyUI metadata updates\"\n</code></pre> <p>Normalization means most metadata changes won't trigger \"modified\" state, but some might.</p> <p>Solution 2: Discard changes</p> <pre><code># Copy .cec version back to ComfyUI\ncp .cec/workflows/my-workflow.json ComfyUI/user/default/workflows/my-workflow.json\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#new-workflow-not-detected","title":"New workflow not detected","text":"<p>Problem: Saved workflow in ComfyUI but <code>cg workflow list</code> doesn't show it</p> <p>Check location:</p> <pre><code>ls ~/comfygit/environments/my-env/ComfyUI/user/default/workflows/\n</code></pre> <p>Workflow must be in this exact directory.</p> <p>Check filename:</p> <p>Must have <code>.json</code> extension.</p> <p>Solution: Move file to correct location:</p> <pre><code>mv ~/Downloads/my-workflow.json ~/comfygit/environments/my-env/ComfyUI/user/default/workflows/\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#deleted-workflow-still-in-cec","title":"Deleted workflow still in .cec","text":"<p>Problem: Deleted workflow from ComfyUI but still in <code>.cec/workflows/</code></p> <p>Expected behavior: Shows as \"deleted\" in <code>cg workflow list</code></p> <p>Solution: Commit to remove:</p> <pre><code>cg commit -m \"Remove deleted workflow\"\n</code></pre> <p>ComfyGit cleans up <code>.cec/workflows/</code> and <code>pyproject.toml</code> entries.</p>"},{"location":"user-guide/workflows/workflow-tracking/#workflow-wont-commit-due-to-unresolved-issues","title":"Workflow won't commit due to unresolved issues","text":"<p>Problem: <code>cg commit</code> blocked by workflow dependency issues</p> <p>Solution 1: Resolve dependencies</p> <pre><code>cg workflow resolve my-workflow\n</code></pre> <p>Interactive mode helps fix issues.</p> <p>Solution 2: Mark nodes/models optional</p> <p>During resolution, choose <code>[o]</code> optional for non-essential dependencies.</p> <p>Solution 3: Force commit (use sparingly)</p> <pre><code>cg commit --allow-issues -m \"WIP: experimental workflow\"\n</code></pre>"},{"location":"user-guide/workflows/workflow-tracking/#next-steps","title":"Next steps","text":"<ul> <li>Workflow resolution - Resolve workflow dependencies</li> <li>Model importance - Mark models as required/flexible/optional</li> <li>Version control - Git integration for environments</li> </ul>"}]}